(function(t){function e(e){for(var i,s,a=e[0],l=e[1],c=e[2],u=0,d=[];u<a.length;u++)s=a[u],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);h&&h(e);while(d.length)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var t,e=0;e<o.length;e++){for(var n=o[e],i=!0,s=1;s<n.length;s++){var l=n[s];0!==r[l]&&(i=!1)}i&&(o.splice(e--,1),t=a(a.s=n[0]))}return t}var i={},r={app:0},o=[];function s(t){return a.p+"js/"+({}[t]||t)+"."+{"chunk-cbb2bd0a":"7f6dda45"}[t]+".js"}function a(e){if(i[e])return i[e].exports;var n=i[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,a),n.l=!0,n.exports}a.e=function(t){var e=[],n=r[t];if(0!==n)if(n)e.push(n[2]);else{var i=new Promise((function(e,i){n=r[t]=[e,i]}));e.push(n[2]=i);var o,l=document.createElement("script");l.charset="utf-8",l.timeout=120,a.nc&&l.setAttribute("nonce",a.nc),l.src=s(t);var c=new Error;o=function(e){l.onerror=l.onload=null,clearTimeout(u);var n=r[t];if(0!==n){if(n){var i=e&&("load"===e.type?"missing":e.type),o=e&&e.target&&e.target.src;c.message="Loading chunk "+t+" failed.\n("+i+": "+o+")",c.name="ChunkLoadError",c.type=i,c.request=o,n[1](c)}r[t]=void 0}};var u=setTimeout((function(){o({type:"timeout",target:l})}),12e4);l.onerror=l.onload=o,document.head.appendChild(l)}return Promise.all(e)},a.m=t,a.c=i,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a.oe=function(t){throw console.error(t),t};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],c=l.push.bind(l);l.push=e,l=l.slice();for(var u=0;u<l.length;u++)e(l[u]);var h=c;o.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"0fd5":function(t,e,n){var i={"./af":"8206","./af.js":"8206","./ar":"cdac","./ar-dz":"7f26","./ar-dz.js":"7f26","./ar-kw":"8e88","./ar-kw.js":"8e88","./ar-ly":"cd65","./ar-ly.js":"cd65","./ar-ma":"e8d6","./ar-ma.js":"e8d6","./ar-sa":"a284","./ar-sa.js":"a284","./ar-tn":"64f7","./ar-tn.js":"64f7","./ar.js":"cdac","./az":"b139","./az.js":"b139","./be":"98e2","./be.js":"98e2","./bg":"a1a5","./bg.js":"a1a5","./bm":"4d0d","./bm.js":"4d0d","./bn":"e8ae","./bn-bd":"5dd8","./bn-bd.js":"5dd8","./bn.js":"e8ae","./bo":"bcf2","./bo.js":"bcf2","./br":"69f1","./br.js":"69f1","./bs":"24d1","./bs.js":"24d1","./ca":"3507","./ca.js":"3507","./cs":"d15f","./cs.js":"d15f","./cv":"7bfe","./cv.js":"7bfe","./cy":"1d35","./cy.js":"1d35","./da":"a019","./da.js":"a019","./de":"0cfa","./de-at":"edea","./de-at.js":"edea","./de-ch":"9aae","./de-ch.js":"9aae","./de.js":"0cfa","./dv":"1722","./dv.js":"1722","./el":"5390","./el.js":"5390","./en-au":"dad9","./en-au.js":"dad9","./en-ca":"6f13","./en-ca.js":"6f13","./en-gb":"6267","./en-gb.js":"6267","./en-ie":"80b1","./en-ie.js":"80b1","./en-il":"ad38","./en-il.js":"ad38","./en-in":"eb60","./en-in.js":"eb60","./en-nz":"39db","./en-nz.js":"39db","./en-sg":"c30d","./en-sg.js":"c30d","./eo":"1a30","./eo.js":"1a30","./es":"48a3","./es-do":"f306","./es-do.js":"f306","./es-mx":"56d9","./es-mx.js":"56d9","./es-us":"60bf","./es-us.js":"60bf","./es.js":"48a3","./et":"f891","./et.js":"f891","./eu":"a403","./eu.js":"a403","./fa":"ce14","./fa.js":"ce14","./fi":"fc14","./fi.js":"fc14","./fil":"f46e","./fil.js":"f46e","./fo":"2bf2","./fo.js":"2bf2","./fr":"c1e8","./fr-ca":"50a2","./fr-ca.js":"50a2","./fr-ch":"b087","./fr-ch.js":"b087","./fr.js":"c1e8","./fy":"4665","./fy.js":"4665","./ga":"b396","./ga.js":"b396","./gd":"056c","./gd.js":"056c","./gl":"efde","./gl.js":"efde","./gom-deva":"12ea","./gom-deva.js":"12ea","./gom-latn":"8e2c","./gom-latn.js":"8e2c","./gu":"533d","./gu.js":"533d","./he":"7520","./he.js":"7520","./hi":"d2f3","./hi.js":"d2f3","./hr":"7e79","./hr.js":"7e79","./hu":"148f","./hu.js":"148f","./hy-am":"6711","./hy-am.js":"6711","./id":"2b10","./id.js":"2b10","./is":"1feb","./is.js":"1feb","./it":"1b21","./it-ch":"8d2c","./it-ch.js":"8d2c","./it.js":"1b21","./ja":"926e","./ja.js":"926e","./jv":"5a78","./jv.js":"5a78","./ka":"5975","./ka.js":"5975","./kk":"cc93","./kk.js":"cc93","./km":"66e1","./km.js":"66e1","./kn":"5421","./kn.js":"5421","./ko":"1297","./ko.js":"1297","./ku":"16f8","./ku.js":"16f8","./ky":"3df9","./ky.js":"3df9","./lb":"c124","./lb.js":"c124","./lo":"20a5","./lo.js":"20a5","./lt":"c14a","./lt.js":"c14a","./lv":"c553","./lv.js":"c553","./me":"ae25","./me.js":"ae25","./mi":"6f56","./mi.js":"6f56","./mk":"c8fc","./mk.js":"c8fc","./ml":"752d","./ml.js":"752d","./mn":"f09e","./mn.js":"f09e","./mr":"0a56","./mr.js":"0a56","./ms":"55b6","./ms-my":"a9e9","./ms-my.js":"a9e9","./ms.js":"55b6","./mt":"624b","./mt.js":"624b","./my":"e256","./my.js":"e256","./nb":"e1d5","./nb.js":"e1d5","./ne":"761a","./ne.js":"761a","./nl":"a0f2","./nl-be":"5cb2","./nl-be.js":"5cb2","./nl.js":"a0f2","./nn":"4fda","./nn.js":"4fda","./oc-lnc":"ec3d","./oc-lnc.js":"ec3d","./pa-in":"2f2f","./pa-in.js":"2f2f","./pl":"317f","./pl.js":"317f","./pt":"5553","./pt-br":"a9ab","./pt-br.js":"a9ab","./pt.js":"5553","./ro":"db12","./ro.js":"db12","./ru":"7aa4","./ru.js":"7aa4","./sd":"e87b","./sd.js":"e87b","./se":"a296","./se.js":"a296","./si":"51ec","./si.js":"51ec","./sk":"608b","./sk.js":"608b","./sl":"b367","./sl.js":"b367","./sq":"f68f","./sq.js":"f68f","./sr":"0991","./sr-cyrl":"c577","./sr-cyrl.js":"c577","./sr.js":"0991","./ss":"cf76","./ss.js":"cf76","./sv":"0153","./sv.js":"0153","./sw":"cb6f","./sw.js":"cb6f","./ta":"8bfa","./ta.js":"8bfa","./te":"668b","./te.js":"668b","./tet":"eae7","./tet.js":"eae7","./tg":"70b1","./tg.js":"70b1","./th":"7180","./th.js":"7180","./tk":"4912","./tk.js":"4912","./tl-ph":"f8bb","./tl-ph.js":"f8bb","./tlh":"b026","./tlh.js":"b026","./tr":"371d","./tr.js":"371d","./tzl":"c744","./tzl.js":"c744","./tzm":"787a","./tzm-latn":"71e0","./tzm-latn.js":"71e0","./tzm.js":"787a","./ug-cn":"6b5c","./ug-cn.js":"6b5c","./uk":"8c0c","./uk.js":"8c0c","./ur":"519e","./ur.js":"519e","./uz":"7982","./uz-latn":"3137","./uz-latn.js":"3137","./uz.js":"7982","./vi":"ae22","./vi.js":"ae22","./x-pseudo":"1129","./x-pseudo.js":"1129","./yo":"b4bf","./yo.js":"b4bf","./zh-cn":"fdc4","./zh-cn.js":"fdc4","./zh-hk":"747d","./zh-hk.js":"747d","./zh-mo":"fe39","./zh-mo.js":"fe39","./zh-tw":"d3e0","./zh-tw.js":"d3e0"};function r(t){var e=o(t);return n(e)}function o(t){if(!n.o(i,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return i[t]}r.keys=function(){return Object.keys(i)},r.resolve=o,t.exports=r,r.id="0fd5"},"56d7":function(t,e,n){"use strict";n.r(e);n("4160"),n("b0c0"),n("d3b7"),n("159b"),n("e260"),n("e6cf"),n("cca6"),n("a79d");var i=n("e832"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("lbp-h5-editor",{ref:"editor",staticStyle:{height:"100vh"},attrs:{data:t.work}})],1)},o=[],s={name:"app",data:function(){return{work:{id:"3c31d1a0-0c91-4448-bf0a-9510b5b34be3",title:"标题",description:"描述",cover_image_url:null,pages:[{title:"",elements:[{pluginName:"lbp-picture",props:{imgSrc:"https://img.iplaysoft.com/wp-content/uploads/2019/free-images/free_stock_photo.jpg!0x0.webp",isRem:!1},style:{fillType:"contain",top:0,left:0,width:186,height:292,textAlign:"center",color:"#000000",backgroundColor:"rgba(255, 255, 255, 0)",fontSize:14}}]}],is_publish:0,is_template:0,created_at:"2020-10-12T06:34:41.000Z",updated_at:"2020-10-28T01:24:23.000Z",page_mode:"h5_swipper"}}},components:{}},a=s,l=n("2877"),c=Object(l["a"])(a,r,o,!1,null,null,null),u=c.exports,h=(n("c05f"),n("7a0e")),d=n.n(h),f=n("7dc1"),p=[{title:"公告",name:f["LbpNoticeBar"].name,icon:"volume-up",visible:!0,component:f["LbpNoticeBar"]},{title:"评分",name:f["LbpRate"].name,icon:"star-o",visible:!0,component:f["LbpRate"]},{title:"图片",name:f["LbpPicture"].name,icon:"photo",visible:!0,component:function(){return n.e("chunk-cbb2bd0a").then(n.t.bind(null,"7b32",7))}},{title:"文字",name:f["LbpText"].name,icon:"text-width",visible:!0,component:f["LbpText"]},{title:"普通按钮",name:f["LbpButton"].name,icon:"hand-pointer-o",visible:!0,component:f["LbpButton"]},{title:"轮播图",name:f["LbpSlide"].name,icon:"photo",visible:!0,component:f["LbpSlide"]},{title:"视频",name:f["LbpVideo"].name,icon:"file-video-o",visible:!0,component:f["LbpVideo"]},{title:"表单输入",name:f["LbpFormInput"].name,icon:"pencil-square-o",visible:!0,component:f["LbpFormInput"]},{title:"表单提交",name:f["LbpFormButton"].name,icon:"hand-pointer-o",visible:!0,component:f["LbpFormButton"]},{title:"表单多选",name:f["LbpFormCheckboxGroup"].name,icon:"check-square-o",visible:!0,component:f["LbpFormCheckboxGroup"]},{title:"表单单选",name:f["LbpFormRadioGroup"].name,icon:"dot-circle-o",visible:!0,component:f["LbpFormRadioGroup"]},{title:"背景",name:f["LbpBackground"].name,icon:"dot-circle-o",visible:!1,component:f["LbpBackground"]},{title:"背景音乐",name:f["LbpBgMusic"].name,icon:"music",visible:!0,component:f["LbpBgMusic"]},{title:"默认表格",name:f["LbpTable"].name,icon:"table",visible:!0,component:f["LbpTable"]},{icon:"table",name:f["LbpTable"].name,visible:!0,title:"表格",component:f["LbpTable"]},{title:"新闻列表",name:f["LbpNewsList"].name,icon:"list",visible:!0,component:f["LbpNewsList"]}];p.forEach((function(t){return d.a.LbpH5Plugin.register(t)})),i["default"].config.productionTip=!1,i["default"].use(d.a),new i["default"]({render:function(t){return t(u)}}).$mount("#app")},"7a0e":function(t,e,n){"use strict";t.exports=n("ac22")},"7a9e":function(t,e,n){(function(t){!function(t,i){i(e,n("37eb"),n("df2a"),n("83c9"))}(0,(function(e,n,i,r){"use strict";var o=function(t){try{return!!t()}catch(n){return!0}},s=!o((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),a="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function l(t){var e={exports:{}};return t(e,e.exports),e.exports}var c=function(t){return t&&t.Math==Math&&t},u=c("object"==typeof globalThis&&globalThis)||c("object"==typeof window&&window)||c("object"==typeof self&&self)||c("object"==typeof a&&a)||function(){return this}()||Function("return this")(),h=/#|\.prototype\./,d=function(t,e){var n=p[f(t)];return n==m||n!=g&&("function"==typeof e?o(e):!!e)},f=d.normalize=function(t){return String(t).replace(h,".").toLowerCase()},p=d.data={},g=d.NATIVE="N",m=d.POLYFILL="P",v=d,b=function(t){return"object"==typeof t?null!==t:"function"==typeof t},y=u.document,w=b(y)&&b(y.createElement),x=function(t){return w?y.createElement(t):{}},S=!s&&!o((function(){return 7!=Object.defineProperty(x("div"),"a",{get:function(){return 7}}).a})),k=function(t){if(!b(t))throw TypeError(String(t)+" is not an object");return t},E=function(t,e){if(!b(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!b(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!b(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!b(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},O=Object.defineProperty,C={f:s?O:function(t,e,n){if(k(t),e=E(e,!0),k(n),S)try{return O(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},j=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},I=s?function(t,e,n){return C.f(t,e,j(1,n))}:function(t,e,n){return t[e]=n,t},T={}.hasOwnProperty,_=function(t,e){return T.call(t,e)},A=function(t,e){try{I(u,t,e)}catch(i){u[t]=e}return e},P="__core-js_shared__",D=u[P]||A(P,{}),M=Function.toString;"function"!=typeof D.inspectSource&&(D.inspectSource=function(t){return M.call(t)});var R,L,N,z=D.inspectSource,F=u.WeakMap,$="function"==typeof F&&/native code/.test(z(F)),V=l((function(t){(t.exports=function(t,e){return D[t]||(D[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.7.0",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),H=0,W=Math.random(),B=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++H+W).toString(36)},U=V("keys"),q=function(t){return U[t]||(U[t]=B(t))},G={},Y=u.WeakMap;if($){var X=D.state||(D.state=new Y),Z=X.get,K=X.has,Q=X.set;R=function(t,e){return e.facade=t,Q.call(X,t,e),e},L=function(t){return Z.call(X,t)||{}},N=function(t){return K.call(X,t)}}else{var J=q("state");G[J]=!0,R=function(t,e){return e.facade=t,I(t,J,e),e},L=function(t){return _(t,J)?t[J]:{}},N=function(t){return _(t,J)}}var tt,et={set:R,get:L,has:N,enforce:function(t){return N(t)?L(t):R(t,{})},getterFor:function(t){return function(e){var n;if(!b(e)||(n=L(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},nt=l((function(t){var e=et.get,n=et.enforce,i=String(String).split("String");(t.exports=function(t,e,r,o){var s,a=!!o&&!!o.unsafe,l=!!o&&!!o.enumerable,c=!!o&&!!o.noTargetGet;"function"==typeof r&&("string"!=typeof e||_(r,"name")||I(r,"name",e),(s=n(r)).source||(s.source=i.join("string"==typeof e?e:""))),t!==u?(a?!c&&t[e]&&(l=!0):delete t[e],l?t[e]=r:I(t,e,r)):l?t[e]=r:A(e,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||z(this)}))})),it={}.toString,rt=function(t){return it.call(t).slice(8,-1)},ot=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(r){}return function(n,i){return k(n),function(t){if(!b(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(i),e?t.call(n,i):n.__proto__=i,n}}():void 0),st=function(t,e,n){var i,r;return ot&&"function"==typeof(i=e.constructor)&&i!==n&&b(r=i.prototype)&&r!==n.prototype&&ot(t,r),t},at="".split,lt=o((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==rt(t)?at.call(t,""):Object(t)}:Object,ct=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},ut=function(t){return lt(ct(t))},ht=Math.ceil,dt=Math.floor,ft=function(t){return isNaN(t=+t)?0:(t>0?dt:ht)(t)},pt=Math.min,gt=function(t){return t>0?pt(ft(t),9007199254740991):0},mt=Math.max,vt=Math.min,bt=function(t,e){var n=ft(t);return n<0?mt(n+e,0):vt(n,e)},yt=function(t){return function(e,n,i){var r,o=ut(e),s=gt(o.length),a=bt(i,s);if(t&&n!=n){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((t||a in o)&&o[a]===n)return t||a||0;return!t&&-1}},wt={includes:yt(!0),indexOf:yt(!1)},xt=wt.indexOf,St=function(t,e){var n,i=ut(t),r=0,o=[];for(n in i)!_(G,n)&&_(i,n)&&o.push(n);for(;e.length>r;)_(i,n=e[r++])&&(~xt(o,n)||o.push(n));return o},kt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Et=Object.keys||function(t){return St(t,kt)},Ot=s?Object.defineProperties:function(t,e){k(t);for(var n,i=Et(e),r=i.length,o=0;r>o;)C.f(t,n=i[o++],e[n]);return t},Ct=u,jt=function(t){return"function"==typeof t?t:void 0},It=function(t,e){return arguments.length<2?jt(Ct[t])||jt(u[t]):Ct[t]&&Ct[t][e]||u[t]&&u[t][e]},Tt=It("document","documentElement"),_t=q("IE_PROTO"),At=function(){},Pt=function(t){return"<script>"+t+"<\/script>"},Dt=function(){try{tt=document.domain&&new ActiveXObject("htmlfile")}catch(r){}var t,e;Dt=tt?function(t){t.write(Pt("")),t.close();var e=t.parentWindow.Object;return t=null,e}(tt):((e=x("iframe")).style.display="none",Tt.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(Pt("document.F=Object")),t.close(),t.F);for(var n=kt.length;n--;)delete Dt.prototype[kt[n]];return Dt()};G[_t]=!0;var Mt=Object.create||function(t,e){var n;return null!==t?(At.prototype=k(t),n=new At,At.prototype=null,n[_t]=t):n=Dt(),void 0===e?n:Ot(n,e)},Rt=kt.concat("length","prototype"),Lt={f:Object.getOwnPropertyNames||function(t){return St(t,Rt)}},Nt={}.propertyIsEnumerable,zt=Object.getOwnPropertyDescriptor,Ft={f:zt&&!Nt.call({1:2},1)?function(t){var e=zt(this,t);return!!e&&e.enumerable}:Nt},$t=Object.getOwnPropertyDescriptor,Vt={f:s?$t:function(t,e){if(t=ut(t),e=E(e,!0),S)try{return $t(t,e)}catch(i){}if(_(t,e))return j(!Ft.f.call(t,e),t[e])}},Ht="\t\n\v\f\r                　\u2028\u2029\ufeff",Wt="["+Ht+"]",Bt=RegExp("^"+Wt+Wt+"*"),Ut=RegExp(Wt+Wt+"*$"),qt=function(t){return function(e){var n=String(ct(e));return 1&t&&(n=n.replace(Bt,"")),2&t&&(n=n.replace(Ut,"")),n}},Gt={start:qt(1),end:qt(2),trim:qt(3)},Yt=Lt.f,Xt=Vt.f,Zt=C.f,Kt=Gt.trim,Qt="Number",Jt=u.Number,te=Jt.prototype,ee=rt(Mt(te))==Qt,ne=function(t){var e,n,i,r,o,s,a,l,c=E(t,!1);if("string"==typeof c&&c.length>2)if(43===(e=(c=Kt(c)).charCodeAt(0))||45===e){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+c}for(s=(o=c.slice(2)).length,a=0;a<s;a++)if((l=o.charCodeAt(a))<48||l>r)return NaN;return parseInt(o,i)}return+c};if(v(Qt,!Jt(" 0o1")||!Jt("0b1")||Jt("+0x1"))){for(var ie,re=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof re&&(ee?o((function(){te.valueOf.call(n)})):rt(n)!=Qt)?st(new Jt(ne(e)),n,re):ne(e)},oe=s?Yt(Jt):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),se=0;oe.length>se;se++)_(Jt,ie=oe[se])&&!_(re,ie)&&Zt(re,ie,Xt(Jt,ie));re.prototype=te,te.constructor=re,nt(u,Qt,re)}var ae,le,ce={},ue={labelCol:{span:24},wrapperCol:{span:24,offset:0}},he={boolean:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.label,n=void 0===e?"开关":e,i=t.defaultValue,r=void 0!==i&&i,o=t.props,s=void 0===o?{}:o,a=t.visible,l=void 0===a||a;return{type:Boolean,default:r,visible:l,editor:{type:"a-switch",label:n,props:s}}},required:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},color:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.label,n=void 0===e?"文字颜色":e,i=t.defaultValue,r=void 0===i?"#000000":i,o=t.visible,s=void 0===o||o;return{type:String,default:r,visible:s,editor:{type:"colors-panel",label:n,props:{size:"mini",showAlpha:!0},require:!0}}},colors:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.label,n=void 0===e?"颜色面板":e,i=t.defaultValue,r=void 0===i?function(){return[]}:i,o=t.layout,s=void 0===o?ue:o,a=t.visible,l=void 0===a||a;return{type:Array,default:r,visible:l,editor:{type:"colors-panel",label:n,props:{size:"mini",showAlpha:!0},layout:s,require:!0}}},number:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.label,n=void 0===e?"数值":e,i=t.defaultValue,r=void 0===i?10:i,o=t.props,s=void 0===o?ce:o,a=t.visible,l=void 0===a||a;return{type:Number,default:r,visible:l,editor:{type:"a-input-number",label:n,require:!0,props:s}}},string:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.label,n=void 0===e?"按钮文字":e,i=t.defaultValue,r=void 0===i?"按钮":i,o=t.component,s=void 0===o?"a-input":o,a=t.props,l=void 0===a?{}:a,c=t.extra,u=t.visible,h=void 0===u||u;return{type:String,default:r,visible:h,editor:{type:s,label:n,require:!0,props:l,extra:c}}},textAlign:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.label,n=void 0===e?"文字对齐":e,i=t.defaultValue,r=void 0===i?"center":i,o=t.visible,s=void 0===o||o;return{type:String,default:r,visible:s,editor:{type:"lbs-text-align",label:n,require:!0}}},textOptions:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.label,n=void 0===e?"选项列表":e,i=t.defaultValue,r=void 0===i?function(){return[{label:"label1",value:"value1"}]}:i,o=t.visible,s=void 0===o||o;return{type:Array,default:r,visible:s,editor:{type:"lbs-props-text-enum-editor",label:n,require:!0}}},image:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.label,n=void 0===e?"图片":e,i=t.defaultValue,r=void 0===i?"":i,o=t.visible,s=void 0===o||o;return{type:String,default:r,visible:s,editor:{type:"lbs-image-gallery",label:n}}},excel:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.label,n=void 0===e?"数据源":e,i=t.defaultValue,r=void 0===i?[]:i,o=t.layout,s=void 0===o?ue:o,a=t.visible,l=void 0===a||a;return{type:Array,default:r,visible:l,editor:{type:"lbs-excel-editor",label:n,layout:s}}},select:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.valueType,n=void 0===e?String:e,i=t.label,r=void 0===i?"选项":i,o=t.defaultValue,s=void 0===o?[]:o,a=t.visible,l=void 0===a||a,c=t.options,u=void 0===c?[]:c;return{type:n,default:s,visible:l,editor:{type:"a-select",label:r,props:{options:u}}}}},de={name:"lbp-button",render:function(){var t=arguments[0],e=this.color,n=this.textAlign,i=this.backgroundColor,r=this.fontSize,o=this.lineHeight,s=this.borderColor,a=this.borderRadius,l=this.borderWidth,c=this.text,u={color:e,textAlign:n,backgroundColor:i,fontSize:r,lineHeight:o+"em",borderColor:s,borderRadius:a+"px",borderWidth:l+"px",textDecoration:"none",width:"".concat(this.width,"px"),height:"".concat(this.height,"px")};return t("button",{style:u},[c])},props:{width:{type:Number,default:120},height:{type:Number,default:40},text:he.string(),vertical:he.boolean(),backgroundColor:he.color({label:"背景色",defaultValue:"#ffffff"}),color:he.color(),fontSize:he.number({label:"字号(px)",defaultValue:14}),lineHeight:he.number({label:"行高(px)",defaultValue:1}),borderWidth:he.number({label:"边框宽度(px)",defaultValue:1}),borderRadius:he.number({label:"圆角(px)",defaultValue:4}),borderColor:he.color({label:"边框颜色",defaultValue:"#ced4da"}),textAlign:he.textAlign()}},fe={name:"lbp-picture",render:function(){var t=arguments[0];return t("img",{attrs:{src:this.imgSrc,alt:"",srcset:"",width:"100%"},style:{objectFit:this.fillType}})},props:{imgSrc:he.string({label:"图片地址"}),fillType:{type:String,default:"contain",editor:{type:"a-select",label:"填充方式",props:{options:[{label:"contain 短边缩放",value:"contain"},{label:"cover 长边缩放",value:"cover"},{label:"fill 拉伸",value:"fill"},{label:"none 原始",value:"none"},{label:"scale-down 弹性缩放",value:"scale-down"}]}}}}},pe="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4NCjxzdmcgd2lkdGg9IjMyMHB4IiBoZWlnaHQ9IjE4MHB4IiB2aWV3Qm94PSIwIDAgMzIwIDE4MCIgdmVyc2lvbj0iMS4xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIj4NCiAgICA8IS0tIEdlbmVyYXRvcjogU2tldGNoIDUxLjMgKDU3NTQ0KSAtIGh0dHA6Ly93d3cuYm9oZW1pYW5jb2RpbmcuY29tL3NrZXRjaCAtLT4NCiAgICA8dGl0bGU+UmVjdGFuZ2xlIDM8L3RpdGxlPg0KICAgIDxkZXNjPkNyZWF0ZWQgd2l0aCBTa2V0Y2guPC9kZXNjPg0KICAgIDxkZWZzPjwvZGVmcz4NCiAgICA8ZyBpZD0icGxheSIgc3Ryb2tlPSJub25lIiBzdHJva2Utd2lkdGg9IjEiIGZpbGw9Im5vbmUiIGZpbGwtcnVsZT0iZXZlbm9kZCI+DQogICAgICAgIDxnIGlkPSJHcm91cC0yOSIgZmlsbC1ydWxlPSJub256ZXJvIj4NCiAgICAgICAgICAgIDxyZWN0IGlkPSJSZWN0YW5nbGUtMyIgZmlsbD0iI0Q4RDhEOCIgb3BhY2l0eT0iMCIgeD0iMCIgeT0iMCIgd2lkdGg9IjMyMCIgaGVpZ2h0PSIxODAiPjwvcmVjdD4NCiAgICAgICAgICAgIDxnIGlkPSJHcm91cC0yIiB0cmFuc2Zvcm09InRyYW5zbGF0ZSgxMjQuMDAwMDAwLCA1NC4wMDAwMDApIj4NCiAgICAgICAgICAgICAgICA8Y2lyY2xlIGlkPSJDb21iaW5lZC1TaGFwZSIgZmlsbD0iI0ZGRkZGRiIgb3BhY2l0eT0iMC40MDAwMDAwMDYiIGN4PSIzNiIgY3k9IjM2IiByPSIzNiI+PC9jaXJjbGU+DQogICAgICAgICAgICAgICAgPHBhdGggZD0iTTUyLjUwMTQ1NzEsMzguNDY4NzAzOSBMMjkuNTEyNTQ3NCw1My4wOTEwNDA2IEMyOC40MjUyMDE2LDUzLjc4MjY1ODMgMjYuOTgzMDY2Nyw1My40NjE4NTczIDI2LjI5MTQ0OSw1Mi4zNzQ1MTE0IEMyNi4wNTMzNzY0LDUyLjAwMDIxOSAyNS45MjY5Mjk1LDUxLjU2NTgxODMgMjUuOTI2OTI5NSw1MS4xMjIyMjY4IEwyNS45MjY5Mjk1LDIxLjg3NzU1MzQgQzI1LjkyNjkyOTUsMjAuNTg4ODg5IDI2Ljk3MTU5ODQsMTkuNTQ0MjIwMSAyOC4yNjAyNjI4LDE5LjU0NDIyMDEgQzI4LjcwMzg1NDMsMTkuNTQ0MjIwMSAyOS4xMzgyNTUsMTkuNjcwNjY3MSAyOS41MTI1NDc0LDE5LjkwODczOTcgTDUyLjUwMTQ1NzEsMzQuNTMxMDc2NCBDNTMuNTg4ODAyOSwzNS4yMjI2OTQxIDUzLjkwOTYwNCwzNi42NjQ4Mjg5IDUzLjIxNzk4NjMsMzcuNzUyMTc0NyBDNTMuMDM0NTE1OCwzOC4wNDA2MjI5IDUyLjc4OTkwNTIsMzguMjg1MjMzNSA1Mi41MDE0NTcxLDM4LjQ2ODcwMzkgWiIgaWQ9IlRyaWFuZ2xlLTIiIGZpbGw9IiMwMDAwMDAiIG9wYWNpdHk9IjAuNSI+PC9wYXRoPg0KICAgICAgICAgICAgPC9nPg0KICAgICAgICA8L2c+DQogICAgPC9nPg0KPC9zdmc+",ge={name:"lbp-video",props:{src:he.string({label:"视频地址"}),disabled:he.boolean({label:"disabled"}),useIframe:he.boolean({label:"使用iframe"}),iframeSrc:he.string({default:"",label:"iframe 地址",props:{type:"textarea",placeholder:"只有使用iframe打开的时候，这个才有效"},extra:function(t){return"「使用iframe」打开的时候，这个才有效；上传视频请忽略该配置"}})},watch:{src:function(){this.appendIframe()},disabled:function(){this.appendIframe()},useIframe:function(){this.appendIframe()},iframeSrc:function(){this.appendIframe()}},mounted:function(){this.appendIframe()},methods:{appendIframe:function(){this.useIframe&&this.iframeSrc&&this.$refs.iframeWrapper&&(this.$refs.iframeWrapper.innerHTML=this.iframeSrc)}},render:function(t){return t("div",{class:"lbc-video",style:this.disabled?{"pointer-events":"none"}:{}},[this.useIframe?t("div",{ref:"iframeWrapper"},[t("img",{attrs:{src:pe,width:"100%",height:"100%"}})]):t("video",{attrs:{playsinline:"true","webkit-playsinline":"",width:"100%",height:"100%",poster:pe,controls:!0},ref:"videoTag"},[t("source",{attrs:{type:"video/mp4",src:this.src}})])])},componentsForPropsEditor:{}},me={f:Object.getOwnPropertySymbols},ve=It("Reflect","ownKeys")||function(t){var e=Lt.f(k(t)),n=me.f;return n?e.concat(n(t)):e},be=function(t,e){for(var n=ve(e),i=C.f,r=Vt.f,o=0;o<n.length;o++){var s=n[o];_(t,s)||i(t,s,r(e,s))}},ye=Vt.f,we=function(t,e){var n,i,r,o,s,a=t.target,l=t.global,c=t.stat;if(n=l?u:c?u[a]||A(a,{}):(u[a]||{}).prototype)for(i in e){if(o=e[i],r=t.noTargetGet?(s=ye(n,i))&&s.value:n[i],!v(l?i:a+(c?".":"#")+i,t.forced)&&void 0!==r){if(typeof o==typeof r)continue;be(o,r)}(t.sham||r&&r.sham)&&I(o,"sham",!0),nt(n,i,o,t)}},xe=Array.isArray||function(t){return"Array"==rt(t)},Se=function(t){return Object(ct(t))},ke=function(t,e,n){var i=E(e);i in t?C.f(t,i,j(0,n)):t[i]=n},Ee=!!Object.getOwnPropertySymbols&&!o((function(){return!String(Symbol())})),Oe=Ee&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,Ce=V("wks"),je=u.Symbol,Ie=Oe?je:je&&je.withoutSetter||B,Te=function(t){return _(Ce,t)||(Ee&&_(je,t)?Ce[t]=je[t]:Ce[t]=Ie("Symbol."+t)),Ce[t]},_e=Te("species"),Ae=function(t,e){var n;return xe(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!xe(n.prototype)?b(n)&&null===(n=n[_e])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Pe=It("navigator","userAgent")||"",De=u.process,Me=De&&De.versions,Re=Me&&Me.v8;Re?le=(ae=Re.split("."))[0]+ae[1]:Pe&&(!(ae=Pe.match(/Edge\/(\d+)/))||ae[1]>=74)&&(ae=Pe.match(/Chrome\/(\d+)/))&&(le=ae[1]);var Le=le&&+le,Ne=Te("species"),ze=function(t){return Le>=51||!o((function(){var e=[];return(e.constructor={})[Ne]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Fe=Te("isConcatSpreadable"),$e=9007199254740991,Ve="Maximum allowed index exceeded",He=Le>=51||!o((function(){var t=[];return t[Fe]=!1,t.concat()[0]!==t})),We=ze("concat"),Be=function(t){if(!b(t))return!1;var e=t[Fe];return void 0!==e?!!e:xe(t)};we({target:"Array",proto:!0,forced:!He||!We},{concat:function(t){var e,n,i,r,o,s=Se(this),a=Ae(s,0),l=0;for(e=-1,i=arguments.length;e<i;e++)if(Be(o=-1===e?s:arguments[e])){if(l+(r=gt(o.length))>$e)throw TypeError(Ve);for(n=0;n<r;n++,l++)n in o&&ke(a,l,o[n])}else{if(l>=$e)throw TypeError(Ve);ke(a,l++,o)}return a.length=l,a}});var Ue={render:function(t){var e=this,i=this.canEdit&&"edit"===this.editorMode,r={position:"relative",color:"".concat(this.color," !important"),textDecoration:"none",backgroundColor:this.backgroundColor||"rgba(255, 255, 255, 0.2)",lineHeight:"".concat(this.lineHeight,"em"),border:"".concat(this.borderWidth,"px solid ").concat(this.borderColor),borderRadius:"".concat(this.borderRadius,"px")},o=t("div",{class:"ql-snow"},[t("div",{domProps:{innerHTML:this.text},class:"ql-editor ql-container"})]);return t("div",{on:{dblclick:function(t){e.canEdit=!0,t.stopPropagation()},mousedown:function(t){e.canEdit&&t.stopPropagation()},keydown:function(t){var e=t.keyCode||t.charCode;8!==e&&46!==e||t.stopPropagation()}},style:r},[i?t(n.quillEditor,{attrs:{content:this.text,options:{modules:{toolbar:[["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],[{color:[]},{background:[]}],[{align:[]}],["clean"],[{header:[1,2,3,4,5,6,!1]}]]},theme:"snow"}},on:{change:function(t){t.quill;var n=t.html;t.text,e.$emit("input",{value:n})}}}):o])},name:"lbp-text",data:function(){return{canEdit:!1,innerText:this.text||"双击修改文字"}},props:{backgroundColor:he.color({label:"背景色",defaultValue:"rgba(0, 0, 0, 0)"}),borderWidth:he.number({label:"边框宽度(px)",defaultValue:0}),borderRadius:he.number({label:"圆角(px)"}),borderColor:he.color({label:"边框颜色"}),text:he.string({label:"内容",defaultValue:"双击修改文字",visible:!1}),editorMode:he.string({defaultValue:"preview",label:"模式",visible:!1})},editorConfig:{}},qe=C.f,Ge=Function.prototype,Ye=Ge.toString,Xe=/^\s*function ([^ (]*)/,Ze="name";s&&!(Ze in Ge)&&qe(Ge,Ze,{configurable:!0,get:function(){try{return Ye.call(this).match(Xe)[1]}catch(e){return""}}});var Ke={name:"lbp-form-input",render:function(t){var e={color:this.color,textAlign:this.textAlign,backgroundColor:this.backgroundColor,fontSize:this.fontSize+"px",lineHeight:this.lineHeight+"em",borderColor:this.borderColor,borderRadius:this.borderRadius+"px",borderWidth:this.borderWidth+"px",padding:"0 5px"};return t("input",{attrs:{disabled:this.disabled,type:this.type,name:this.name,placeholder:this.placeholder,autocomplete:"off","data-type":"lbp-form-input"},style:e})},props:{type:he.select({defaultValue:"text",label:"类型",options:[{label:"文字",value:"text"},{label:"密码",value:"password"},{label:"日期",value:"date"},{label:"邮箱",value:"email"},{label:"手机号",value:"tel"}]}),name:he.string({defaultValue:"name",label:"name"}),disabled:he.boolean({label:"disabled"}),fontSize:he.number({label:"字号(px)"}),placeholder:he.string({defaultValue:"提示信息",label:"提示信息"}),color:he.color(),backgroundColor:he.color({label:"背景色",defaultValue:"rgba(255, 255, 255, 0.2)"}),borderWidth:he.number({label:"边框宽度(px)",defaultValue:1}),borderRadius:he.number({label:"圆角(px)",defaultValue:0}),borderColor:he.color({label:"边框颜色",defaultValue:"#ced4da"}),textAlign:he.textAlign({defaultValue:"left"}),vertical:he.boolean(),lineHeight:he.number({label:"行高(px)",defaultValue:1})}},Qe=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Je=[].push,tn=function(t){var e=1==t,n=2==t,i=3==t,r=4==t,o=6==t,s=5==t||o;return function(a,l,c,u){for(var h,d,f=Se(a),p=lt(f),g=function(t,e,n){if(Qe(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}(l,c,3),m=gt(p.length),v=0,b=u||Ae,y=e?b(a,m):n?b(a,0):void 0;m>v;v++)if((s||v in p)&&(d=g(h=p[v],v,f),t))if(e)y[v]=d;else if(d)switch(t){case 3:return!0;case 5:return h;case 6:return v;case 2:Je.call(y,h)}else if(r)return!1;return o?-1:i||r?r:y}},en={forEach:tn(0),map:tn(1),filter:tn(2),some:tn(3),every:tn(4),find:tn(5),findIndex:tn(6)},nn=function(t,e){var n=[][t];return!!n&&o((function(){n.call(null,e||function(){throw 1},1)}))},rn=Object.defineProperty,on={},sn=function(t){throw t},an=function(t,e){if(_(on,t))return on[t];e||(e={});var n=[][t],i=!!_(e,"ACCESSORS")&&e.ACCESSORS,r=_(e,0)?e[0]:sn,a=_(e,1)?e[1]:void 0;return on[t]=!!n&&!o((function(){if(i&&!s)return!0;var t={length:-1};i?rn(t,1,{enumerable:!0,get:sn}):t[1]=1,n.call(t,r,a)}))},ln=en.forEach,cn=nn("forEach"),un=an("forEach"),hn=cn&&un?[].forEach:function(t){return ln(this,t,arguments.length>1?arguments[1]:void 0)};for(var dn in we({target:"Array",proto:!0,forced:[].forEach!=hn},{forEach:hn}),{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var fn=u[dn],pn=fn&&fn.prototype;if(pn&&pn.forEach!==hn)try{I(pn,"forEach",hn)}catch(wr){pn.forEach=hn}}var gn={render:function(){var t=arguments[0],e=this.color,n=this.textAlign,i=this.backgroundColor,r=this.fontSize,o=this.lineHeight,s=this.borderColor,a=this.borderRadius,l=this.borderWidth,c=this.text,u=this.disabled,h={color:e,textAlign:n,backgroundColor:i,fontSize:r,lineHeight:o+"em",borderColor:s,borderRadius:a+"px",borderWidth:l+"px",textDecoration:"none",disabled:u};return t("button",{style:h,on:{click:this.handleClick}},[c])},name:"lbp-form-button",props:{text:he.string({defaultValue:"提交"}),vertical:he.boolean(),backgroundColor:he.color({label:"背景色",defaultValue:"rgba(255, 255, 255, 0.2)"}),color:he.color(),fontSize:he.number({label:"字号(px)",defaultValue:14}),lineHeight:he.number({label:"行高(px)",defaultValue:1}),borderWidth:he.number({label:"边框宽度(px)",defaultValue:1}),borderRadius:he.number({label:"圆角(px)",defaultValue:4}),borderColor:he.color({label:"边框颜色",defaultValue:"#ced4da"}),textAlign:he.textAlign(),disabled:he.boolean()},methods:{handleClick:function(){if(!this.disabled){var t=document.querySelectorAll("[data-type^='lbp-form-input']");if(t.length){var e=this,n=new FormData;t.forEach((function(t){return n.append(t.dataset.uuid,t.value)}));var i=new XMLHttpRequest;i.onreadystatechange=function(){if(4===i.readyState){var t=200===i.status?"提交成功":"提交失败";e.$message.info(t)}};var r=window.__work.id;i.open("post","/works/form/submit/".concat(r),!0),i.send(n)}}}}},mn=wt.indexOf,vn=[].indexOf,bn=!!vn&&1/[1].indexOf(1,-0)<0,yn=nn("indexOf"),wn=an("indexOf",{ACCESSORS:!0,1:0});we({target:"Array",proto:!0,forced:bn||!yn||!wn},{indexOf:function(t){return bn?vn.apply(this,arguments)||0:mn(this,t,arguments.length>1?arguments[1]:void 0)}});var xn=[].join,Sn=lt!=Object,kn=nn("join",",");we({target:"Array",proto:!0,forced:Sn||!kn},{join:function(t){return xn.call(ut(this),void 0===t?",":t)}});var En=en.map,On=ze("map"),Cn=an("map");we({target:"Array",proto:!0,forced:!On||!Cn},{map:function(t){return En(this,t,arguments.length>1?arguments[1]:void 0)}});var jn=ze("splice"),In=an("splice",{ACCESSORS:!0,0:0,1:2}),Tn=Math.max,_n=Math.min,An=9007199254740991,Pn="Maximum allowed length exceeded";we({target:"Array",proto:!0,forced:!jn||!In},{splice:function(t,e){var n,i,r,o,s,a,l=Se(this),c=gt(l.length),u=bt(t,c),h=arguments.length;if(0===h?n=i=0:1===h?(n=0,i=c-u):(n=h-2,i=_n(Tn(ft(e),0),c-u)),c+n-i>An)throw TypeError(Pn);for(r=Ae(l,i),o=0;o<i;o++)(s=u+o)in l&&ke(r,o,l[s]);if(r.length=i,n<i){for(o=u;o<c-i;o++)a=o+n,(s=o+i)in l?l[a]=l[s]:delete l[a];for(o=c;o>c-i+n;o--)delete l[o-1]}else if(n>i)for(o=c-i;o>u;o--)a=o+n-1,(s=o+i-1)in l?l[a]=l[s]:delete l[a];for(o=0;o<n;o++)l[o+u]=arguments[o+2];return l.length=c-i+n,r}});var Dn={name:"lbp-form-radio",props:{value:{type:[String,Number],default:"选项值"},aliasName:{type:String,default:"标题演示"},type:{type:String,default:"radio"},checked:{type:Boolean,default:!1},onFocus:{type:Function,default:function(){}},onClick:{type:Function,default:function(){}},onBlur:{type:Function,default:function(){}},doChange:{type:Function,default:function(){}}},methods:{handleChange:function(t){this.disabled||this.$emit("change",t.target.value)}},render:function(){var t=arguments[0],e=this.aliasName,n=this.type,i=this.disabled,r=this.checked,o=this.value,s=+new Date;return t("div",{class:["lbp-"+this.type+"-wrapper","lbp-rc-wrapper"]},[t("span",{class:"tag"},[o]),t("input",{class:["lbp-"+this.type,"lbp-rc-input"],attrs:{name:e,id:s,type:n,disabled:i},ref:"input",domProps:{value:o,checked:!!r},on:{change:this.handleChange}}),t("label",{attrs:{for:s}})])}},Mn={name:"lbp-form-radio-group",props:{width:{default:120},height:{default:120},aliasName:he.string({defaultValue:"标题演示",label:"填写标题"}),items:he.textOptions({label:"选项列表",defaultValue:function(){return[{value:"选项A"},{value:"选项B"},{value:"选项C"}]}}),type:{type:String,default:"radio",editor:{type:"a-radio-group",label:"选择模式",require:!0,props:{options:[{label:"单选",value:"radio"},{label:"多选",value:"checkbox"}],name:"mode"}}}},data:function(){return{value:"radio"===this.type?"":[],uuid:void 0}},computed:{value_:function(){return"radio"===this.type?this.value:(Array.isArray(this.value)&&this.value||[]).join(",")}},watch:{type:function(t){this.value="radio"===t?"":[]}},mounted:function(){this.uuid=this.$el.dataset.uuid},methods:{onChange:function(t){switch(this.type){case"radio":this.toggleRadio(t);break;case"checkbox":this.toggleCheckbox(t)}},toggleCheckbox:function(t){var e=this.value.indexOf(t);-1===e?this.value.push(t):this.value.splice(e,1)},toggleRadio:function(t){this.value=t}},render:function(){var t=this,e=arguments[0];return e("div",[e("h3",[this.aliasName]),e("input",{attrs:{type:"text",hidden:!0,"data-type":"lbp-form-input","data-uuid":this.uuid},domProps:{value:this.value_}}),this.items.map((function(n){return e(Dn,{attrs:{vertical:!0,value:n.value,checked:t.value===n.value,aliasName:t.uuid,type:t.type},on:{change:t.onChange}},[n.value])}))])}},Rn=Te("unscopables"),Ln=Array.prototype;null==Ln[Rn]&&C.f(Ln,Rn,{configurable:!0,value:Mt(null)});var Nn=wt.includes;we({target:"Array",proto:!0,forced:!an("indexOf",{ACCESSORS:!0,1:0})},{includes:function(t){return Nn(this,t,arguments.length>1?arguments[1]:void 0)}}),function(t){Ln[Rn][t]=!0}("includes");var zn=Te("match"),Fn=function(t){if(function(t){var e;return b(t)&&(void 0!==(e=t[zn])?!!e:"RegExp"==rt(t))}(t))throw TypeError("The method doesn't accept regular expressions");return t},$n=Te("match");we({target:"String",proto:!0,forced:!function(t){var e=/./;try{"/./"[t](e)}catch(i){try{return e[$n]=!1,"/./"[t](e)}catch(r){}}return!1}("includes")},{includes:function(t){return!!~String(ct(this)).indexOf(Fn(t),arguments.length>1?arguments[1]:void 0)}});var Vn,Hn,Wn,Bn={name:"lbp-form-checkbox-group",components:{LbpFormRadio:Dn},props:{width:{default:120},height:{default:120},aliasName:he.string({defaultValue:"标题演示",label:"填写标题"}),items:he.textOptions({label:"选项列表",defaultValue:function(){return[{value:"选项A"},{value:"选项B"},{value:"选项C"}]}}),type:{type:String,default:"checkbox",editor:{type:"a-radio-group",label:"选择模式",require:!0,props:{options:[{label:"单选",value:"radio"},{label:"多选",value:"checkbox"}],name:"mode"}}}},data:function(){return{value:"radio"===this.type?"":[],uuid:void 0}},computed:{value_:function(){return"radio"===this.type?this.value:(Array.isArray(this.value)&&this.value||[]).join(",")}},watch:{type:function(t){this.value="radio"===t?"":[]}},mounted:function(){this.uuid=this.$el.dataset.uuid},methods:{onChange:function(t){switch(this.type){case"radio":this.toggleRadio(t);break;case"checkbox":this.toggleCheckbox(t)}},toggleCheckbox:function(t){var e=this.value.indexOf(t);-1===e?this.value.push(t):this.value.splice(e,1)},toggleRadio:function(t){this.value=t}},render:function(){var t=this,e=arguments[0];return e("div",[e("h3",[this.aliasName]),e("input",{attrs:{type:"text",hidden:!0,"data-type":"lbp-form-input","data-uuid":this.uuid},domProps:{value:this.value_}}),this.items.map((function(n){return e("lbp-form-radio",{attrs:{vertical:!0,value:n.value,checked:"radio"===t.type?t.value===n.value:t.value.includes(n.value),aliasName:t.uuid,type:t.type},on:{change:t.onChange}},[n.value])}))])}},Un=Lt.f,qn={}.toString,Gn="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],Yn={f:function(t){return Gn&&"[object Window]"==qn.call(t)?function(t){try{return Un(t)}catch(wr){return Gn.slice()}}(t):Un(ut(t))}},Xn={f:Te},Zn=C.f,Kn=C.f,Qn=Te("toStringTag"),Jn=en.forEach,ti=q("hidden"),ei="Symbol",ni=Te("toPrimitive"),ii=et.set,ri=et.getterFor(ei),oi=Object.prototype,si=u.Symbol,ai=It("JSON","stringify"),li=Vt.f,ci=C.f,ui=Yn.f,hi=Ft.f,di=V("symbols"),fi=V("op-symbols"),pi=V("string-to-symbol-registry"),gi=V("symbol-to-string-registry"),mi=V("wks"),vi=u.QObject,bi=!vi||!vi.prototype||!vi.prototype.findChild,yi=s&&o((function(){return 7!=Mt(ci({},"a",{get:function(){return ci(this,"a",{value:7}).a}})).a}))?function(t,e,n){var i=li(oi,e);i&&delete oi[e],ci(t,e,n),i&&t!==oi&&ci(oi,e,i)}:ci,wi=function(t,e){var n=di[t]=Mt(si.prototype);return ii(n,{type:ei,tag:t,description:e}),s||(n.description=e),n},xi=Oe?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof si},Si=function(t,e,n){t===oi&&Si(fi,e,n),k(t);var i=E(e,!0);return k(n),_(di,i)?(n.enumerable?(_(t,ti)&&t[ti][i]&&(t[ti][i]=!1),n=Mt(n,{enumerable:j(0,!1)})):(_(t,ti)||ci(t,ti,j(1,{})),t[ti][i]=!0),yi(t,i,n)):ci(t,i,n)},ki=function(t,e){k(t);var n=ut(e),i=Et(n).concat(ji(n));return Jn(i,(function(e){s&&!Ei.call(n,e)||Si(t,e,n[e])})),t},Ei=function(t){var e=E(t,!0),n=hi.call(this,e);return!(this===oi&&_(di,e)&&!_(fi,e))&&(!(n||!_(this,e)||!_(di,e)||_(this,ti)&&this[ti][e])||n)},Oi=function(t,e){var n=ut(t),i=E(e,!0);if(n!==oi||!_(di,i)||_(fi,i)){var r=li(n,i);return!r||!_(di,i)||_(n,ti)&&n[ti][i]||(r.enumerable=!0),r}},Ci=function(t){var e=ui(ut(t)),n=[];return Jn(e,(function(t){_(di,t)||_(G,t)||n.push(t)})),n},ji=function(t){var e=t===oi,n=ui(e?fi:ut(t)),i=[];return Jn(n,(function(t){!_(di,t)||e&&!_(oi,t)||i.push(di[t])})),i};Ee||(nt((si=function(){if(this instanceof si)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=B(t),n=function(t){this===oi&&n.call(fi,t),_(this,ti)&&_(this[ti],e)&&(this[ti][e]=!1),yi(this,e,j(1,t))};return s&&bi&&yi(oi,e,{configurable:!0,set:n}),wi(e,t)}).prototype,"toString",(function(){return ri(this).tag})),nt(si,"withoutSetter",(function(t){return wi(B(t),t)})),Ft.f=Ei,C.f=Si,Vt.f=Oi,Lt.f=Yn.f=Ci,me.f=ji,Xn.f=function(t){return wi(Te(t),t)},s&&(ci(si.prototype,"description",{configurable:!0,get:function(){return ri(this).description}}),nt(oi,"propertyIsEnumerable",Ei,{unsafe:!0}))),we({global:!0,wrap:!0,forced:!Ee,sham:!Ee},{Symbol:si}),Jn(Et(mi),(function(t){!function(t){var e=Ct.Symbol||(Ct.Symbol={});_(e,t)||Zn(e,t,{value:Xn.f(t)})}(t)})),we({target:ei,stat:!0,forced:!Ee},{for:function(t){var e=String(t);if(_(pi,e))return pi[e];var n=si(e);return pi[e]=n,gi[n]=e,n},keyFor:function(t){if(!xi(t))throw TypeError(t+" is not a symbol");if(_(gi,t))return gi[t]},useSetter:function(){bi=!0},useSimple:function(){bi=!1}}),we({target:"Object",stat:!0,forced:!Ee,sham:!s},{create:function(t,e){return void 0===e?Mt(t):ki(Mt(t),e)},defineProperty:Si,defineProperties:ki,getOwnPropertyDescriptor:Oi}),we({target:"Object",stat:!0,forced:!Ee},{getOwnPropertyNames:Ci,getOwnPropertySymbols:ji}),we({target:"Object",stat:!0,forced:o((function(){me.f(1)}))},{getOwnPropertySymbols:function(t){return me.f(Se(t))}}),ai&&we({target:"JSON",stat:!0,forced:!Ee||o((function(){var t=si();return"[null]"!=ai([t])||"{}"!=ai({a:t})||"{}"!=ai(Object(t))}))},{stringify:function(t,e,n){for(var i,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(i=e,(b(e)||void 0!==t)&&!xi(t))return xe(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!xi(e))return e}),r[1]=e,ai.apply(null,r)}}),si.prototype[ni]||I(si.prototype,ni,si.prototype.valueOf),Hn=ei,(Vn=si)&&!_(Vn=Wn?Vn:Vn.prototype,Qn)&&Kn(Vn,Qn,{configurable:!0,value:Hn}),G[ti]=!0;var Ii=en.filter,Ti=ze("filter"),_i=an("filter");we({target:"Array",proto:!0,forced:!Ti||!_i},{filter:function(t){return Ii(this,t,arguments.length>1?arguments[1]:void 0)}});var Ai=Vt.f,Pi=o((function(){Ai(1)}));we({target:"Object",stat:!0,forced:!s||Pi,sham:!s},{getOwnPropertyDescriptor:function(t,e){return Ai(ut(t),e)}}),we({target:"Object",stat:!0,sham:!s},{getOwnPropertyDescriptors:function(t){for(var e,n,i=ut(t),r=Vt.f,o=ve(i),s={},a=0;o.length>a;)void 0!==(n=r(i,e=o[a++]))&&ke(s,e,n);return s}}),we({target:"Object",stat:!0,forced:o((function(){Et(1)}))},{keys:function(t){return Et(Se(t))}});var Di=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t};function Mi(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Ri(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mi(Object(n),!0).forEach((function(e){Di(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mi(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Li={name:"lbp-background",props:{imgSrc:he.string({label:"背景图"}),backgroundColor:he.color({label:"背景色",defaultValue:"rgba(255, 255, 255, 0.2)"}),waterMarkText:he.string({label:"水印文字",defaultValue:"水印文字"}),waterMarkFontSize:he.number({label:"水印文字大小(px)",defaultValue:16}),waterMarkRotate:he.number({label:"水印旋转角度",defaultValue:10}),waterMarkColor:he.color({label:"水印文字颜色",defaultValue:"rgba(184, 184, 184, 0.2)"})},methods:{renderWaterMark:function(){!function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.container,n=void 0===e?document.body:e,i=t.width,r=void 0===i?"100px":i,o=t.height,s=void 0===o?"100px":o,a=t.textAlign,l=void 0===a?"center":a,c=t.textBaseline,u=void 0===c?"middle":c,h=t.fontSize,d=void 0===h?16:h,f=t.fillStyle,p=void 0===f?"rgba(184, 184, 184, 0.2 )":f,g=t.content,m=void 0===g?"水印文字":g,v=t.rotate,b=void 0===v?0:v,y=t.zIndex,w=void 0===y?1e3:y,x=document.createElement("canvas");x.setAttribute("width",r),x.setAttribute("height",s);var S=x.getContext("2d");S.textAlign=l,S.textBaseline=u,S.font="".concat(d,"px Arial"),S.fillStyle=p,S.fillText(m,0,parseFloat(s)/3);var k=x.toDataURL(),E=document.querySelector(".luban_h5__wm"),O=E||document.createElement("div"),C="\n    transform: rotate(".concat(b,"deg);\n    position:absolute;\n    top:0;\n    left:0;\n    width:100%;\n    height:100%;\n    z-index:").concat(w,";\n    pointer-events:none;\n    background-repeat:repeat;\n    background-image:url('").concat(k,"');\n    user-select: none");O.setAttribute("style",C),E||(O.classList.add("luban_h5__wm"),n.style.position="relative",n.insertBefore(O,n.firstChild))}({container:this.$refs.root,content:this.waterMarkText,fontSize:this.waterMarkFontSize,rotate:this.waterMarkRotate,fillStyle:this.waterMarkColor})}},render:function(){var t=arguments[0],e={width:"100%",height:"100%"};return t("div",{style:"width: 100%; height: 100%; overflow: hidden; position: absolute; z-index: 0; opacity: 1;",ref:"root"},[t("div",{style:e=this.imgSrc?Ri(Ri({},e),{},{"background-size":"cover","background-position":"50% 50%","background-origin":"content-box","background-image":"url(".concat(this.imgSrc,")")}):Ri({backgroundColor:this.backgroundColor},e)})])},mounted:function(){var t=this;this.renderWaterMark(),["waterMarkText","waterMarkFontSize","waterMarkRotate","waterMarkColor"].forEach((function(e){t.$watch(e,t.renderWaterMark)}))}},Ni={name:"lbp-slide",props:{interval:he.number({defaultValue:4e3,label:"间隔时间"}),editorMode:he.string({defaultValue:"preview",label:"模式"}),activeIndex:{type:Number,default:0,editor:{custom:!0}},items:{type:Array,default:function(){return[{image:"https://img.yzcdn.cn/vant/apple-1.jpg"},{image:"https://img.yzcdn.cn/vant/apple-2.jpg"}]},editor:{custom:!0}}},componentsForPropsEditor:{},mounted:function(){},methods:{},render:function(){var t=arguments[0],e=this.items,n=this.activeIndex;return"edit"===this.editorMode?e.length&&t("img",{attrs:{src:e[n].image}}):t(i.Swipe,{attrs:{autoplay:+this.interval,"indicator-color":"red"}},[e.map((function(e){return t(i.SwipeItem,[t("img",{attrs:{src:e.image,width:"100%",height:"100%"}})])}))])}},zi={name:"lbp-bg-music",props:{disabled:he.boolean({defaultValue:!0,label:"disabled"}),autoplay:he.boolean({defaultValue:!0,label:"自动播放"}),src:he.string({label:"音乐URL",defaultValue:"http://go.163.com/2018/0209/mengniu/audio/bgm.mp3",props:{type:"textarea"}})},data:function(){return{isPlaying:!0}},methods:{toggle:function(){var t=this.$refs.bgAudio;t&&(this.isPlaying?t.pause():t.play(),this.isPlaying=!this.isPlaying)}},render:function(){var t=arguments[0],e={"animation-play-state":this.isPlaying?"running":"paused"};return t("div",{class:"bg-music-wrapper",style:"display: block;"},[t("div",{class:"bg-music-btn rotate",style:e,on:{click:this.toggle},attrs:{disabled:this.disabled}},[t("audio",{attrs:{src:this.src,autoplay:this.autoplay,preload:!0,loop:!0},ref:"bgAudio"})])])},created:function(){this.isPlaying=this.autoplay}},Fi={name:"lbp-notice-bar",props:{width:{default:120},height:{default:120},text:he.string({defaultValue:"请填写内容，如果过长，将会在手机上滚动显示",label:"公告",props:{type:"textarea"}}),vertical:he.boolean(),backgroundColor:he.color({label:"背景色",defaultValue:"#fffbe8"}),color:he.color({defaultValue:"#ed6a0c"}),mode:{type:String,default:"",editor:{type:"a-select",label:"模式",props:{options:[{label:"默认",value:""},{label:"右侧有箭头",value:"link"},{label:"可关闭",value:"closeable"}]}}}},componentsForPropsEditor:{},mounted:function(){},methods:{},render:function(){var t=arguments[0];return t(i.NoticeBar,{attrs:{mode:this.mode,color:this.color,"left-icon":"volume-o",text:this.text,background:this.backgroundColor}})}},$i={name:"lbp-rate",props:{value:he.number({defaultValue:5,label:"当前分值"}),count:he.number({defaultValue:5,label:"图标总数"}),size:he.number({defaultValue:16,label:"图标大小"}),gutter:he.number({defaultValue:16,label:"图标间距"}),mode:{type:String,default:"",editor:{type:"a-select",label:"模式",props:{options:[{label:"star",value:"star"},{label:"点赞",value:"like"},{label:"Good",value:"good-job"}]}}}},componentsForPropsEditor:{},mounted:function(){},methods:{},render:function(){var t=arguments[0];return t(i.Rate,{attrs:{value:this.value,count:this.count,size:this.size,color:this.color,gutter:this.gutter,"void-icon":"star","void-color":"#eee"}})}},Vi=function(t){return function(e,n,i,r){Qe(n);var o=Se(e),s=lt(o),a=gt(o.length),l=t?a-1:0,c=t?-1:1;if(i<2)for(;;){if(l in s){r=s[l],l+=c;break}if(l+=c,t?l<0:a<=l)throw TypeError("Reduce of empty array with no initial value")}for(;t?l>=0:a>l;l+=c)l in s&&(r=n(r,s[l],l,o));return r}},Hi={left:Vi(!1),right:Vi(!0)},Wi="process"==rt(u.process),Bi=Hi.left,Ui=nn("reduce"),qi=an("reduce",{1:0});we({target:"Array",proto:!0,forced:!Ui||!qi||!Wi&&Le>79&&Le<83},{reduce:function(t){return Bi(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var Gi=ze("slice"),Yi=an("slice",{ACCESSORS:!0,0:0,1:2}),Xi=Te("species"),Zi=[].slice,Ki=Math.max;we({target:"Array",proto:!0,forced:!Gi||!Yi},{slice:function(t,e){var n,i,r,o=ut(this),s=gt(o.length),a=bt(t,s),l=bt(void 0===e?s:e,s);if(xe(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!xe(n.prototype)?b(n)&&null===(n=n[Xi])&&(n=void 0):n=void 0,n===Array||void 0===n))return Zi.call(o,a,l);for(i=new(void 0===n?Array:n)(Ki(l-a,0)),r=0;a<l;a++,r++)a in o&&ke(i,r,o[a]);return i.length=r,i}});var Qi=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i},Ji=function(t){if(Array.isArray(t))return Qi(t)},tr=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)},er=function(t,e){if(t){if("string"==typeof t)return Qi(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qi(t,e):void 0}},nr=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},ir=function(t){return Ji(t)||tr(t)||er(t)||nr()},rr={name:"lbp-table",data:function(){return{mainTableWrapperEle:null,mainTableEle:null,fixedTableWrapperEle:null,fixedTableEle:null}},props:{width:{default:120},height:{default:120},theme:he.string({defaultValue:"",label:"主题",visible:!1}),columnWidth:he.number({label:"每列宽度(px)",defaultValue:100}),freezeCount:he.number({label:"冻结列数(px)",defaultValue:0}),dataset:he.excel({defaultValue:function(){return[["列A","列B","列C"],["————","————","————"],["————","————","————"],["————","————","————"]]}})},watch:{freezeCount:function(){var t=this;setTimeout((function(){t.setFixedTableStyle()}),100)}},render:function(){var t=this,e=arguments[0],n=function(t){return e("td",[e("div",{class:"cell"},[t])])},i=function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i.length?i[0]:[],a=s.length;return e("table",{class:r,style:o},[e("colgroup",[ir(Array(a)).map((function(n,i){return e("col",{style:{width:t.columnWidth+"px"}})}))]),e("tbody",[i.map((function(t){return e("tr",[t.map(n)])}))])])};return e("div",{class:["lbp-table",this.theme],ref:"lbpTable"},[e("div",{class:"main-table-wrapper"},[i(this.dataset)]),e("div",{class:"fixed-table-wrapper",directives:[{name:"show",value:"freezeCount"}]},[i(this.dataset,"left-table")])])},methods:{getFixedColsWidth:function(){return function(){var t=arguments.length>1?arguments[1]:void 0;return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map((function(e){return e[t]})).reduce((function(t,e){return t+e}),0)}([].slice.apply(this.mainTableEle.querySelectorAll("tr:first-child > td")).slice(0,+this.freezeCount),"offsetWidth")},setFixedTableStyle:function(){this.fixedTableWrapperEle.style.width="".concat(this.getFixedColsWidth(),"px"),this.fixedTableWrapperEle.style.height="calc(100% - ".concat(this.mainTableWrapperEle.offsetHeight-this.mainTableWrapperEle.scrollHeight,"px)")},setTableWidth:function(){var t=this.$el.parentNode.style.width;this.fixedTableEle.style.width=this.mainTableEle.style.width=t},initElements:function(){var t=this.$el;this.mainTableWrapperEle=t.querySelector(".main-table-wrapper"),this.mainTableEle=t.querySelector(".main-table-wrapper > table"),this.fixedTableWrapperEle=t.querySelector(".fixed-table-wrapper"),this.fixedTableEle=t.querySelector(".left-table")},__resizeHandler:function(){this.setTableWidth(),this.freezeCount&&this.setFixedTableStyle()}},mounted:function(){this.initElements(),this.setTableWidth(),this.setFixedTableStyle(),r.addListener(this.$refs.lbpTable,this.__resizeHandler)},destroy:function(){r.removeListener(this.$el,this.__resizeHandler)}},or=Ft.f,sr=function(t){return function(e){for(var n,i=ut(e),r=Et(i),o=r.length,a=0,l=[];o>a;)n=r[a++],s&&!or.call(i,n)||l.push(t?[n,i[n]]:i[n]);return l}},ar={entries:sr(!0),values:sr(!1)}.values;we({target:"Object",stat:!0},{values:function(t){return ar(t)}});var lr,cr=Gt.trim;we({target:"String",proto:!0,forced:(lr="trim",o((function(){return!!Ht[lr]()||"​᠎"!="​᠎"[lr]()||Ht[lr].name!==lr})))},{trim:function(){return cr(this)}});var ur=function(t){if(Array.isArray(t))return t},hr=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(c){r=!0,o=c}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}},dr=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},fr=function(t,e){return ur(t)||hr(t,e)||er(t,e)||dr()},pr=l((function(t){function e(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(n)}t.exports=e})),gr=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function mr(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var vr=function(t,e,n){return e&&mr(t.prototype,e),n&&mr(t,n),t},br=function(){function t(){gr(this,t)}return vr(t,null,[{key:"dataset2excel",value:function(t){return t.map((function(t){return{cells:{0:{text:t.x},1:{text:t.y},2:{text:t.s}}}}))}},{key:"binaryMatrix2excel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=t.map((function(t,e){var n={};return t.forEach((function(t,e){n[e]={text:t}})),{cells:n}}));return e}},{key:"excel2chartDataSet",value:function(t){return Object.values(t.rows).filter((function(t){return"object"===pr(t)})).map((function(t){var e=Object.values(t.cells).map((function(t){return t.text})),n=fr(e,3);return{x:n[0],y:n[1],s:n[2]}}))}},{key:"excel2BinaryMatrix",value:function(t){return Object.values(t.rows).filter((function(t){return"object"===pr(t)})).map((function(t){return Object.values(t.cells).map((function(t){return t.text}))}))}},{key:"csv2VChartJson",value:function(t){var e=t[0],n=t.slice(1);return{columns:e,rows:n.map((function(t,n){var i={};return e.forEach((function(e,n){i[e.trim()]=t[n]})),i}))}}}]),t}(),yr={name:"lbp-news-list",props:{width:{default:120},height:{default:120},dataset:he.excel({defaultValue:function(){return[["新闻标题","摘要","链接","日期","来源"],["1 . 鲁班H5 可视化搭建平台！","鲁班H5-是一款基于常见业务组件，通过拖拽的形式，生成页面的可视化搭建系统；我们的初心也是希望能通过工程化的手段，提高简单H5页面的制作效率","https://luban-h5.com/","2020-01-01","鲁班H5"],["2 . 鲁班H5-开源的可视化搭建平台！","en: web design tool || mobile page builder/editor || mini webflow for mobile page. zh: 类似易企秀的H5制作、建站工具、可视化搭建系统.","https://github.com/ly525/luban-h5","2020-01-01","鲁班H5(github)"]]}})},data:function(){return{option:{}}},render:function(){var t=arguments[0],e=br.csv2VChartJson(this.dataset),n=e.rows;return t("div",{class:"newslist",style:"border-color: transparent;"},[n.map((function(e,n){return t("div",{class:"news-item"},[t("a",{attrs:{href:e["链接"],target:"_blank"},class:"link"},[t("div",{class:"title"},[e["新闻标题"]])]),t("div",{class:"content"},[e["摘要"]]),t("div",{class:"source"},[e["来源"]]),t("div",{class:"time"},[e["日期"]])])}))])},mounted:function(){}};e.LbpBackground=Li,e.LbpBgMusic=zi,e.LbpButton=de,e.LbpFormButton=gn,e.LbpFormCheckboxGroup=Bn,e.LbpFormInput=Ke,e.LbpFormRadioGroup=Mn,e.LbpNewsList=yr,e.LbpNoticeBar=Fi,e.LbpPicture=fe,e.LbpRate=$i,e.LbpSlide=Ni,e.LbpTable=rr,e.LbpText=Ue,e.LbpVideo=ge,e.PropTypes=he,Object.defineProperty(e,"__esModule",{value:!0})}))}).call(this,n("c8ba"))},"7dc1":function(t,e,n){"use strict";t.exports=n("7a9e")},ac22:function(t,e,n){(function(t){!function(t,i){i(e,n("7dc1"),n("e0c0"),n("e832"),n("2726"),n("dca1"),n("f93f"))}(0,(function(e,n,i,r,o,s,a){"use strict";function l(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var c=l(r),u=l(o),h=l(a),d=function(t){try{return!!t()}catch(n){return!0}},f=!d((function(){return 7!=Object.defineProperty({},1,{get:function(){return 7}})[1]})),p="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof t?t:"undefined"!=typeof self?self:{};function g(t){var e={exports:{}};return t(e,e.exports),e.exports}var m=function(t){return t&&t.Math==Math&&t},v=m("object"==typeof globalThis&&globalThis)||m("object"==typeof window&&window)||m("object"==typeof self&&self)||m("object"==typeof p&&p)||function(){return this}()||Function("return this")(),b=function(t){return"object"==typeof t?null!==t:"function"==typeof t},y=v.document,w=b(y)&&b(y.createElement),x=function(t){return w?y.createElement(t):{}},S=!f&&!d((function(){return 7!=Object.defineProperty(x("div"),"a",{get:function(){return 7}}).a})),k=function(t){if(!b(t))throw TypeError(String(t)+" is not an object");return t},E=function(t,e){if(!b(t))return t;var n,i;if(e&&"function"==typeof(n=t.toString)&&!b(i=n.call(t)))return i;if("function"==typeof(n=t.valueOf)&&!b(i=n.call(t)))return i;if(!e&&"function"==typeof(n=t.toString)&&!b(i=n.call(t)))return i;throw TypeError("Can't convert object to primitive value")},O=Object.defineProperty,C={f:f?O:function(t,e,n){if(k(t),e=E(e,!0),k(n),S)try{return O(t,e,n)}catch(r){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},j=C.f,I=Function.prototype,T=I.toString,_=/^\s*function ([^ (]*)/,A="name";f&&!(A in I)&&j(I,A,{configurable:!0,get:function(){try{return T.call(this).match(_)[1]}catch(e){return""}}});var P={}.propertyIsEnumerable,D=Object.getOwnPropertyDescriptor,M={f:D&&!P.call({1:2},1)?function(t){var e=D(this,t);return!!e&&e.enumerable}:P},R=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},L={}.toString,N=function(t){return L.call(t).slice(8,-1)},z="".split,F=d((function(){return!Object("z").propertyIsEnumerable(0)}))?function(t){return"String"==N(t)?z.call(t,""):Object(t)}:Object,$=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},V=function(t){return F($(t))},H={}.hasOwnProperty,W=function(t,e){return H.call(t,e)},B=Object.getOwnPropertyDescriptor,U={f:f?B:function(t,e){if(t=V(t),e=E(e,!0),S)try{return B(t,e)}catch(i){}if(W(t,e))return R(!M.f.call(t,e),t[e])}},q=f?function(t,e,n){return C.f(t,e,R(1,n))}:function(t,e,n){return t[e]=n,t},G=function(t,e){try{q(v,t,e)}catch(i){v[t]=e}return e},Y="__core-js_shared__",X=v[Y]||G(Y,{}),Z=Function.toString;"function"!=typeof X.inspectSource&&(X.inspectSource=function(t){return Z.call(t)});var K,Q,J,tt=X.inspectSource,et=v.WeakMap,nt="function"==typeof et&&/native code/.test(tt(et)),it=g((function(t){(t.exports=function(t,e){return X[t]||(X[t]=void 0!==e?e:{})})("versions",[]).push({version:"3.7.0",mode:"global",copyright:"© 2020 Denis Pushkarev (zloirock.ru)"})})),rt=0,ot=Math.random(),st=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++rt+ot).toString(36)},at=it("keys"),lt=function(t){return at[t]||(at[t]=st(t))},ct={},ut=v.WeakMap;if(nt){var ht=X.state||(X.state=new ut),dt=ht.get,ft=ht.has,pt=ht.set;K=function(t,e){return e.facade=t,pt.call(ht,t,e),e},Q=function(t){return dt.call(ht,t)||{}},J=function(t){return ft.call(ht,t)}}else{var gt=lt("state");ct[gt]=!0,K=function(t,e){return e.facade=t,q(t,gt,e),e},Q=function(t){return W(t,gt)?t[gt]:{}},J=function(t){return W(t,gt)}}var mt={set:K,get:Q,has:J,enforce:function(t){return J(t)?Q(t):K(t,{})},getterFor:function(t){return function(e){var n;if(!b(e)||(n=Q(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},vt=g((function(t){var e=mt.get,n=mt.enforce,i=String(String).split("String");(t.exports=function(t,e,r,o){var s,a=!!o&&!!o.unsafe,l=!!o&&!!o.enumerable,c=!!o&&!!o.noTargetGet;"function"==typeof r&&("string"!=typeof e||W(r,"name")||q(r,"name",e),(s=n(r)).source||(s.source=i.join("string"==typeof e?e:""))),t!==v?(a?!c&&t[e]&&(l=!0):delete t[e],l?t[e]=r:q(t,e,r)):l?t[e]=r:G(e,r)})(Function.prototype,"toString",(function(){return"function"==typeof this&&e(this).source||tt(this)}))})),bt=v,yt=function(t){return"function"==typeof t?t:void 0},wt=function(t,e){return arguments.length<2?yt(bt[t])||yt(v[t]):bt[t]&&bt[t][e]||v[t]&&v[t][e]},xt=Math.ceil,St=Math.floor,kt=function(t){return isNaN(t=+t)?0:(t>0?St:xt)(t)},Et=Math.min,Ot=function(t){return t>0?Et(kt(t),9007199254740991):0},Ct=Math.max,jt=Math.min,It=function(t,e){var n=kt(t);return n<0?Ct(n+e,0):jt(n,e)},Tt=function(t){return function(e,n,i){var r,o=V(e),s=Ot(o.length),a=It(i,s);if(t&&n!=n){for(;s>a;)if((r=o[a++])!=r)return!0}else for(;s>a;a++)if((t||a in o)&&o[a]===n)return t||a||0;return!t&&-1}},_t={includes:Tt(!0),indexOf:Tt(!1)},At=_t.indexOf,Pt=function(t,e){var n,i=V(t),r=0,o=[];for(n in i)!W(ct,n)&&W(i,n)&&o.push(n);for(;e.length>r;)W(i,n=e[r++])&&(~At(o,n)||o.push(n));return o},Dt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],Mt=Dt.concat("length","prototype"),Rt={f:Object.getOwnPropertyNames||function(t){return Pt(t,Mt)}},Lt={f:Object.getOwnPropertySymbols},Nt=wt("Reflect","ownKeys")||function(t){var e=Rt.f(k(t)),n=Lt.f;return n?e.concat(n(t)):e},zt=function(t,e){for(var n=Nt(e),i=C.f,r=U.f,o=0;o<n.length;o++){var s=n[o];W(t,s)||i(t,s,r(e,s))}},Ft=/#|\.prototype\./,$t=function(t,e){var n=Ht[Vt(t)];return n==Bt||n!=Wt&&("function"==typeof e?d(e):!!e)},Vt=$t.normalize=function(t){return String(t).replace(Ft,".").toLowerCase()},Ht=$t.data={},Wt=$t.NATIVE="N",Bt=$t.POLYFILL="P",Ut=$t,qt=U.f,Gt=function(t,e){var n,i,r,o,s,a=t.target,l=t.global,c=t.stat;if(n=l?v:c?v[a]||G(a,{}):(v[a]||{}).prototype)for(i in e){if(o=e[i],r=t.noTargetGet?(s=qt(n,i))&&s.value:n[i],!Ut(l?i:a+(c?".":"#")+i,t.forced)&&void 0!==r){if(typeof o==typeof r)continue;zt(o,r)}(t.sham||r&&r.sham)&&q(o,"sham",!0),vt(n,i,o,t)}},Yt=function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function");return t},Xt=function(t,e,n){if(Yt(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}},Zt=function(t){return Object($(t))},Kt=Array.isArray||function(t){return"Array"==N(t)},Qt=!!Object.getOwnPropertySymbols&&!d((function(){return!String(Symbol())})),Jt=Qt&&!Symbol.sham&&"symbol"==typeof Symbol.iterator,te=it("wks"),ee=v.Symbol,ne=Jt?ee:ee&&ee.withoutSetter||st,ie=function(t){return W(te,t)||(Qt&&W(ee,t)?te[t]=ee[t]:te[t]=ne("Symbol."+t)),te[t]},re=ie("species"),oe=function(t,e){var n;return Kt(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!Kt(n.prototype)?b(n)&&null===(n=n[re])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},se=[].push,ae=function(t){var e=1==t,n=2==t,i=3==t,r=4==t,o=6==t,s=5==t||o;return function(a,l,c,u){for(var h,d,f=Zt(a),p=F(f),g=Xt(l,c,3),m=Ot(p.length),v=0,b=u||oe,y=e?b(a,m):n?b(a,0):void 0;m>v;v++)if((s||v in p)&&(d=g(h=p[v],v,f),t))if(e)y[v]=d;else if(d)switch(t){case 3:return!0;case 5:return h;case 6:return v;case 2:se.call(y,h)}else if(r)return!1;return o?-1:i||r?r:y}},le={forEach:ae(0),map:ae(1),filter:ae(2),some:ae(3),every:ae(4),find:ae(5),findIndex:ae(6)},ce=function(t,e){var n=[][t];return!!n&&d((function(){n.call(null,e||function(){throw 1},1)}))},ue=Object.defineProperty,he={},de=function(t){throw t},fe=function(t,e){if(W(he,t))return he[t];e||(e={});var n=[][t],i=!!W(e,"ACCESSORS")&&e.ACCESSORS,r=W(e,0)?e[0]:de,o=W(e,1)?e[1]:void 0;return he[t]=!!n&&!d((function(){if(i&&!f)return!0;var t={length:-1};i?ue(t,1,{enumerable:!0,get:de}):t[1]=1,n.call(t,r,o)}))},pe=le.forEach,ge=ce("forEach"),me=fe("forEach"),ve=ge&&me?[].forEach:function(t){return pe(this,t,arguments.length>1?arguments[1]:void 0)};for(var be in Gt({target:"Array",proto:!0,forced:[].forEach!=ve},{forEach:ve}),{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var ye=v[be],we=ye&&ye.prototype;if(we&&we.forEach!==ve)try{q(we,"forEach",ve)}catch(iv){we.forEach=ve}}var xe=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")};function Se(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var ke,Ee,Oe=function(t,e,n){return e&&Se(t.prototype,e),n&&Se(t,n),t},Ce=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.name,i=e.title,r=e.icon,o=e.visible,s=e.component;xe(this,t),n&&(this.name=n||s.name,this.title=i,this.icon=r,this.visible=o,this.component=s)}return Oe(t,[{key:"getName",value:function(){return this.name}}]),t}(),je=new(function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],i=n.plugins,r=void 0===i?[]:i;xe(this,t),this._plugins=[],this._pluginsMap={},r.forEach((function(t){return e.registerPlugin(t)}))}return Oe(t,[{key:"register",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=new Ce(t);e&&(this._plugins.push(e),this._pluginsMap[e.getName()]=e)}},{key:"getPlugins",value:function(){return this._plugins}},{key:"getPluginsMap",value:function(){return this._pluginsMap}},{key:"getPlugin",value:function(t){return this.getPluginsMap()[t]}}]),t}()),Ie=wt("navigator","userAgent")||"",Te=v.process,_e=Te&&Te.versions,Ae=_e&&_e.v8;Ae?Ee=(ke=Ae.split("."))[0]+ke[1]:Ie&&(!(ke=Ie.match(/Edge\/(\d+)/))||ke[1]>=74)&&(ke=Ie.match(/Chrome\/(\d+)/))&&(Ee=ke[1]);var Pe=Ee&&+Ee,De=ie("species"),Me=function(t){return Pe>=51||!d((function(){var e=[];return(e.constructor={})[De]=function(){return{foo:1}},1!==e[t](Boolean).foo}))},Re=le.map,Le=Me("map"),Ne=fe("map");Gt({target:"Array",proto:!0,forced:!Le||!Ne},{map:function(t){return Re(this,t,arguments.length>1?arguments[1]:void 0)}});var ze=Object.keys||function(t){return Pt(t,Dt)},Fe=Object.assign,$e=Object.defineProperty,Ve=!Fe||d((function(){if(f&&1!==Fe({b:1},Fe($e({},"a",{enumerable:!0,get:function(){$e(this,"b",{value:3,enumerable:!1})}}),{b:2})).b)return!0;var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach((function(t){e[t]=t})),7!=Fe({},t)[n]||ze(Fe({},e)).join("")!=i}))?function(t,e){for(var n=Zt(t),i=arguments.length,r=1,o=Lt.f,s=M.f;i>r;)for(var a,l=F(arguments[r++]),c=o?ze(l).concat(o(l)):ze(l),u=c.length,h=0;u>h;)a=c[h++],f&&!s.call(l,a)||(n[a]=l[a]);return n}:Fe;Gt({target:"Object",stat:!0,forced:Object.assign!==Ve},{assign:Ve});var He,We=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},Be="object"==typeof p&&p&&p.Object===Object&&p,Ue="object"==typeof self&&self&&self.Object===Object&&self,qe=Be||Ue||Function("return this")(),Ge=function(){return qe.Date.now()},Ye=qe.Symbol,Xe=Object.prototype,Ze=Xe.hasOwnProperty,Ke=Xe.toString,Qe=Ye?Ye.toStringTag:void 0,Je=function(t){var e=Ze.call(t,Qe),n=t[Qe];try{t[Qe]=void 0;var i=!0}catch(s){}var r=Ke.call(t);return i&&(e?t[Qe]=n:delete t[Qe]),r},tn=Object.prototype.toString,en=function(t){return tn.call(t)},nn=Ye?Ye.toStringTag:void 0,rn=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":nn&&nn in Object(t)?Je(t):en(t)},on=function(t){return null!=t&&"object"==typeof t},sn=function(t){return"symbol"==typeof t||on(t)&&"[object Symbol]"==rn(t)},an=/^\s+|\s+$/g,ln=/^[-+]0x[0-9a-f]+$/i,cn=/^0b[01]+$/i,un=/^0o[0-7]+$/i,hn=parseInt,dn=function(t){if("number"==typeof t)return t;if(sn(t))return NaN;if(We(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=We(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(an,"");var n=cn.test(t);return n||un.test(t)?hn(t.slice(2),n?2:8):ln.test(t)?NaN:+t},fn=Math.max,pn=Math.min,gn=function(t,e,n){var i,r,o,s,a,l,c=0,u=!1,h=!1,d=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function f(e){var n=i,o=r;return i=r=void 0,c=e,s=t.apply(o,n)}function p(t){return c=t,a=setTimeout(m,e),u?f(t):s}function g(t){var n=t-l;return void 0===l||n>=e||n<0||h&&t-c>=o}function m(){var t=Ge();if(g(t))return v(t);a=setTimeout(m,function(t){var n=e-(t-l);return h?pn(n,o-(t-c)):n}(t))}function v(t){return a=void 0,d&&i?f(t):(i=r=void 0,s)}function b(){var t=Ge(),n=g(t);if(i=arguments,r=this,l=t,n){if(void 0===a)return p(l);if(h)return clearTimeout(a),a=setTimeout(m,e),f(l)}return void 0===a&&(a=setTimeout(m,e)),s}return e=dn(e)||0,We(n)&&(u=!!n.leading,o=(h="maxWait"in n)?fn(dn(n.maxWait)||0,e):o,d="trailing"in n?!!n.trailing:d),b.cancel=function(){void 0!==a&&clearTimeout(a),c=0,i=l=r=a=void 0},b.flush=function(){return void 0===a?s:v(Ge())},b},mn=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},vn=f?Object.defineProperties:function(t,e){k(t);for(var n,i=ze(e),r=i.length,o=0;r>o;)C.f(t,n=i[o++],e[n]);return t},bn=wt("document","documentElement"),yn=lt("IE_PROTO"),wn=function(){},xn=function(t){return"<script>"+t+"<\/script>"},Sn=function(){try{He=document.domain&&new ActiveXObject("htmlfile")}catch(iv){}var t,e;Sn=He?function(t){t.write(xn("")),t.close();var e=t.parentWindow.Object;return t=null,e}(He):((e=x("iframe")).style.display="none",bn.appendChild(e),e.src=String("javascript:"),(t=e.contentWindow.document).open(),t.write(xn("document.F=Object")),t.close(),t.F);for(var n=Dt.length;n--;)delete Sn.prototype[Dt[n]];return Sn()};ct[yn]=!0;var kn=Object.create||function(t,e){var n;return null!==t?(wn.prototype=k(t),n=new wn,wn.prototype=null,n[yn]=t):n=Sn(),void 0===e?n:vn(n,e)},En=Rt.f,On={}.toString,Cn="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],jn={f:function(t){return Cn&&"[object Window]"==On.call(t)?function(t){try{return En(t)}catch(iv){return Cn.slice()}}(t):En(V(t))}},In={f:ie},Tn=C.f,_n=C.f,An=ie("toStringTag"),Pn=function(t,e,n){t&&!W(t=n?t:t.prototype,An)&&_n(t,An,{configurable:!0,value:e})},Dn=le.forEach,Mn=lt("hidden"),Rn="Symbol",Ln=ie("toPrimitive"),Nn=mt.set,zn=mt.getterFor(Rn),Fn=Object.prototype,$n=v.Symbol,Vn=wt("JSON","stringify"),Hn=U.f,Wn=C.f,Bn=jn.f,Un=M.f,qn=it("symbols"),Gn=it("op-symbols"),Yn=it("string-to-symbol-registry"),Xn=it("symbol-to-string-registry"),Zn=it("wks"),Kn=v.QObject,Qn=!Kn||!Kn.prototype||!Kn.prototype.findChild,Jn=f&&d((function(){return 7!=kn(Wn({},"a",{get:function(){return Wn(this,"a",{value:7}).a}})).a}))?function(t,e,n){var i=Hn(Fn,e);i&&delete Fn[e],Wn(t,e,n),i&&t!==Fn&&Wn(Fn,e,i)}:Wn,ti=function(t,e){var n=qn[t]=kn($n.prototype);return Nn(n,{type:Rn,tag:t,description:e}),f||(n.description=e),n},ei=Jt?function(t){return"symbol"==typeof t}:function(t){return Object(t)instanceof $n},ni=function(t,e,n){t===Fn&&ni(Gn,e,n),k(t);var i=E(e,!0);return k(n),W(qn,i)?(n.enumerable?(W(t,Mn)&&t[Mn][i]&&(t[Mn][i]=!1),n=kn(n,{enumerable:R(0,!1)})):(W(t,Mn)||Wn(t,Mn,R(1,{})),t[Mn][i]=!0),Jn(t,i,n)):Wn(t,i,n)},ii=function(t,e){k(t);var n=V(e),i=ze(n).concat(ai(n));return Dn(i,(function(e){f&&!ri.call(n,e)||ni(t,e,n[e])})),t},ri=function(t){var e=E(t,!0),n=Un.call(this,e);return!(this===Fn&&W(qn,e)&&!W(Gn,e))&&(!(n||!W(this,e)||!W(qn,e)||W(this,Mn)&&this[Mn][e])||n)},oi=function(t,e){var n=V(t),i=E(e,!0);if(n!==Fn||!W(qn,i)||W(Gn,i)){var r=Hn(n,i);return!r||!W(qn,i)||W(n,Mn)&&n[Mn][i]||(r.enumerable=!0),r}},si=function(t){var e=Bn(V(t)),n=[];return Dn(e,(function(t){W(qn,t)||W(ct,t)||n.push(t)})),n},ai=function(t){var e=t===Fn,n=Bn(e?Gn:V(t)),i=[];return Dn(n,(function(t){!W(qn,t)||e&&!W(Fn,t)||i.push(qn[t])})),i};if(Qt||(vt(($n=function(){if(this instanceof $n)throw TypeError("Symbol is not a constructor");var t=arguments.length&&void 0!==arguments[0]?String(arguments[0]):void 0,e=st(t),n=function(t){this===Fn&&n.call(Gn,t),W(this,Mn)&&W(this[Mn],e)&&(this[Mn][e]=!1),Jn(this,e,R(1,t))};return f&&Qn&&Jn(Fn,e,{configurable:!0,set:n}),ti(e,t)}).prototype,"toString",(function(){return zn(this).tag})),vt($n,"withoutSetter",(function(t){return ti(st(t),t)})),M.f=ri,C.f=ni,U.f=oi,Rt.f=jn.f=si,Lt.f=ai,In.f=function(t){return ti(ie(t),t)},f&&(Wn($n.prototype,"description",{configurable:!0,get:function(){return zn(this).description}}),vt(Fn,"propertyIsEnumerable",ri,{unsafe:!0}))),Gt({global:!0,wrap:!0,forced:!Qt,sham:!Qt},{Symbol:$n}),Dn(ze(Zn),(function(t){!function(t){var e=bt.Symbol||(bt.Symbol={});W(e,t)||Tn(e,t,{value:In.f(t)})}(t)})),Gt({target:Rn,stat:!0,forced:!Qt},{for:function(t){var e=String(t);if(W(Yn,e))return Yn[e];var n=$n(e);return Yn[e]=n,Xn[n]=e,n},keyFor:function(t){if(!ei(t))throw TypeError(t+" is not a symbol");if(W(Xn,t))return Xn[t]},useSetter:function(){Qn=!0},useSimple:function(){Qn=!1}}),Gt({target:"Object",stat:!0,forced:!Qt,sham:!f},{create:function(t,e){return void 0===e?kn(t):ii(kn(t),e)},defineProperty:ni,defineProperties:ii,getOwnPropertyDescriptor:oi}),Gt({target:"Object",stat:!0,forced:!Qt},{getOwnPropertyNames:si,getOwnPropertySymbols:ai}),Gt({target:"Object",stat:!0,forced:d((function(){Lt.f(1)}))},{getOwnPropertySymbols:function(t){return Lt.f(Zt(t))}}),Vn){var li=!Qt||d((function(){var t=$n();return"[null]"!=Vn([t])||"{}"!=Vn({a:t})||"{}"!=Vn(Object(t))}));Gt({target:"JSON",stat:!0,forced:li},{stringify:function(t,e,n){for(var i,r=[t],o=1;arguments.length>o;)r.push(arguments[o++]);if(i=e,(b(e)||void 0!==t)&&!ei(t))return Kt(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!ei(e))return e}),r[1]=e,Vn.apply(null,r)}})}$n.prototype[Ln]||q($n.prototype,Ln,$n.prototype.valueOf),Pn($n,Rn),ct[Mn]=!0;var ci=le.filter,ui=Me("filter"),hi=fe("filter");Gt({target:"Array",proto:!0,forced:!ui||!hi},{filter:function(t){return ci(this,t,arguments.length>1?arguments[1]:void 0)}});var di=ie("unscopables"),fi=Array.prototype;null==fi[di]&&C.f(fi,di,{configurable:!0,value:kn(null)});var pi=function(t){fi[di][t]=!0},gi=_t.includes,mi=fe("indexOf",{ACCESSORS:!0,1:0});Gt({target:"Array",proto:!0,forced:!mi},{includes:function(t){return gi(this,t,arguments.length>1?arguments[1]:void 0)}}),pi("includes");var vi=U.f,bi=d((function(){vi(1)}));Gt({target:"Object",stat:!0,forced:!f||bi,sham:!f},{getOwnPropertyDescriptor:function(t,e){return vi(V(t),e)}});var yi=function(t,e,n){var i=E(e);i in t?C.f(t,i,R(0,n)):t[i]=n};Gt({target:"Object",stat:!0,sham:!f},{getOwnPropertyDescriptors:function(t){for(var e,n,i=V(t),r=U.f,o=Nt(i),s={},a=0;o.length>a;)void 0!==(n=r(i,e=o[a++]))&&yi(s,e,n);return s}});var wi=d((function(){ze(1)}));Gt({target:"Object",stat:!0,forced:wi},{keys:function(t){return ze(Zt(t))}});var xi={};xi[ie("toStringTag")]="z";var Si="[object z]"===String(xi),ki=ie("toStringTag"),Ei="Arguments"==N(function(){return arguments}()),Oi=Si?N:function(t){var e,n,i;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=function(t,e){try{return t[e]}catch(iv){}}(e=Object(t),ki))?n:Ei?N(e):"Object"==(i=N(e))&&"function"==typeof e.callee?"Arguments":i},Ci=Si?{}.toString:function(){return"[object "+Oi(this)+"]"};Si||vt(Object.prototype,"toString",Ci,{unsafe:!0});var ji=v.Promise,Ii=ie("species"),Ti={},_i=ie("iterator"),Ai=Array.prototype,Pi=ie("iterator"),Di=function(t){var e=t.return;if(void 0!==e)return k(e.call(t)).value},Mi=function(t,e){this.stopped=t,this.result=e},Ri=function(t,e,n){var i,r,o,s,a,l,c,u,h=n&&n.that,d=!(!n||!n.AS_ENTRIES),f=!(!n||!n.IS_ITERATOR),p=!(!n||!n.INTERRUPTED),g=Xt(e,h,1+d+p),m=function(t){return i&&Di(i),new Mi(!0,t)},v=function(t){return d?(k(t),p?g(t[0],t[1],m):g(t[0],t[1])):p?g(t,m):g(t)};if(f)i=t;else{if("function"!=typeof(r=function(t){if(null!=t)return t[Pi]||t["@@iterator"]||Ti[Oi(t)]}(t)))throw TypeError("Target is not iterable");if(void 0!==(u=r)&&(Ti.Array===u||Ai[_i]===u)){for(o=0,s=Ot(t.length);s>o;o++)if((a=v(t[o]))&&a instanceof Mi)return a;return new Mi(!1)}i=r.call(t)}for(l=i.next;!(c=l.call(i)).done;){try{a=v(c.value)}catch(iv){throw Di(i),iv}if("object"==typeof a&&a&&a instanceof Mi)return a}return new Mi(!1)},Li=ie("iterator"),Ni=!1;try{var zi=0,Fi={next:function(){return{done:!!zi++}},return:function(){Ni=!0}};Fi[Li]=function(){return this},Array.from(Fi,(function(){throw 2}))}catch(iv){}var $i,Vi,Hi,Wi=ie("species"),Bi=/(iphone|ipod|ipad).*applewebkit/i.test(Ie),Ui="process"==N(v.process),qi=v.location,Gi=v.setImmediate,Yi=v.clearImmediate,Xi=v.process,Zi=v.MessageChannel,Ki=v.Dispatch,Qi=0,Ji={},tr="onreadystatechange",er=function(t){if(Ji.hasOwnProperty(t)){var e=Ji[t];delete Ji[t],e()}},nr=function(t){return function(){er(t)}},ir=function(t){er(t.data)},rr=function(t){v.postMessage(t+"",qi.protocol+"//"+qi.host)};Gi&&Yi||(Gi=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return Ji[++Qi]=function(){("function"==typeof t?t:Function(t)).apply(void 0,e)},$i(Qi),Qi},Yi=function(t){delete Ji[t]},Ui?$i=function(t){Xi.nextTick(nr(t))}:Ki&&Ki.now?$i=function(t){Ki.now(nr(t))}:Zi&&!Bi?(Hi=(Vi=new Zi).port2,Vi.port1.onmessage=ir,$i=Xt(Hi.postMessage,Hi,1)):v.addEventListener&&"function"==typeof postMessage&&!v.importScripts&&qi&&"file:"!==qi.protocol&&!d(rr)?($i=rr,v.addEventListener("message",ir,!1)):$i=tr in x("script")?function(t){bn.appendChild(x("script")).onreadystatechange=function(){bn.removeChild(this),er(t)}}:function(t){setTimeout(nr(t),0)});var or,sr,ar,lr,cr,ur,hr,dr,fr={set:Gi,clear:Yi},pr=U.f,gr=fr.set,mr=v.MutationObserver||v.WebKitMutationObserver,vr=v.document,br=v.process,yr=v.Promise,wr=pr(v,"queueMicrotask"),xr=wr&&wr.value;xr||(or=function(){var t,e;for(Ui&&(t=br.domain)&&t.exit();sr;){e=sr.fn,sr=sr.next;try{e()}catch(iv){throw sr?lr():ar=void 0,iv}}ar=void 0,t&&t.enter()},!Bi&&!Ui&&mr&&vr?(cr=!0,ur=vr.createTextNode(""),new mr(or).observe(ur,{characterData:!0}),lr=function(){ur.data=cr=!cr}):yr&&yr.resolve?(hr=yr.resolve(void 0),dr=hr.then,lr=function(){dr.call(hr,or)}):lr=Ui?function(){br.nextTick(or)}:function(){gr.call(v,or)});var Sr,kr,Er,Or,Cr=xr||function(t){var e={fn:t,next:void 0};ar&&(ar.next=e),sr||(sr=e,lr()),ar=e},jr=function(t){var e,n;this.promise=new t((function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i})),this.resolve=Yt(e),this.reject=Yt(n)},Ir={f:function(t){return new jr(t)}},Tr=function(t,e){if(k(t),b(e)&&e.constructor===t)return e;var n=Ir.f(t);return(0,n.resolve)(e),n.promise},_r=function(t){try{return{error:!1,value:t()}}catch(iv){return{error:!0,value:iv}}},Ar=fr.set,Pr=ie("species"),Dr="Promise",Mr=mt.get,Rr=mt.set,Lr=mt.getterFor(Dr),Nr=ji,zr=v.TypeError,Fr=v.document,$r=v.process,Vr=wt("fetch"),Hr=Ir.f,Wr=Hr,Br=!!(Fr&&Fr.createEvent&&v.dispatchEvent),Ur="function"==typeof PromiseRejectionEvent,qr="unhandledrejection",Gr=Ut(Dr,(function(){if(tt(Nr)===String(Nr)){if(66===Pe)return!0;if(!Ui&&!Ur)return!0}if(Pe>=51&&/native code/.test(Nr))return!1;var t=Nr.resolve(1),e=function(t){t((function(){}),(function(){}))};return(t.constructor={})[Pr]=e,!(t.then((function(){}))instanceof e)})),Yr=Gr||!function(t,e){if(!e&&!Ni)return!1;var n=!1;try{var i={};i[Li]=function(){return{next:function(){return{done:n=!0}}}},t(i)}catch(iv){}return n}((function(t){Nr.all(t).catch((function(){}))})),Xr=function(t){var e;return!(!b(t)||"function"!=typeof(e=t.then))&&e},Zr=function(t,e){if(!t.notified){t.notified=!0;var n=t.reactions;Cr((function(){for(var i=t.value,r=1==t.state,o=0;n.length>o;){var s,a,l,c=n[o++],u=r?c.ok:c.fail,h=c.resolve,d=c.reject,f=c.domain;try{u?(r||(2===t.rejection&&to(t),t.rejection=1),!0===u?s=i:(f&&f.enter(),s=u(i),f&&(f.exit(),l=!0)),s===c.promise?d(zr("Promise-chain cycle")):(a=Xr(s))?a.call(s,h,d):h(s)):d(i)}catch(iv){f&&!l&&f.exit(),d(iv)}}t.reactions=[],t.notified=!1,e&&!t.rejection&&Qr(t)}))}},Kr=function(t,e,n){var i,r;Br?((i=Fr.createEvent("Event")).promise=e,i.reason=n,i.initEvent(t,!1,!0),v.dispatchEvent(i)):i={promise:e,reason:n},!Ur&&(r=v["on"+t])?r(i):t===qr&&function(t,e){var n=v.console;n&&n.error&&(1===arguments.length?n.error(t):n.error(t,e))}("Unhandled promise rejection",n)},Qr=function(t){Ar.call(v,(function(){var e,n=t.facade,i=t.value;if(Jr(t)&&(e=_r((function(){Ui?$r.emit("unhandledRejection",i,n):Kr(qr,n,i)})),t.rejection=Ui||Jr(t)?2:1,e.error))throw e.value}))},Jr=function(t){return 1!==t.rejection&&!t.parent},to=function(t){Ar.call(v,(function(){var e=t.facade;Ui?$r.emit("rejectionHandled",e):Kr("rejectionhandled",e,t.value)}))},eo=function(t,e,n){return function(i){t(e,i,n)}},no=function(t,e,n){t.done||(t.done=!0,n&&(t=n),t.value=e,t.state=2,Zr(t,!0))},io=function(t,e,n){if(!t.done){t.done=!0,n&&(t=n);try{if(t.facade===e)throw zr("Promise can't be resolved itself");var i=Xr(e);i?Cr((function(){var n={done:!1};try{i.call(e,eo(io,n,t),eo(no,n,t))}catch(iv){no(n,iv,t)}})):(t.value=e,t.state=1,Zr(t,!1))}catch(iv){no({done:!1},iv,t)}}};function ro(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function oo(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ro(Object(n),!0).forEach((function(e){mn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ro(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}Gr&&(Nr=function(t){!function(t,e,n){if(!(t instanceof e))throw TypeError("Incorrect "+(n?n+" ":"")+"invocation")}(this,Nr,Dr),Yt(t),Sr.call(this);var e=Mr(this);try{t(eo(io,e),eo(no,e))}catch(iv){no(e,iv)}},(Sr=function(t){Rr(this,{type:Dr,done:!1,notified:!1,parent:!1,reactions:[],rejection:!1,state:0,value:void 0})}).prototype=function(t,e,n){for(var i in e)vt(t,i,e[i],n);return t}(Nr.prototype,{then:function(t,e){var n,i,r,o=Lr(this),s=Hr((n=Nr,void 0===(r=k(this).constructor)||null==(i=k(r)[Wi])?n:Yt(i)));return s.ok="function"!=typeof t||t,s.fail="function"==typeof e&&e,s.domain=Ui?$r.domain:void 0,o.parent=!0,o.reactions.push(s),0!=o.state&&Zr(o,!1),s.promise},catch:function(t){return this.then(void 0,t)}}),kr=function(){var t=new Sr,e=Mr(t);this.promise=t,this.resolve=eo(io,e),this.reject=eo(no,e)},Ir.f=Hr=function(t){return t===Nr||t===Er?new kr(t):Wr(t)},"function"==typeof ji&&(Or=ji.prototype.then,vt(ji.prototype,"then",(function(t,e){var n=this;return new Nr((function(t,e){Or.call(n,t,e)})).then(t,e)}),{unsafe:!0}),"function"==typeof Vr&&Gt({global:!0,enumerable:!0,forced:!0},{fetch:function(t){return Tr(Nr,Vr.apply(v,arguments))}}))),Gt({global:!0,wrap:!0,forced:Gr},{Promise:Nr}),Pn(Nr,Dr,!1),function(t){var e=wt(t),n=C.f;f&&e&&!e[Ii]&&n(e,Ii,{configurable:!0,get:function(){return this}})}(Dr),Er=wt(Dr),Gt({target:Dr,stat:!0,forced:Gr},{reject:function(t){var e=Hr(this);return e.reject.call(void 0,t),e.promise}}),Gt({target:Dr,stat:!0,forced:Gr},{resolve:function(t){return Tr(this,t)}}),Gt({target:Dr,stat:!0,forced:Yr},{all:function(t){var e=this,n=Hr(e),i=n.resolve,r=n.reject,o=_r((function(){var n=Yt(e.resolve),o=[],s=0,a=1;Ri(t,(function(t){var l=s++,c=!1;o.push(void 0),a++,n.call(e,t).then((function(t){c||(c=!0,o[l]=t,--a||i(o))}),r)})),--a||i(o)}));return o.error&&r(o.value),n.promise},race:function(t){var e=this,n=Hr(e),i=n.reject,r=_r((function(){var r=Yt(e.resolve);Ri(t,(function(t){r.call(e,t).then(n.resolve,i)}))}));return r.error&&i(r.value),n.promise}}),c.default.use(u.default);var so={"en-US":oo({},{app:{title:"Luban H5"},header:{chineseDocument:"中文文档",englishDocument:"Document(En)",chat:"Discussion Group",logout:"Logout"},sidebar:{myWorks:"My Works",dataCenter:"Data Center",basicData:"Basic Data",templateCenter:"Templates",freeTemplates:"Templates List",accountCenter:"Account"},workCard:{description:"Desc",createTime:"Time",useNow:"Use it Now",preview:"Preview",edit:"Edit",createNewWork:"Create New",view:"View Work"},basicData:{viewData:"View Data"},editor:{sidebar:{components:"Components",pages:"Pages",templates:"Templates",tree:"Tree"},pageManager:{title:"Page {index}",action:{add:"Add Page",copy:"Copy Page",delete:"Delete Page"}},header:{preview:"Preview",save:"Save",publish:"Publish",setAsTemplate:"Set As Template"},centerPanel:{mode:{edit:"Edit",preview:"Preview"},contextMenu:{copy:"Copy",delete:"Delete",moveToTop:"Move To Top",moveToBottom:"Move To Bottom",moveUp:"Move Up",moveDown:"Move Down",showOnlyButton:"showOnlyButton",showExcludePicture:"showExcludePicture"}},fixedTool:{undo:"Undo{hotkey}",redo:"Redo{hotkey}",preview:"Preview",copyCurrentPage:"CopyCurrentPage",copyCurrentElement:"copyCurrentElement",importPSD:"Import PSD",zoomIn:"Zoom In{hotkey}",zoomOut:"Zoom Out{hotkey}",issues:"Issues"},editPanel:{tab:{prop:"Prop",animation:"Animation",action:"Action",script:"Script",page:"Page"},animation:{add:"Add",run:"Run",type:"Type",duration:"Duration",delay:"Delay",iteration:"Iteration",inifinite:"Inifinite",list:"Select Animation",title:"Animation {index}"},common:{empty:"Select an element first please!"}},tip:{componentUsage:"Tip: just {0} on component",click:"click/drag"}}}),"zh-CN":oo({},{app:{title:"鲁班 H5"},header:{chineseDocument:"中文文档",englishDocument:"英文文档",chat:"交流群",logout:"退出登录"},sidebar:{myWorks:"我的作品",dataCenter:"数据中心",basicData:"基础数据",templateCenter:"模板中心",freeTemplates:"模板列表",accountCenter:"账号中心"},workCard:{description:"描述",createTime:"时间",useNow:"立即查看",preview:"预览",createNewWork:"创建新作品",edit:"编辑",view:"查看作品"},basicData:{viewData:"查看数据"},editor:{sidebar:{components:"组件列表",pages:"页面管理",templates:"模板",tree:"组件树"},pageManager:{title:"第{index}页面",action:{add:"新增页面",copy:"复制页面",delete:"删除页面"}},header:{preview:"预览",save:"保存",publish:"发布",setAsTemplate:"设置为模板"},centerPanel:{mode:{edit:"Edit",preview:"Preview"},contextMenu:{copy:"复制",delete:"删除",moveToTop:"置顶",moveToBottom:"置底",moveUp:"上移",moveDown:"下移",showOnlyButton:"只有按钮才显示该选项",showExcludePicture:"除了图片都显示该选项"}},fixedTool:{undo:"撤销{hotkey}",redo:"重做{hotkey}",preview:"预览",copyCurrentPage:"复制当前页面",copyCurrentElement:"复制当前元素",importPSD:"导入PSD",zoomIn:"缩小{hotkey}",zoomOut:"放大{hotkey}",issues:"常见问题"},editPanel:{tab:{prop:"属性",animation:"动画",action:"动作",script:"脚本",page:"页面"},animation:{add:"添加动画",run:"运行动画",type:"动画类型",duration:"动画时长",delay:"动画延时",iteration:"运行次数",inifinite:"循环播放",list:"选择动画",title:"Animation {index}"},common:{empty:"Select an element first please!"}},tip:{componentUsage:"使用提示: {0} 组件即可",click:"点击或拖拽"}}})},ao="zh-CN",lo=new u.default({locale:ao,fallbackLocale:ao,messages:so}),co=Me("splice"),uo=fe("splice",{ACCESSORS:!0,0:0,1:2}),ho=Math.max,fo=Math.min,po=9007199254740991,go="Maximum allowed length exceeded";Gt({target:"Array",proto:!0,forced:!co||!uo},{splice:function(t,e){var n,i,r,o,s,a,l=Zt(this),c=Ot(l.length),u=It(t,c),h=arguments.length;if(0===h?n=i=0:1===h?(n=0,i=c-u):(n=h-2,i=fo(ho(kt(e),0),c-u)),c+n-i>po)throw TypeError(go);for(r=oe(l,i),o=0;o<i;o++)(s=u+o)in l&&yi(r,o,l[s]);if(r.length=i,n<i){for(o=u;o<c-i;o++)a=o+n,(s=o+i)in l?l[a]=l[s]:delete l[a];for(o=c;o>c-i+n;o--)delete l[o-1]}else if(n>i)for(o=c-i;o>u;o--)a=o+n-1,(s=o+i-1)in l?l[a]=l[s]:delete l[a];for(o=0;o<n;o++)l[o+u]=arguments[o+2];return l.length=c-i+n,r}});var mo=g((function(t){function e(n){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?t.exports=e=function(t){return typeof t}:t.exports=e=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e(n)}t.exports=e}));function vo(t){if("object"!==mo(t)||null===t)return t;var e=s.Seq(t).map(vo);return Array.isArray(t)?e.toList():e.toMap()}var bo=new(function(){function t(){xe(this,t),mn(this,"state",void 0),mn(this,"history",[]),mn(this,"currentIndex",0)}return Oe(t,[{key:"init",value:function(t){this.history=[vo(t)]}},{key:"addState",value:function(t){var e=this.history,n=this.currentIndex,i=e[n]||{},r=n+1;r<e.length&&e.splice(r),this.currentIndex=r,e[r]=i.merge(vo(t))}},{key:"undo",value:function(){var t=this.currentIndex,e=Math.max(t-1,0),n=this.history[e].toJS();return this.currentIndex=e,n}},{key:"redo",value:function(){var t=this.history,e=this.currentIndex,n=Math.min(t.length-1,e+1),i=this.history[n].toJS();return this.currentIndex=n,i}}]),t}()),yo=375,wo=C.f,xo=v.Symbol;if(f&&"function"==typeof xo&&(!("description"in xo.prototype)||void 0!==xo().description)){var So={},ko=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof ko?new xo(t):void 0===t?xo():xo(t);return""===t&&(So[e]=!0),e};zt(ko,xo);var Eo=ko.prototype=xo.prototype;Eo.constructor=ko;var Oo=Eo.toString,Co="Symbol(test)"==String(xo("test")),jo=/^Symbol\((.*)\)[^)]+$/;wo(Eo,"description",{configurable:!0,get:function(){var t=b(this)?this.valueOf():this,e=Oo.call(t);if(W(So,t))return"";var n=Co?e.slice(7,-1):e.replace(jo,"$1");return""===n?void 0:n}}),Gt({global:!0,forced:!0},{Symbol:ko})}var Io,To,_o,Ao=!d((function(){function t(){}return t.prototype.constructor=null,Object.getPrototypeOf(new t)!==t.prototype})),Po=lt("IE_PROTO"),Do=Object.prototype,Mo=Ao?Object.getPrototypeOf:function(t){return t=Zt(t),W(t,Po)?t[Po]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?Do:null},Ro=ie("iterator"),Lo=!1;[].keys&&("next"in(_o=[].keys())?(To=Mo(Mo(_o)))!==Object.prototype&&(Io=To):Lo=!0),null==Io&&(Io={}),W(Io,Ro)||q(Io,Ro,(function(){return this}));var No={IteratorPrototype:Io,BUGGY_SAFARI_ITERATORS:Lo},zo=No.IteratorPrototype,Fo=function(){return this},$o=Object.setPrototypeOf||("__proto__"in{}?function(){var t,e=!1,n={};try{(t=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set).call(n,[]),e=n instanceof Array}catch(iv){}return function(n,i){return k(n),function(t){if(!b(t)&&null!==t)throw TypeError("Can't set "+String(t)+" as a prototype")}(i),e?t.call(n,i):n.__proto__=i,n}}():void 0),Vo=No.IteratorPrototype,Ho=No.BUGGY_SAFARI_ITERATORS,Wo=ie("iterator"),Bo="keys",Uo="values",qo="entries",Go=function(){return this},Yo="Array Iterator",Xo=mt.set,Zo=mt.getterFor(Yo);!function(t,e,n,i,r,o,s){!function(t,e,n){var i=e+" Iterator";t.prototype=kn(zo,{next:R(1,n)}),Pn(t,i,!1),Ti[i]=Fo}(n,e,i);var a,l,c,u=function(t){if(t===r&&g)return g;if(!Ho&&t in f)return f[t];switch(t){case Bo:case Uo:case qo:return function(){return new n(this,t)}}return function(){return new n(this)}},h=e+" Iterator",d=!1,f=t.prototype,p=f[Wo]||f["@@iterator"]||r&&f[r],g=!Ho&&p||u(r),m="Array"==e&&f.entries||p;if(m&&(a=Mo(m.call(new t)),Vo!==Object.prototype&&a.next&&(Mo(a)!==Vo&&($o?$o(a,Vo):"function"!=typeof a[Wo]&&q(a,Wo,Go)),Pn(a,h,!0))),r==Uo&&p&&p.name!==Uo&&(d=!0,g=function(){return p.call(this)}),f[Wo]!==g&&q(f,Wo,g),Ti[e]=g,r)if(l={values:u(Uo),keys:o?g:u(Bo),entries:u(qo)},s)for(c in l)(Ho||d||!(c in f))&&vt(f,c,l[c]);else Gt({target:e,proto:!0,forced:Ho||d},l)}(Array,"Array",(function(t,e){Xo(this,{type:Yo,target:V(t),index:0,kind:e})}),(function(){var t=Zo(this),e=t.target,n=t.kind,i=t.index++;return!e||i>=e.length?(t.target=void 0,{value:void 0,done:!0}):"keys"==n?{value:i,done:!1}:"values"==n?{value:e[i],done:!1}:{value:[i,e[i]],done:!1}}),"values"),Ti.Arguments=Ti.Array,pi("keys"),pi("values"),pi("entries");var Ko=M.f,Qo=function(t){return function(e){for(var n,i=V(e),r=ze(i),o=r.length,s=0,a=[];o>s;)n=r[s++],f&&!Ko.call(i,n)||a.push(t?[n,i[n]]:i[n]);return a}},Jo={entries:Qo(!0),values:Qo(!1)},ts=Jo.entries;Gt({target:"Object",stat:!0},{entries:function(t){return ts(t)}}),Gt({target:"Object",stat:!0},{fromEntries:function(t){var e={};return Ri(t,(function(t,n){yi(e,t,n)}),{AS_ENTRIES:!0}),e}});var es=function(t){if(Array.isArray(t))return t},ns=function(t,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t)){var n=[],i=!0,r=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(c){r=!0,o=c}finally{try{i||null==a.return||a.return()}finally{if(r)throw o}}return n}},is=function(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i},rs=function(t,e){if(t){if("string"==typeof t)return is(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?is(t,e):void 0}},os=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},ss=function(t,e){return es(t)||ns(t,e)||rs(t,e)||os()},as=function(){this.__data__=[],this.size=0},ls=function(t,e){return t===e||t!=t&&e!=e},cs=function(t,e){for(var n=t.length;n--;)if(ls(t[n][0],e))return n;return-1},us=Array.prototype.splice,hs=function(t){var e=this.__data__,n=cs(e,t);return!(n<0)&&(n==e.length-1?e.pop():us.call(e,n,1),--this.size,!0)},ds=function(t){var e=this.__data__,n=cs(e,t);return n<0?void 0:e[n][1]},fs=function(t){return cs(this.__data__,t)>-1},ps=function(t,e){var n=this.__data__,i=cs(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this};function gs(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}gs.prototype.clear=as,gs.prototype.delete=hs,gs.prototype.get=ds,gs.prototype.has=fs,gs.prototype.set=ps;var ms=gs,vs=function(){this.__data__=new ms,this.size=0},bs=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},ys=function(t){return this.__data__.get(t)},ws=function(t){return this.__data__.has(t)},xs=function(t){if(!We(t))return!1;var e=rn(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},Ss=qe["__core-js_shared__"],ks=function(){var t=/[^.]+$/.exec(Ss&&Ss.keys&&Ss.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Es=function(t){return!!ks&&ks in t},Os=Function.prototype.toString,Cs=function(t){if(null!=t){try{return Os.call(t)}catch(n){}try{return t+""}catch(n){}}return""},js=/^\[object .+?Constructor\]$/,Is=Function.prototype,Ts=Object.prototype,_s=Is.toString,As=Ts.hasOwnProperty,Ps=RegExp("^"+_s.call(As).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ds=function(t){return!(!We(t)||Es(t))&&(xs(t)?Ps:js).test(Cs(t))},Ms=function(t,e){return null==t?void 0:t[e]},Rs=function(t,e){var n=Ms(t,e);return Ds(n)?n:void 0},Ls=Rs(qe,"Map"),Ns=Rs(Object,"create"),zs=function(){this.__data__=Ns?Ns(null):{},this.size=0},Fs=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},$s=Object.prototype.hasOwnProperty,Vs=function(t){var e=this.__data__;if(Ns){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return $s.call(e,t)?e[t]:void 0},Hs=Object.prototype.hasOwnProperty,Ws=function(t){var e=this.__data__;return Ns?void 0!==e[t]:Hs.call(e,t)},Bs=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=Ns&&void 0===e?"__lodash_hash_undefined__":e,this};function Us(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}Us.prototype.clear=zs,Us.prototype.delete=Fs,Us.prototype.get=Vs,Us.prototype.has=Ws,Us.prototype.set=Bs;var qs=Us,Gs=function(){this.size=0,this.__data__={hash:new qs,map:new(Ls||ms),string:new qs}},Ys=function(t){var e=typeof t;return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t},Xs=function(t,e){var n=t.__data__;return Ys(e)?n["string"==typeof e?"string":"hash"]:n.map},Zs=function(t){var e=Xs(this,t).delete(t);return this.size-=e?1:0,e},Ks=function(t){return Xs(this,t).get(t)},Qs=function(t){return Xs(this,t).has(t)},Js=function(t,e){var n=Xs(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this};function ta(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}ta.prototype.clear=Gs,ta.prototype.delete=Zs,ta.prototype.get=Ks,ta.prototype.has=Qs,ta.prototype.set=Js;var ea=ta,na=function(t,e){var n=this.__data__;if(n instanceof ms){var i=n.__data__;if(!Ls||i.length<199)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new ea(i)}return n.set(t,e),this.size=n.size,this};function ia(t){var e=this.__data__=new ms(t);this.size=e.size}ia.prototype.clear=vs,ia.prototype.delete=bs,ia.prototype.get=ys,ia.prototype.has=ws,ia.prototype.set=na;var ra=ia,oa=function(t,e){for(var n=-1,i=null==t?0:t.length;++n<i&&!1!==e(t[n],n,t););return t},sa=function(){try{var t=Rs(Object,"defineProperty");return t({},"",{}),t}catch(n){}}(),aa=function(t,e,n){"__proto__"==e&&sa?sa(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n},la=Object.prototype.hasOwnProperty,ca=function(t,e,n){var i=t[e];la.call(t,e)&&ls(i,n)&&(void 0!==n||e in t)||aa(t,e,n)},ua=function(t,e,n,i){var r=!n;n||(n={});for(var o=-1,s=e.length;++o<s;){var a=e[o],l=i?i(n[a],t[a],a,n,t):void 0;void 0===l&&(l=t[a]),r?aa(n,a,l):ca(n,a,l)}return n},ha=function(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i},da=function(t){return on(t)&&"[object Arguments]"==rn(t)},fa=Object.prototype,pa=fa.hasOwnProperty,ga=fa.propertyIsEnumerable,ma=da(function(){return arguments}())?da:function(t){return on(t)&&pa.call(t,"callee")&&!ga.call(t,"callee")},va=Array.isArray,ba=function(){return!1},ya=g((function(t,e){var n=e&&!e.nodeType&&e,i=n&&t&&!t.nodeType&&t,r=i&&i.exports===n?qe.Buffer:void 0,o=(r?r.isBuffer:void 0)||ba;t.exports=o})),wa=/^(?:0|[1-9]\d*)$/,xa=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&wa.test(t))&&t>-1&&t%1==0&&t<e},Sa=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991},ka={};ka["[object Float32Array]"]=ka["[object Float64Array]"]=ka["[object Int8Array]"]=ka["[object Int16Array]"]=ka["[object Int32Array]"]=ka["[object Uint8Array]"]=ka["[object Uint8ClampedArray]"]=ka["[object Uint16Array]"]=ka["[object Uint32Array]"]=!0,ka["[object Arguments]"]=ka["[object Array]"]=ka["[object ArrayBuffer]"]=ka["[object Boolean]"]=ka["[object DataView]"]=ka["[object Date]"]=ka["[object Error]"]=ka["[object Function]"]=ka["[object Map]"]=ka["[object Number]"]=ka["[object Object]"]=ka["[object RegExp]"]=ka["[object Set]"]=ka["[object String]"]=ka["[object WeakMap]"]=!1;var Ea=function(t){return on(t)&&Sa(t.length)&&!!ka[rn(t)]},Oa=function(t){return function(e){return t(e)}},Ca=g((function(t,e){var n=e&&!e.nodeType&&e,i=n&&t&&!t.nodeType&&t,r=i&&i.exports===n&&Be.process,o=function(){try{var t=i&&i.require&&i.require("util").types;return t||r&&r.binding&&r.binding("util")}catch(e){}}();t.exports=o})),ja=Ca&&Ca.isTypedArray,Ia=ja?Oa(ja):Ea,Ta=Object.prototype.hasOwnProperty,_a=function(t,e){var n=va(t),i=!n&&ma(t),r=!n&&!i&&ya(t),o=!n&&!i&&!r&&Ia(t),s=n||i||r||o,a=s?ha(t.length,String):[],l=a.length;for(var c in t)!e&&!Ta.call(t,c)||s&&("length"==c||r&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||xa(c,l))||a.push(c);return a},Aa=Object.prototype,Pa=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Aa)},Da=function(t,e){return function(n){return t(e(n))}},Ma=Da(Object.keys,Object),Ra=Object.prototype.hasOwnProperty,La=function(t){if(!Pa(t))return Ma(t);var e=[];for(var n in Object(t))Ra.call(t,n)&&"constructor"!=n&&e.push(n);return e},Na=function(t){return null!=t&&Sa(t.length)&&!xs(t)},za=function(t){return Na(t)?_a(t):La(t)},Fa=function(t,e){return t&&ua(e,za(e),t)},$a=function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e},Va=Object.prototype.hasOwnProperty,Ha=function(t){if(!We(t))return $a(t);var e=Pa(t),n=[];for(var i in t)("constructor"!=i||!e&&Va.call(t,i))&&n.push(i);return n},Wa=function(t){return Na(t)?_a(t,!0):Ha(t)},Ba=function(t,e){return t&&ua(e,Wa(e),t)},Ua=g((function(t,e){var n=e&&!e.nodeType&&e,i=n&&t&&!t.nodeType&&t,r=i&&i.exports===n?qe.Buffer:void 0,o=r?r.allocUnsafe:void 0;t.exports=function(t,e){if(e)return t.slice();var n=t.length,i=o?o(n):new t.constructor(n);return t.copy(i),i}})),qa=function(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e},Ga=function(t,e){for(var n=-1,i=null==t?0:t.length,r=0,o=[];++n<i;){var s=t[n];e(s,n,t)&&(o[r++]=s)}return o},Ya=function(){return[]},Xa=Object.prototype.propertyIsEnumerable,Za=Object.getOwnPropertySymbols,Ka=Za?function(t){return null==t?[]:(t=Object(t),Ga(Za(t),(function(e){return Xa.call(t,e)})))}:Ya,Qa=function(t,e){return ua(t,Ka(t),e)},Ja=function(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t},tl=Da(Object.getPrototypeOf,Object),el=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Ja(e,Ka(t)),t=tl(t);return e}:Ya,nl=function(t,e){return ua(t,el(t),e)},il=function(t,e,n){var i=e(t);return va(t)?i:Ja(i,n(t))},rl=function(t){return il(t,za,Ka)},ol=function(t){return il(t,Wa,el)},sl=Rs(qe,"DataView"),al=Rs(qe,"Promise"),ll=Rs(qe,"Set"),cl=Rs(qe,"WeakMap"),ul="[object Map]",hl="[object Promise]",dl="[object Set]",fl="[object WeakMap]",pl="[object DataView]",gl=Cs(sl),ml=Cs(Ls),vl=Cs(al),bl=Cs(ll),yl=Cs(cl),wl=rn;(sl&&wl(new sl(new ArrayBuffer(1)))!=pl||Ls&&wl(new Ls)!=ul||al&&wl(al.resolve())!=hl||ll&&wl(new ll)!=dl||cl&&wl(new cl)!=fl)&&(wl=function(t){var e=rn(t),n="[object Object]"==e?t.constructor:void 0,i=n?Cs(n):"";if(i)switch(i){case gl:return pl;case ml:return ul;case vl:return hl;case bl:return dl;case yl:return fl}return e});var xl=wl,Sl=Object.prototype.hasOwnProperty,kl=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&Sl.call(t,"index")&&(n.index=t.index,n.input=t.input),n},El=qe.Uint8Array,Ol=function(t){var e=new t.constructor(t.byteLength);return new El(e).set(new El(t)),e},Cl=function(t,e){var n=e?Ol(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)},jl=/\w*$/,Il=function(t){var e=new t.constructor(t.source,jl.exec(t));return e.lastIndex=t.lastIndex,e},Tl=Ye?Ye.prototype:void 0,_l=Tl?Tl.valueOf:void 0,Al=function(t){return _l?Object(_l.call(t)):{}},Pl=function(t,e){var n=e?Ol(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)},Dl=function(t,e,n){var i=t.constructor;switch(e){case"[object ArrayBuffer]":return Ol(t);case"[object Boolean]":case"[object Date]":return new i(+t);case"[object DataView]":return Cl(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return Pl(t,n);case"[object Map]":return new i;case"[object Number]":case"[object String]":return new i(t);case"[object RegExp]":return Il(t);case"[object Set]":return new i;case"[object Symbol]":return Al(t)}},Ml=Object.create,Rl=function(){function t(){}return function(e){if(!We(e))return{};if(Ml)return Ml(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}(),Ll=function(t){return"function"!=typeof t.constructor||Pa(t)?{}:Rl(tl(t))},Nl=function(t){return on(t)&&"[object Map]"==xl(t)},zl=Ca&&Ca.isMap,Fl=zl?Oa(zl):Nl,$l=function(t){return on(t)&&"[object Set]"==xl(t)},Vl=Ca&&Ca.isSet,Hl=Vl?Oa(Vl):$l,Wl="[object Arguments]",Bl="[object Function]",Ul="[object Object]",ql={};ql[Wl]=ql["[object Array]"]=ql["[object ArrayBuffer]"]=ql["[object DataView]"]=ql["[object Boolean]"]=ql["[object Date]"]=ql["[object Float32Array]"]=ql["[object Float64Array]"]=ql["[object Int8Array]"]=ql["[object Int16Array]"]=ql["[object Int32Array]"]=ql["[object Map]"]=ql["[object Number]"]=ql[Ul]=ql["[object RegExp]"]=ql["[object Set]"]=ql["[object String]"]=ql["[object Symbol]"]=ql["[object Uint8Array]"]=ql["[object Uint8ClampedArray]"]=ql["[object Uint16Array]"]=ql["[object Uint32Array]"]=!0,ql["[object Error]"]=ql[Bl]=ql["[object WeakMap]"]=!1;var Gl=function t(e,n,i,r,o,s){var a,l=1&n,c=2&n,u=4&n;if(i&&(a=o?i(e,r,o,s):i(e)),void 0!==a)return a;if(!We(e))return e;var h=va(e);if(h){if(a=kl(e),!l)return qa(e,a)}else{var d=xl(e),f=d==Bl||"[object GeneratorFunction]"==d;if(ya(e))return Ua(e,l);if(d==Ul||d==Wl||f&&!o){if(a=c||f?{}:Ll(e),!l)return c?nl(e,Ba(a,e)):Qa(e,Fa(a,e))}else{if(!ql[d])return o?e:{};a=Dl(e,d,l)}}s||(s=new ra);var p=s.get(e);if(p)return p;s.set(e,a),Hl(e)?e.forEach((function(r){a.add(t(r,n,i,r,e,s))})):Fl(e)&&e.forEach((function(r,o){a.set(o,t(r,n,i,o,e,s))}));var g=h?void 0:(u?c?ol:rl:c?Wa:za)(e);return oa(g||e,(function(r,o){g&&(r=e[o=r]),ca(a,o,t(r,n,i,o,e,s))})),a},Yl=function(t){return Gl(t,5)},Xl=function(t){if(Array.isArray(t))return is(t)},Zl=function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)},Kl=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},Ql=function(t){return Xl(t)||Zl(t)||rs(t)||Kl()},Jl=ie("isConcatSpreadable"),tc=9007199254740991,ec="Maximum allowed index exceeded",nc=Pe>=51||!d((function(){var t=[];return t[Jl]=!1,t.concat()[0]!==t})),ic=Me("concat"),rc=function(t){if(!b(t))return!1;var e=t[Jl];return void 0!==e?!!e:Kt(t)};Gt({target:"Array",proto:!0,forced:!nc||!ic},{concat:function(t){var e,n,i,r,o,s=Zt(this),a=oe(s,0),l=0;for(e=-1,i=arguments.length;e<i;e++)if(rc(o=-1===e?s:arguments[e])){if(l+(r=Ot(o.length))>tc)throw TypeError(ec);for(n=0;n<r;n++,l++)n in o&&yi(a,l,o[n])}else{if(l>=tc)throw TypeError(ec);yi(a,l++,o)}return a.length=l,a}});var oc=function(){var t=k(this),e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),t.dotAll&&(e+="s"),t.unicode&&(e+="u"),t.sticky&&(e+="y"),e};function sc(t,e){return RegExp(t,e)}var ac,lc,cc={UNSUPPORTED_Y:d((function(){var t=sc("a","y");return t.lastIndex=2,null!=t.exec("abcd")})),BROKEN_CARET:d((function(){var t=sc("^r","gy");return t.lastIndex=2,null!=t.exec("str")}))},uc=RegExp.prototype.exec,hc=String.prototype.replace,dc=uc,fc=(ac=/a/,lc=/b*/g,uc.call(ac,"a"),uc.call(lc,"a"),0!==ac.lastIndex||0!==lc.lastIndex),pc=cc.UNSUPPORTED_Y||cc.BROKEN_CARET,gc=void 0!==/()??/.exec("")[1];(fc||gc||pc)&&(dc=function(t){var e,n,i,r,o=this,s=pc&&o.sticky,a=oc.call(o),l=o.source,c=0,u=t;return s&&(-1===(a=a.replace("y","")).indexOf("g")&&(a+="g"),u=String(t).slice(o.lastIndex),o.lastIndex>0&&(!o.multiline||o.multiline&&"\n"!==t[o.lastIndex-1])&&(l="(?: "+l+")",u=" "+u,c++),n=new RegExp("^(?:"+l+")",a)),gc&&(n=new RegExp("^"+l+"$(?!\\s)",a)),fc&&(e=o.lastIndex),i=uc.call(s?n:o,u),s?i?(i.input=i.input.slice(c),i[0]=i[0].slice(c),i.index=o.lastIndex,o.lastIndex+=i[0].length):o.lastIndex=0:fc&&i&&(o.lastIndex=o.global?i.index+i[0].length:e),gc&&i&&i.length>1&&hc.call(i[0],n,(function(){for(r=1;r<arguments.length-2;r++)void 0===arguments[r]&&(i[r]=void 0)})),i});var mc=dc;Gt({target:"RegExp",proto:!0,forced:/./.exec!==mc},{exec:mc});var vc=ie("species"),bc=!d((function(){var t=/./;return t.exec=function(){var t=[];return t.groups={a:"7"},t},"7"!=="".replace(t,"$<a>")})),yc="$0"==="a".replace(/./,"$0"),wc=ie("replace"),xc=!!/./[wc]&&""===/./[wc]("a","$0"),Sc=!d((function(){var t=/(?:)/,e=t.exec;t.exec=function(){return e.apply(this,arguments)};var n="ab".split(t);return 2!==n.length||"a"!==n[0]||"b"!==n[1]})),kc=function(t,e,n,i){var r=ie(t),o=!d((function(){var e={};return e[r]=function(){return 7},7!=""[t](e)})),s=o&&!d((function(){var e=!1,n=/a/;return"split"===t&&((n={}).constructor={},n.constructor[vc]=function(){return n},n.flags="",n[r]=/./[r]),n.exec=function(){return e=!0,null},n[r](""),!e}));if(!o||!s||"replace"===t&&(!bc||!yc||xc)||"split"===t&&!Sc){var a=/./[r],l=n(r,""[t],(function(t,e,n,i,r){return e.exec===mc?o&&!r?{done:!0,value:a.call(e,n,i)}:{done:!0,value:t.call(n,e,i)}:{done:!1}}),{REPLACE_KEEPS_$0:yc,REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE:xc}),c=l[0],u=l[1];vt(String.prototype,t,c),vt(RegExp.prototype,r,2==e?function(t,e){return u.call(t,this,e)}:function(t){return u.call(t,this)})}i&&q(RegExp.prototype[r],"sham",!0)},Ec=function(t){return function(e,n){var i,r,o=String($(e)),s=kt(n),a=o.length;return s<0||s>=a?t?"":void 0:(i=o.charCodeAt(s))<55296||i>56319||s+1===a||(r=o.charCodeAt(s+1))<56320||r>57343?t?o.charAt(s):i:t?o.slice(s,s+2):r-56320+(i-55296<<10)+65536}},Oc={codeAt:Ec(!1),charAt:Ec(!0)}.charAt,Cc=function(t,e,n){return e+(n?Oc(t,e).length:1)},jc=function(t,e){var n=t.exec;if("function"==typeof n){var i=n.call(t,e);if("object"!=typeof i)throw TypeError("RegExp exec method returned something other than an Object or null");return i}if("RegExp"!==N(t))throw TypeError("RegExp#exec called on incompatible receiver");return mc.call(t,e)},Ic=Math.max,Tc=Math.min,_c=Math.floor,Ac=/\$([$&'`]|\d\d?|<[^>]*>)/g,Pc=/\$([$&'`]|\d\d?)/g;kc("replace",2,(function(t,e,n,i){var r=i.REGEXP_REPLACE_SUBSTITUTES_UNDEFINED_CAPTURE,o=i.REPLACE_KEEPS_$0,s=r?"$":"$0";return[function(n,i){var r=$(this),o=null==n?void 0:n[t];return void 0!==o?o.call(n,r,i):e.call(String(r),n,i)},function(t,i){if(!r&&o||"string"==typeof i&&-1===i.indexOf(s)){var l=n(e,t,this,i);if(l.done)return l.value}var c=k(t),u=String(this),h="function"==typeof i;h||(i=String(i));var d=c.global;if(d){var f=c.unicode;c.lastIndex=0}for(var p=[];;){var g=jc(c,u);if(null===g)break;if(p.push(g),!d)break;""===String(g[0])&&(c.lastIndex=Cc(u,Ot(c.lastIndex),f))}for(var m,v="",b=0,y=0;y<p.length;y++){g=p[y];for(var w=String(g[0]),x=Ic(Tc(kt(g.index),u.length),0),S=[],E=1;E<g.length;E++)S.push(void 0===(m=g[E])?m:String(m));var O=g.groups;if(h){var C=[w].concat(S,x,u);void 0!==O&&C.push(O);var j=String(i.apply(void 0,C))}else j=a(w,u,x,S,O,i);x>=b&&(v+=u.slice(b,x)+j,b=x+w.length)}return v+u.slice(b)}];function a(t,n,i,r,o,s){var a=i+t.length,l=r.length,c=Pc;return void 0!==o&&(o=Zt(o),c=Ac),e.call(s,c,(function(e,s){var c;switch(s.charAt(0)){case"$":return"$";case"&":return t;case"`":return n.slice(0,i);case"'":return n.slice(a);case"<":c=o[s.slice(1,-1)];break;default:var u=+s;if(0===u)return e;if(u>l){var h=_c(u/10);return 0===h?e:h<=l?void 0===r[h-1]?s.charAt(1):r[h-1]+s.charAt(1):e}c=r[u-1]}return void 0===c?"":c}))}}));var Dc=function(t){return"number"==typeof t||on(t)&&"[object Number]"==rn(t)},Mc=function(t){return t.replace(/([A-Z])/g,"-$1").toLowerCase().replace(/^ms-/,"-ms-")},Rc=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"px",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=n.rootValue,r=void 0===i?50:i,o={};return Object.entries(t).forEach((function(t){var n=ss(t,2),i=n[0],s=n[1];if(Dc(s))switch(e){case"rem":s/=r}var a="".concat(s).concat(e),l=Mc(i);o[l]=a})),o};function Lc(){return(Lc=Object.assign||function(t){for(var e,n=1;n<arguments.length;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)}var Nc=["attrs","props","domProps"],zc=["class","style","directives"],Fc=["on","nativeOn"],$c=function(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}},Vc=function(t){return t.reduce((function(t,e){for(var n in e)if(t[n])if(-1!==Nc.indexOf(n))t[n]=Lc({},t[n],e[n]);else if(-1!==zc.indexOf(n)){var i=t[n]instanceof Array?t[n]:[t[n]],r=e[n]instanceof Array?e[n]:[e[n]];t[n]=i.concat(r)}else if(-1!==Fc.indexOf(n))for(var o in e[n])if(t[n][o]){var s=t[n][o]instanceof Array?t[n][o]:[t[n][o]],a=e[n][o]instanceof Array?e[n][o]:[e[n][o]];t[n][o]=s.concat(a)}else t[n][o]=e[n][o];else if("hook"==n)for(var l in e[n])t[n][l]=t[n][l]?$c(t[n][l],e[n][l]):e[n][l];else t[n]=e[n];else t[n]=e[n];return t}),{})},Hc=_t.indexOf,Wc=[].indexOf,Bc=!!Wc&&1/[1].indexOf(1,-0)<0,Uc=ce("indexOf"),qc=fe("indexOf",{ACCESSORS:!0,1:0});Gt({target:"Array",proto:!0,forced:Bc||!Uc||!qc},{indexOf:function(t){return Bc?Wc.apply(this,arguments)||0:Hc(this,t,arguments.length>1?arguments[1]:void 0)}});var Gc="__v-click-outside",Yc="undefined"!=typeof window,Xc="undefined"!=typeof navigator,Zc=Yc&&("ontouchstart"in window||Xc&&navigator.msMaxTouchPoints>0)?["touchstart"]:["click"];function Kc(t){var e=t.event,n=t.handler;(0,t.middleware)(e)&&n&&n(e)}function Qc(t,e){var n=function(t){var e="function"==typeof t;if(!e&&"object"!==mo(t))throw new Error("v-click-outside: Binding value must be a function or an object");return{handler:e?t:t.handler,middleware:t.middleware||function(t){return t},events:t.events||Zc,isActive:!(!1===t.isActive),detectIframe:!(!1===t.detectIframe),capture:!!t.capture,scopeNode:t.scopeNode||document.documentElement}}(e.value),i=n.events,r=n.handler,o=n.middleware,s=n.isActive,a=n.detectIframe,l=n.capture,c=n.scopeNode;if(s&&r){if(t[Gc]=i.map((function(e){return{event:e,srcTarget:document.documentElement,handler:function(e){return function(t){var e=t.el,n=t.event,i=t.handler,r=t.middleware,o=t.scopeNode,s=n.path||n.composedPath&&n.composedPath();(s?s.indexOf(e)<0&&s.indexOf(o)>-1:!e.contains(n.target)&&o.contains(n.target))&&Kc({event:n,handler:i,middleware:r})}({el:t,event:e,handler:r,middleware:o,scopeNode:c})},capture:l}})),a){var u={event:"blur",srcTarget:window,handler:function(e){return function(t){var e=t.el,n=t.event,i=t.handler,r=t.middleware;setTimeout((function(){var t=document.activeElement;t&&"IFRAME"===t.tagName&&!e.contains(t)&&Kc({event:n,handler:i,middleware:r})}),0)}({el:t,event:e,handler:r,middleware:o})},capture:l};t[Gc]=[].concat(Ql(t[Gc]),[u])}t[Gc].forEach((function(e){var n=e.event,i=e.srcTarget,r=e.handler;return setTimeout((function(){t[Gc]&&i.addEventListener(n,r,l)}),0)}))}}function Jc(t){(t[Gc]||[]).forEach((function(t){var e=t.event,n=t.srcTarget,i=t.handler,r=t.capture;return n.removeEventListener(e,i,r)})),delete t[Gc]}function tu(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function eu(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tu(Object(n),!0).forEach((function(e){mn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tu(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var nu={top:0,left:0,width:100,height:40},iu=["lt","rt","lb","rb","lm","rm","tm","bm"],ru={directives:{vClickOutside:Yc?{bind:Qc,update:function(t,e){var n=e.value,i=e.oldValue;JSON.stringify(n)!==JSON.stringify(i)&&(Jc(t),Qc(t,{value:n}))},unbind:Jc}:{}},props:{elStyle:{type:Object,default:function(){return{}}},disable:{type:Boolean,default:nu.disable}},inject:["lbpCanvasContext"],data:function(){return{rect:this.getReact(this.elStyle),shapeStyle:Rc(this.elStyle,this.lbpCanvasContext.unit),startY:0,startX:0,point:"",active:!1,vcoConfig:{}}},computed:{bound:function(){var t=this.lbpCanvasContext;return{left:0,top:0,right:t.width,bottom:t.height}}},mounted:function(){this.vcoConfig={events:["mousedown"],handler:this.onClickOutside,scopeNode:document.querySelector(".lbp-canvas-wrapper")}},watch:{elStyle:function(){var t=this.elStyle;this.rect=this.getReact(t),this.shapeStyle=Rc(t,this.lbpCanvasContext.unit)},rect:{handler:function(){var t=eu(eu({},this.elStyle),this.rect);this.shapeStyle=eu(eu({},this.shapeStyle),Rc(this.rect,this.lbpCanvasContext.unit)),this.$emit("change",t)},deep:!0}},methods:{getReact:function(t){return{left:t.left,top:t.top,width:t.width,height:t.height}},setActive:function(t){this.active!==t&&(t?this.$emit("active"):this.$emit("deactive"),this.active=t)},onClickOutside:function(){this.setActive(!1)},addWidth:function(t){var e=this.rect,n=e.left,i=e.width+t;if(i<0&&(i=0),!(n+i>this.bound.right))return this.rect.width=i},addHeight:function(t){var e=this.rect,n=e.top,i=e.height+t;if(i<0&&(i=0),!(n+i>this.bound.bottom))return this.rect.height=i},addLeft:function(t){var e=this.rect,n=e.left,i=e.width,r=this.bound,o=r.left,s=n+t;if(s<o&&(s=o),!(s+i>r.right))return this.rect.left=s},addTop:function(t){var e=this.rect,n=e.top,i=e.height,r=this.bound,o=r.top,s=n+t;if(s<o&&(s=o),!(s+i>r.bottom))return this.rect.top=s},handleShapeDown:function(t){this.setActive(!0),this.startY=t.clientY,this.startX=t.clientX,document.addEventListener("mousemove",this.handleShapeMove),document.addEventListener("mouseup",this.handleShapeUp)},handleShapeMove:function(t){t.preventDefault();var e=t.clientX-this.startX,n=t.clientY-this.startY;this.startX=t.clientX,this.startY=t.clientY,this.addLeft(e),this.addTop(n)},handleShapeUp:function(){document.removeEventListener("mousemove",this.handleShapeMove),document.removeEventListener("mouseup",this.handleShapeUp)},handlePointDown:function(t,e){this.startY=e.clientY,this.startX=e.clientX,this.point=t,document.addEventListener("mousemove",this.handlePointMove),document.addEventListener("mouseup",this.handlePointUp)},handlePointMove:function(t){var e=this,n=[/l/,/t/,/r/,/b/].map((function(t){return t.test(e.point)})),i=ss(n,4),r=i[0],o=i[1],s=i[2],a=i[3],l=t.clientX-this.startX,c=t.clientY-this.startY;if(this.startX=t.clientX,this.startY=t.clientY,r){var u=this.rect,h=u.left,d=u.width,f=Math.min(d,l),p=Math.min(h,-l);this.addLeft(f),this.addWidth(p)}if(o){var g=this.rect,m=g.top,v=g.height,b=Math.min(v,c),y=Math.min(m,-c);this.addTop(b),this.addHeight(y)}s&&this.addWidth(l),a&&this.addHeight(c)},handlePointUp:function(){document.removeEventListener("mousemove",this.handlePointMove),document.removeEventListener("mouseup",this.handlePointUp)}},render:function(){var t=this,e=arguments[0],n=this.lbpCanvasContext.readonly,i={directives:[{name:"v-click-outside",value:this.vcoConfig}],on:{mousedown:this.handleShapeDown},class:[{active:this.active}],attrs:{tabindex:0}};return e("div",Vc([{style:this.shapeStyle,class:"shape-layer"},n?{}:i]),[e("div",{class:"shape-content"},[this.$slots.default]),!n&&e("div",{class:"control"},[iu.map((function(n){return e("div",{directives:[{name:"show",value:t.active}],class:"shape-scale__point",attrs:{"data-point":n},on:{mousedown:t.handlePointDown.bind(t,n)}})}))])])}};function ou(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function su(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ou(Object(n),!0).forEach((function(e){mn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ou(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var au={},lu=0,cu=function(){function t(){var e=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};xe(this,t);var i=n.pluginName,r=void 0===i?"":i,o=n.props,s=void 0===o?{}:o,a=n.style,l=void 0===a?{}:a,c=n.attrs,u=void 0===c?{}:c,h=n.animations,d=void 0===h?[]:h;r&&(this.id=lu++,this.pluginName=r,this.props=su({},s),t.getComponentAsync(r,(function(n){e.props=su(su({},t.getComponentProps(n)),e.props)})),this.attrs=su({},u),this.class=su({},n.class),this.style=su(su({},nu),l),this.animations=Ql(d))}return Oe(t,[{key:"clone",value:function(){return new t(Yl(this))}},{key:"update",value:function(t){var e=t.props,n=t.style,i=t.animations;e&&Object.assign(this.props,e),n&&Object.assign(this.style,n),i&&(Object.assign(this.animations,i),this.animations.length=i.length)}},{key:"getEditorProps",value:function(){var e=t.getCachedComponent(this.pluginName);return Object.fromEntries(Object.entries(e.props).filter((function(t){return ss(t,2)[1].editor})))}}],[{key:"getPlugin",value:function(t){return je.getPlugin(t)}},{key:"isSyncComponent",value:function(t){return!("function"==typeof t)}},{key:"getComponentAsync",value:function(e,n){var i=t.getCachedComponent(e);if(i)return n&&n(i);var r,o=t.getPlugin(e).component;if(t.isSyncComponent(o))au[e]=o,n&&n(o);else{var s=o();(r=s)&&"function"!=typeof r.subscribe&&"function"==typeof r.then?s.then((function(t){var i=t.default;au[e]=i,n&&n(i)})):(au[e]=n,n&&n(s))}}},{key:"getCachedComponent",value:function(t){return au[t]}},{key:"getComponentProps",value:function(e){var n={},i=e.props;return Object.entries(i).forEach((function(e){var i=ss(e,2),r=i[0],o=i[1];n[r]=t.getPropDefaultValue(null,o)})),n}},{key:"getPropDefaultValue",value:function(t,e){if(Object.prototype.hasOwnProperty.call(e,"default")){var n=e.default;return"function"==typeof n?n.call(t):n}}}]),t}(),uu={SWIPPER_PAGE:"h5_swipper",LONG_PAGE:"h5_long_page",WIDTH:375,HEIGHT:667},hu={SWIPPER_PAGE:"翻页H5",LONG_PAGE:"长页面"},du=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.title,i=void 0===n?"":n,r=e.elements,o=void 0===r?[]:r,s=e.height,a=void 0===s?uu.HEIGHT:s,l=e.width,c=void 0===l?uu.WIDTH:l,u=e.pageMode,h=void 0===u?uu.SWIPPER_PAGE:u;xe(this,t),this.id=+new Date,this.title=i,this.width=c>=0?c:uu.WIDTH,this.height=a>=0?a:uu.HEIGHT,this.pageMode=h,this.elements=this.genElements(o)}return Oe(t,[{key:"clone",value:function(){var e=this.elements.map((function(t){return new cu(t)}));return new t({title:this.title,elements:e})}},{key:"genElements",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return Array.isArray(t)&&t.length>0?t.map((function(t){return new cu(t)})):[]}}]),t}(),fu=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=e.id,i=e.title,r=void 0===i?"标题":i,o=e.description,s=void 0===o?"描述":o,a=e.pages,l=void 0===a?[]:a,c=e.isPublish,u=e.isTemplate;xe(this,t),this.id=n,this.title=r,this.description=s,this.pages=this.genPages(l),this.cover_image_url="",this.is_publish=!!c,this.is_template=!!u}return Oe(t,[{key:"genPages",value:function(t){return Array.isArray(t)&&t.length>0?t.map((function(t){return new du(t)})):[new du]}}]),t}(),pu=function(t,e,n){var i,r;return $o&&"function"==typeof(i=e.constructor)&&i!==n&&b(r=i.prototype)&&r!==n.prototype&&$o(t,r),t},gu="\t\n\v\f\r                　\u2028\u2029\ufeff",mu="["+gu+"]",vu=RegExp("^"+mu+mu+"*"),bu=RegExp(mu+mu+"*$"),yu=function(t){return function(e){var n=String($(e));return 1&t&&(n=n.replace(vu,"")),2&t&&(n=n.replace(bu,"")),n}},wu={start:yu(1),end:yu(2),trim:yu(3)},xu=Rt.f,Su=U.f,ku=C.f,Eu=wu.trim,Ou="Number",Cu=v.Number,ju=Cu.prototype,Iu=N(kn(ju))==Ou,Tu=function(t){var e,n,i,r,o,s,a,l,c=E(t,!1);if("string"==typeof c&&c.length>2)if(43===(e=(c=Eu(c)).charCodeAt(0))||45===e){if(88===(n=c.charCodeAt(2))||120===n)return NaN}else if(48===e){switch(c.charCodeAt(1)){case 66:case 98:i=2,r=49;break;case 79:case 111:i=8,r=55;break;default:return+c}for(s=(o=c.slice(2)).length,a=0;a<s;a++)if((l=o.charCodeAt(a))<48||l>r)return NaN;return parseInt(o,i)}return+c};if(Ut(Ou,!Cu(" 0o1")||!Cu("0b1")||Cu("+0x1"))){for(var _u,Au=function(t){var e=arguments.length<1?0:t,n=this;return n instanceof Au&&(Iu?d((function(){ju.valueOf.call(n)})):N(n)!=Ou)?pu(new Cu(Tu(e)),n,Au):Tu(e)},Pu=f?xu(Cu):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),Du=0;Pu.length>Du;Du++)W(Cu,_u=Pu[Du])&&!W(Au,_u)&&ku(Au,_u,Su(Cu,_u));Au.prototype=ju,ju.constructor=Au,vt(v,Ou,Au)}var Mu,Ru={props:{element:{type:cu,require:!0}},watch:{element:{handler:function(t){this.trigger("onLbpElementChange",Yl(t))},deep:!0}},mounted:function(){this.$lbpPluginEl=this.$refs.lbpPluginEl},methods:{trigger:function(t,e){var n=this.plugin.component[t];n&&n.call(this.$lbpPluginEl,e)}},render:function(){var t=arguments[0],e=this.element,n=this.plugin=je.getPlugin(e.pluginName),i=n.component;return i?t(i,Vc([{ref:"lbpPluginEl"},{props:e.props}])):null}},Lu=new c.default,Nu={props:{animations:{type:Array,default:function(){return[]}}},data:function(){return{animationIndex:0,runingAnimation:{}}},computed:{animationStyle:function(){var t=this.runingAnimation,e=t.duration,n=t.type,i=t.infinite,r=t.interationCount,o=t.delay;return{animationName:n,animationDuration:e?"".concat(e,"s"):null,animationIterationCount:i?"infinite":r||null,animationDelay:o?"".concat(o,"s"):null,animationFillMode:"both"}}},created:function(){var t=this;Lu.$on("RUN_ANIMATIONS",(function(){t.runAnimations()}))},methods:{runAnimations:function(){this.clear(),this.runAnimation(this.animationIndex)},runAnimation:function(t){var e=this;setTimeout((function(){var n=e.animations;e.animationIndex=t,e.runingAnimation=n[t]||{}}))},handleAnimationend:function(){this.clearAnimation();var t=this.animations.length,e=this.animationIndex+1;e>=t||this.runAnimation(e)},clear:function(){this.clearAnimation(),this.animationIndex=0},clearAnimation:function(){this.runingAnimation={}}},render:function(){var t=arguments[0];return t("div",{class:"animate-layer",style:this.animationStyle,on:{animationend:this.handleAnimationend}},[this.$slots.default])}},zu={props:{element:{type:cu,require:!0}},methods:{_handleChange:function(t){this.$emit("elementChange",t)},_handleActive:function(){this.$emit("elementActive",this.element)},_handleDeactive:function(){this.$emit("elementDeactive",this.element)}},render:function(){var t=arguments[0],e=this.element;return t(ru,{attrs:{elStyle:e.style},on:{change:this._handleChange,active:this._handleActive,deactive:this._handleDeactive}},[t(Nu,{attrs:{animations:e.animations}},[t(Ru,{attrs:{element:e}})])])}},Fu={props:{width:{type:Number,default:0},height:{type:Number,default:0},elements:{type:Array,default:function(){return[]}},readonly:{type:Boolean,default:!1},unit:{type:String,default:"px"}},provide:function(){return{lbpCanvasContext:this.lbpCanvasContext}},data:function(){return{lbpCanvasContext:{width:this.width,height:this.height,readonly:this.readonly,unit:this.unit}}},watch:{width:function(t){this.updateCanvas({width:t})},height:function(t){this.updateCanvas({height:t})}},computed:{canvasStyle:function(){return Rc({width:this.width,height:this.height},this.unit)}},methods:{updateCanvas:function(t){Object.assign(this.lbpCanvasContext,t)}},render:function(){var t=this,e=arguments[0];return e("div",{class:["lbp-canvas",this.readonly?"readonly":"edit","readonly"],style:this.canvasStyle},[e("div",{class:"lbp-canvas-wrapper"},[e("div",{class:"lbp-elements"},[this.elements.map((function(n){return e(zu,Vc([{key:n.id,attrs:{element:n,disabled:t.disabled}},{on:t.$listeners}]))}))])])])}},$u=[{i18nTooltip:"editor.fixedTool.undo",icon:"mail-reply",action:function(){this.$emit("undo")},hotkey:"ctrl&z,⌘&z",hotkeyTooltip:"(ctrl+z)"},{i18nTooltip:"editor.fixedTool.redo",icon:"mail-forward",action:function(){this.$emit("redo")},hotkey:"ctrl&y,⌘&u",hotkeyTooltip:"(ctrl+y)"},{i18nTooltip:"editor.fixedTool.preview",icon:"eye",action:function(){this.previewDialogVisible=!0}},{i18nTooltip:"editor.fixedTool.copyCurrentPage",icon:"copy",action:function(){this.pageManager({type:"copy"})},hotkey:"ctrl&c,⌘&c"},{i18nTooltip:"editor.fixedTool.copyCurrentElement",icon:"copy",action:function(){this.elementManager({type:"copy"})}},{i18nTooltip:"editor.fixedTool.importPSD",text:"Ps",icon:"",action:"",disabled:!0},{i18nTooltip:"editor.fixedTool.zoomOut",icon:"plus",action:function(){this.updateScaleRate(.25)},hotkey:"ctrl&=,⌘&=",hotkeyTooltip:"(ctrl +)"},{i18nTooltip:"editor.fixedTool.zoomIn",icon:"minus",action:function(){this.updateScaleRate(-.25)},hotkey:"ctrl&-,⌘&-",hotkeyTooltip:"(ctrl -)"},{i18nTooltip:"editor.fixedTool.issues",icon:"question",action:function(){window.open("https://github.com/ly525/luban-h5/issues/110")}}],Vu={components:(Mu={},mn(Mu,i.Layout.Sider.name,i.Layout.Sider),mn(Mu,i.Button.Group.name,i.Button.Group),mn(Mu,i.Tooltip.name,i.Tooltip),mn(Mu,i.Button.name,i.Button),Mu),data:function(){return{scaleRate:1}},render:function(){var t=this,e=arguments[0];return e("a-layout-sider",{attrs:{width:"40",theme:"light"},style:{background:"#fff",border:"1px solid #eee"}},[e("a-button-group",{style:{display:"flex",flexDirection:"column"}},[$u.map((function(n){return e("a-tooltip",{attrs:{effect:"dark",placement:"left",title:t.$t(n.i18nTooltip,{hotkey:n.hotkeyTooltip})}},[e("a-button",{attrs:{block:!0,type:"link",size:"small",disabled:!!n.disabled},class:"transparent-bg",style:{height:"40px",color:"#000"},on:{click:function(){return n.action&&n.action.call(t)}}},[n.icon?e("i",{class:["shortcut-icon","fa","fa-".concat(n.icon)],attrs:{"aria-hidden":"true"}}):n.text||t.$t(n.i18nTooltip)]),"minus"===n.icon&&e("div",{style:{fontSize:"12px",textAlign:"center"}},[100*t.scaleRate,"%"])])}))])])},mounted:function(){var t=this;$u.map((function(e){e.hotkey&&h.default(e.hotkey,{splitKey:"&"},(function(n,i){n.preventDefault(),n.stopPropagation(),e.action&&e.action.call(t)}))}))}},Hu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Wu=/^\w*$/,Bu=function(t,e){if(va(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!sn(t))||Wu.test(t)||!Hu.test(t)||null!=e&&t in Object(e)};function Uu(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],o=n.cache;if(o.has(r))return o.get(r);var s=t.apply(this,i);return n.cache=o.set(r,s)||o,s};return n.cache=new(Uu.Cache||ea),n}Uu.Cache=ea;var qu=Uu,Gu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Yu=/\\(\\)?/g,Xu=function(t){var e=qu(t,(function(t){return 500===n.size&&n.clear(),t})),n=e.cache;return e}((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Gu,(function(t,n,i,r){e.push(i?r.replace(Yu,"$1"):n||t)})),e})),Zu=function(t,e){for(var n=-1,i=null==t?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r},Ku=Ye?Ye.prototype:void 0,Qu=Ku?Ku.toString:void 0,Ju=function t(e){if("string"==typeof e)return e;if(va(e))return Zu(e,t)+"";if(sn(e))return Qu?Qu.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n},th=function(t){return null==t?"":Ju(t)},eh=function(t,e){return va(t)?t:Bu(t,e)?[t]:Xu(th(t))},nh=function(t){if("string"==typeof t||sn(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},ih=function(t,e){for(var n=0,i=(e=eh(e,t)).length;null!=t&&n<i;)t=t[nh(e[n++])];return n&&n==i?t:void 0},rh=function(t,e,n,i){if(!We(t))return t;for(var r=-1,o=(e=eh(e,t)).length,s=o-1,a=t;null!=a&&++r<o;){var l=nh(e[r]),c=n;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(r!=s){var u=a[l];void 0===(c=i?i(u,l,a):void 0)&&(c=We(u)?u:xa(e[r+1])?[]:{})}ca(a,l,c),a=a[l]}return t},oh=function(t,e,n){for(var i=-1,r=e.length,o={};++i<r;){var s=e[i],a=ih(t,s);n(a,s)&&rh(o,eh(s,t),a)}return o},sh=function(t,e){return null!=t&&e in Object(t)},ah=function(t,e,n){for(var i=-1,r=(e=eh(e,t)).length,o=!1;++i<r;){var s=nh(e[i]);if(!(o=null!=t&&n(t,s)))break;t=t[s]}return o||++i!=r?o:!!(r=null==t?0:t.length)&&Sa(r)&&xa(s,r)&&(va(t)||ma(t))},lh=function(t,e){return null!=t&&ah(t,e,sh)},ch=function(t,e){return oh(t,e,(function(e,n){return lh(t,n)}))},uh=Ye?Ye.isConcatSpreadable:void 0,hh=function(t){return va(t)||ma(t)||!!(uh&&t&&t[uh])},dh=function t(e,n,i,r,o){var s=-1,a=e.length;for(i||(i=hh),o||(o=[]);++s<a;){var l=e[s];n>0&&i(l)?n>1?t(l,n-1,i,r,o):Ja(o,l):r||(o[o.length]=l)}return o},fh=function(t){return null!=t&&t.length?dh(t,1):[]},ph=function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)},gh=Math.max,mh=function(t,e,n){return e=gh(void 0===e?t.length-1:e,0),function(){for(var i=arguments,r=-1,o=gh(i.length-e,0),s=Array(o);++r<o;)s[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=n(s),ph(t,this,a)}},vh=function(t){return function(){return t}},bh=sa?function(t,e){return sa(t,"toString",{configurable:!0,enumerable:!1,value:vh(e),writable:!0})}:function(t){return t},yh=Date.now,wh=function(t){var e=0,n=0;return function(){var i=yh(),r=16-(i-n);if(n=i,r>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}(bh),xh=function(t){return wh(mh(t,void 0,fh),t+"")}((function(t,e){return null==t?{}:ch(t,e)})),Sh=Me("slice"),kh=fe("slice",{ACCESSORS:!0,0:0,1:2}),Eh=ie("species"),Oh=[].slice,Ch=Math.max;Gt({target:"Array",proto:!0,forced:!Sh||!kh},{slice:function(t,e){var n,i,r,o=V(this),s=Ot(o.length),a=It(t,s),l=It(void 0===e?s:e,s);if(Kt(o)&&("function"!=typeof(n=o.constructor)||n!==Array&&!Kt(n.prototype)?b(n)&&null===(n=n[Eh])&&(n=void 0):n=void 0,n===Array||void 0===n))return Oh.call(o,a,l);for(i=new(void 0===n?Array:n)(Ch(l-a,0)),r=0;a<l;a++,r++)a in o&&yi(i,r,o[a]);return i.length=r,i}});var jh,Ih={name:"colors-panel",props:{value:{type:[Array,String]}},render:function(){var t=this,e=arguments[0];return e("div",[Array.isArray(this.value)?this.value.map((function(n,i){return e("input",{attrs:{size:"small",type:"color",autocomplete:!0},domProps:{value:n},on:{change:function(e){var n=t.value.slice(0);n[i]=e.target.value,t.$emit("change",n)}}})})):e("input",{attrs:{size:"small",type:"color",autocomplete:!0},domProps:{value:this.value},on:{change:function(e){t.$emit("change",e.target.value)}}})])}},Th={name:"lbs-text-align",components:(jh={},mn(jh,i.Radio.Group.name,i.Radio.Group),mn(jh,i.Radio.Button.name,i.Radio.Button),mn(jh,i.Tooltip.name,i.Tooltip),jh),render:function(t){var e=this;return t("div",{class:"wrap"},[t("a-radio-group",{attrs:{size:"small",value:this.value},on:{change:function(t){e.$emit("change",t),e.$emit("input",t)}}},[this.textAlignTabs.map((function(e){return t("a-tooltip",{attrs:{effect:"dark",placement:"top",title:e.label},key:e.value},[t("a-radio-button",{attrs:{value:e.value}},[t("i",{class:["fa","fa-align-"+e.value],attrs:{"aria-hidden":"true"}})])])}))])])},props:{value:{type:[String,Number]}},data:function(){return{textAlignTabs:[{label:"左对齐",value:"left"},{label:"居中对齐",value:"center"},{label:"右对齐",value:"right"}]}}};class _h{constructor(t,e=""){"string"==typeof t?(this.el=document.createElement(t),this.el.className=e):this.el=t,this.data={}}data(t,e){return void 0!==e?(this.data[t]=e,this):this.data[t]}on(t,e){const[n,...i]=t.split(".");let r=n;return"mousewheel"===r&&/Firefox/i.test(window.navigator.userAgent)&&(r="DOMMouseScroll"),this.el.addEventListener(r,t=>{e(t);for(let e=0;e<i.length;e+=1){const n=i[e];if("left"===n&&0!==t.button)return;if("right"===n&&2!==t.button)return;"stop"===n&&t.stopPropagation()}}),this}offset(t){if(void 0!==t)return Object.keys(t).forEach(e=>{this.css(e,t[e]+"px")}),this;const{offsetTop:e,offsetLeft:n,offsetHeight:i,offsetWidth:r}=this.el;return{top:e,left:n,height:i,width:r}}scroll(t){const{el:e}=this;return void 0!==t&&(void 0!==t.left&&(e.scrollLeft=t.left),void 0!==t.top&&(e.scrollTop=t.top)),{left:e.scrollLeft,top:e.scrollTop}}box(){return this.el.getBoundingClientRect()}parent(){return new _h(this.el.parentNode)}children(...t){return 0===arguments.length?this.el.childNodes:(t.forEach(t=>this.child(t)),this)}removeChild(t){this.el.removeChild(t)}child(t){let e=t;return"string"==typeof t?e=document.createTextNode(t):t instanceof _h&&(e=t.el),this.el.appendChild(e),this}contains(t){return this.el.contains(t)}className(t){return void 0!==t?(this.el.className=t,this):this.el.className}addClass(t){return this.el.classList.add(t),this}hasClass(t){return this.el.classList.contains(t)}removeClass(t){return this.el.classList.remove(t),this}toggle(t="active"){return this.toggleClass(t)}toggleClass(t){return this.el.classList.toggle(t)}active(t=!0,e="active"){return t?this.addClass(e):this.removeClass(e),this}checked(t=!0){return this.active(t,"checked"),this}disabled(t=!0){return t?this.addClass("disabled"):this.removeClass("disabled"),this}attr(t,e){if(void 0!==e)this.el.setAttribute(t,e);else{if("string"==typeof t)return this.el.getAttribute(t);Object.keys(t).forEach(e=>{this.el.setAttribute(e,t[e])})}return this}removeAttr(t){return this.el.removeAttribute(t),this}html(t){return void 0!==t?(this.el.innerHTML=t,this):this.el.innerHTML}val(t){return void 0!==t?(this.el.value=t,this):this.el.value}focus(){this.el.focus()}cssRemoveKeys(...t){return t.forEach(t=>this.el.style.removeProperty(t)),this}css(t,e){return void 0===e&&"string"!=typeof t?(Object.keys(t).forEach(e=>{this.el.style[e]=t[e]}),this):void 0!==e?(this.el.style[t]=e,this):this.el.style[t]}computedStyle(){return window.getComputedStyle(this.el,null)}show(){return this.css("display","block"),this}hide(){return this.css("display","none"),this}}const Ah=(t,e="")=>new _h(t,e),Ph=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];function Dh(t){let e="",n=t;for(;n>=Ph.length;)n/=Ph.length,n-=1,e+=Ph[parseInt(n,10)%Ph.length];return e+=Ph[t%Ph.length],e}function Mh(t){let e=0;for(let n=0;n<t.length-1;n+=1){const i=t.charCodeAt(n)-65,r=t.length-1-n;e+=Ph.length**r+Ph.length*i}return e+=t.charCodeAt(t.length-1)-65,e}function Rh(t){let e="",n="";for(let i=0;i<t.length;i+=1)t.charAt(i)>="0"&&t.charAt(i)<="9"?n+=t.charAt(i):e+=t.charAt(i);return[Mh(e),parseInt(n,10)-1]}function Lh(t,e){return`${Dh(t)}${e+1}`}function Nh(t,e,n,i=(()=>!0)){if(0===e&&0===n)return t;const[r,o]=Rh(t);return i(r,o)?Lh(r+e,o+n):t}class zh{constructor(t,e,n,i,r=0,o=0){this.sri=t,this.sci=e,this.eri=n,this.eci=i,this.w=r,this.h=o}set(t,e,n,i){this.sri=t,this.sci=e,this.eri=n,this.eci=i}multiple(){return this.eri-this.sri>0||this.eci-this.sci>0}includes(...t){let[e,n]=[0,0];1===t.length?[n,e]=Rh(t[0]):2===t.length&&([e,n]=t);const{sri:i,sci:r,eri:o,eci:s}=this;return i<=e&&e<=o&&r<=n&&n<=s}each(t,e=(()=>!0)){const{sri:n,sci:i,eri:r,eci:o}=this;for(let s=n;s<=r;s+=1)if(e(s))for(let e=i;e<=o;e+=1)t(s,e)}contains(t){return this.sri<=t.sri&&this.sci<=t.sci&&this.eri>=t.eri&&this.eci>=t.eci}within(t){return this.sri>=t.sri&&this.sci>=t.sci&&this.eri<=t.eri&&this.eci<=t.eci}disjoint(t){return this.sri>t.eri||this.sci>t.eci||t.sri>this.eri||t.sci>this.eci}intersects(t){return this.sri<=t.eri&&this.sci<=t.eci&&t.sri<=this.eri&&t.sci<=this.eci}union(t){const{sri:e,sci:n,eri:i,eci:r}=this;return new zh(t.sri<e?t.sri:e,t.sci<n?t.sci:n,t.eri>i?t.eri:i,t.eci>r?t.eci:r)}difference(t){const e=[],n=(t,n,i,r)=>{e.push(new zh(t,n,i,r))},{sri:i,sci:r,eri:o,eci:s}=this,a=t.sri-i,l=t.sci-r,c=o-t.eri,u=s-t.eci;return a>0?(n(i,r,t.sri-1,s),c>0?(n(t.eri+1,r,o,s),l>0&&n(t.sri,r,t.eri,t.sci-1),u>0&&n(t.sri,t.eci+1,t.eri,s)):(l>0&&n(t.sri,r,o,t.sci-1),u>0&&n(t.sri,t.eci+1,o,s))):c>0&&(n(t.eri+1,r,o,s),l>0&&n(i,r,t.eri,t.sci-1),u>0&&n(i,t.eci+1,t.eri,s)),l>0?(n(i,r,o,t.sci-1),u>0?(n(i,t.eri+1,o,s),a>0&&n(i,t.sci,t.sri-1,t.eci),c>0&&n(t.sri+1,t.sci,o,t.eci)):(a>0&&n(i,t.sci,t.sri-1,s),c>0&&n(t.sri+1,t.sci,o,s))):u>0&&(n(o,t.eci+1,o,s),a>0&&n(i,r,t.sri-1,t.eci),c>0&&n(t.eri+1,r,o,t.eci)),e}size(){return[this.eri-this.sri+1,this.eci-this.sci+1]}toString(){const{sri:t,sci:e,eri:n,eci:i}=this;let r=Lh(e,t);return this.multiple()&&(r=`${r}:${Lh(i,n)}`),r}clone(){const{sri:t,sci:e,eri:n,eci:i,w:r,h:o}=this;return new zh(t,e,n,i,r,o)}equals(t){return this.eri===t.eri&&this.eci===t.eci&&this.sri===t.sri&&this.sci===t.sci}static valueOf(t){const e=t.split(":"),[n,i]=Rh(e[0]);let[r,o]=[i,n];return e.length>1&&([o,r]=Rh(e[1])),new zh(i,n,r,o)}}class Fh{constructor(){this.range=new zh(0,0,0,0),this.ri=0,this.ci=0}multiple(){return this.range.multiple()}setIndexes(t,e){this.ri=t,this.ci=e}size(){return this.range.size()}}class $h{constructor(){this.x=0,this.y=0,this.ri=0,this.ci=0}}class Vh{constructor(){this.undoItems=[],this.redoItems=[]}add(t){this.undoItems.push(JSON.stringify(t)),this.redoItems=[]}canUndo(){return this.undoItems.length>0}canRedo(){return this.redoItems.length>0}undo(t,e){const{undoItems:n,redoItems:i}=this;this.canUndo()&&(i.push(JSON.stringify(t)),e(JSON.parse(n.pop())))}redo(t,e){const{undoItems:n,redoItems:i}=this;this.canRedo()&&(n.push(JSON.stringify(t)),e(JSON.parse(i.pop())))}}class Hh{constructor(){this.range=null,this.state="clear"}copy(t){return this.range=t,this.state="copy",this}cut(t){return this.range=t,this.state="cut",this}isCopy(){return"copy"===this.state}isCut(){return"cut"===this.state}isClear(){return"clear"===this.state}clear(){this.range=null,this.state="clear"}}class Wh{constructor(t,e,n){this.ci=t,this.operator=e,this.value=n}set(t,e){this.operator=t,this.value=e}includes(t){const{operator:e,value:n}=this;return"all"===e||"in"===e&&n.includes(t)}vlength(){const{operator:t,value:e}=this;return"in"===t?e.length:0}getData(){const{ci:t,operator:e,value:n}=this;return{ci:t,operator:e,value:n}}}class Bh{constructor(t,e){this.ci=t,this.order=e}asc(){return"asc"===this.order}desc(){return"desc"===this.order}}class Uh{constructor(){this.ref=null,this.filters=[],this.sort=null}setData({ref:t,filters:e,sort:n}){null!=t&&(this.ref=t,this.filters=e.map(t=>new Wh(t.ci,t.operator,t.value)),n&&(this.sort=new Bh(n.ci,n.order)))}getData(){if(this.active()){const{ref:t,filters:e,sort:n}=this;return{ref:t,filters:e.map(t=>t.getData()),sort:n}}return{}}addFilter(t,e,n){const i=this.getFilter(t);null==i?this.filters.push(new Wh(t,e,n)):i.set(e,n)}setSort(t,e){this.sort=e?new Bh(t,e):null}includes(t,e){return!!this.active()&&this.hrange().includes(t,e)}getSort(t){const{sort:e}=this;return e&&e.ci===t?e:null}getFilter(t){const{filters:e}=this;for(let n=0;n<e.length;n+=1)if(e[n].ci===t)return e[n];return null}filteredRows(t){const e=new Set,n=new Set;if(this.active()){const{sri:i,eri:r}=this.range(),{filters:o}=this;for(let s=i+1;s<=r;s+=1)for(let i=0;i<o.length;i+=1){const r=o[i],a=t(s,r.ci),l=a?a.text:"";if(!r.includes(l)){e.add(s);break}n.add(s)}}return{rset:e,fset:n}}items(t,e){const n={};if(this.active()){const{sri:i,eri:r}=this.range();for(let o=i+1;o<=r;o+=1){const i=e(o,t);if(null===i||/^\s*$/.test(i.text))n[""]=(n[""]||0)+1;else{const t=i.text,e=(n[t]||0)+1;n[t]=e}}}return n}range(){return zh.valueOf(this.ref)}hrange(){const t=this.range();return t.eri=t.sri,t}clear(){this.ref=null,this.filters=[],this.sort=null}active(){return null!==this.ref}}class qh{constructor(t=[]){this._=t}forEach(t){this._.forEach(t)}deleteWithin(t){this._=this._.filter(e=>!e.within(t))}getFirstIncludes(t,e){for(let n=0;n<this._.length;n+=1){const i=this._[n];if(i.includes(t,e))return i}return null}filterIntersects(t){return new qh(this._.filter(e=>e.intersects(t)))}intersects(t){for(let e=0;e<this._.length;e+=1)if(this._[e].intersects(t))return!0;return!1}union(t){let e=t;return this._.forEach(t=>{t.intersects(e)&&(e=t.union(e))}),e}add(t){this.deleteWithin(t),this._.push(t)}shift(t,e,n,i){this._.forEach(r=>{const{sri:o,sci:s,eri:a,eci:l}=r,c=r;"row"===t?o>=e?(c.sri+=n,c.eri+=n):o<e&&e<=a&&(c.eri+=n,i(o,s,n,0)):"column"===t&&(s>=e?(c.sci+=n,c.eci+=n):s<e&&e<=l&&(c.eci+=n,i(o,s,0,n)))})}move(t,e,n){this._.forEach(i=>{const r=i;r.within(t)&&(r.eri+=e,r.sri+=e,r.sci+=n,r.eci+=n)})}setData(t){return this._=t.map(t=>zh.valueOf(t)),this}getData(){return this._.map(t=>t.toString())}}const Gh=(t={},...e)=>(e.forEach(e=>{Object.keys(e).forEach(n=>{const i=e[n];"string"==typeof i||"number"==typeof i||"boolean"==typeof i?t[n]=i:"function"!=typeof i&&!Array.isArray(i)&&i instanceof Object?(t[n]=t[n]||{},Gh(t[n],i)):t[n]=i})}),t);function Yh(t){const e=""+t;let n=0,i=!1;for(let r=0;r<e.length;r+=1)!0===i&&(n+=1),"."===e.charAt(r)&&(i=!0);return n}function Xh(t,e,n){if(Number.isNaN(e)||Number.isNaN(n))return e+t+n;const i=Yh(e),r=Yh(n),o=Number(e),s=Number(n);let a=0;if("-"===t)a=o-s;else if("+"===t)a=o+s;else if("*"===t)a=o*s;else if("/"===t)return a=o/s,Yh(a)>5?a.toFixed(2):a;return a.toFixed(Math.max(i,r))}var Zh={cloneDeep:function(t){return JSON.parse(JSON.stringify(t))},merge:(...t)=>Gh({},...t),equals:function t(e,n){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!1;for(let r=0;r<i.length;r+=1){const o=i[r],s=e[o],a=n[o];if(void 0===a)return!1;if("string"==typeof s||"number"==typeof s||"boolean"==typeof s){if(s!==a)return!1}else if(Array.isArray(s)){if(s.length!==a.length)return!1;for(let e=0;e<s.length;e+=1)if(!t(s[e],a[e]))return!1}else if("function"!=typeof s&&!Array.isArray(s)&&s instanceof Object&&!t(s,a))return!1}return!0},arrayEquals:function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n+=1)if(t[n]!==e[n])return!1;return!0},sum:(t,e=(t=>t))=>{let n=0,i=0;return Object.keys(t).forEach(r=>{n+=e(t[r],r),i+=1}),[n,i]},rangeEach:function(t,e,n){for(let i=t;i<e;i+=1)n(i)},rangeSum:function(t,e,n){let i=0;for(let r=t;r<e;r+=1)i+=n(r);return i},rangeReduceIf:function(t,e,n,i,r,o){let s=n,a=i,l=t;for(;l<e&&!(s>r);l+=1)a=o(l),s+=a;return[l,s-a,a]},deleteProperty:function(t,e){const n=t[""+e];return delete t[""+e],n},numberCalc:Xh};class Kh{constructor({len:t,height:e}){this._={},this.len=t,this.height=e}getHeight(t){if(this.isHide(t))return 0;const e=this.get(t);return e&&e.height?e.height:this.height}setHeight(t,e){this.getOrNew(t).height=e}unhide(t){let e=t;for(;e>0&&(e-=1,this.isHide(e));)this.setHide(e,!1)}isHide(t){const e=this.get(t);return e&&e.hide}setHide(t,e){const n=this.getOrNew(t);!0===e?n.hide=!0:delete n.hide}setStyle(t,e){this.getOrNew(t).style=e}sumHeight(t,e,n){return Zh.rangeSum(t,e,t=>n&&n.has(t)?0:this.getHeight(t))}totalHeight(){return this.sumHeight(0,this.len)}get(t){return this._[t]}getOrNew(t){return this._[t]=this._[t]||{cells:{}},this._[t]}getCell(t,e){const n=this.get(t);return void 0!==n&&void 0!==n.cells&&void 0!==n.cells[e]?n.cells[e]:null}getCellMerge(t,e){const n=this.getCell(t,e);return n&&n.merge?n.merge:[0,0]}getCellOrNew(t,e){const n=this.getOrNew(t);return n.cells[e]=n.cells[e]||{},n.cells[e]}setCell(t,e,n,i="all"){const r=this.getOrNew(t);"all"===i?r.cells[e]=n:"text"===i?(r.cells[e]=r.cells[e]||{},r.cells[e].text=n.text):"format"===i&&(r.cells[e]=r.cells[e]||{},r.cells[e].style=n.style,n.merge&&(r.cells[e].merge=n.merge))}setCellText(t,e,n){this.getCellOrNew(t,e).text=n}copyPaste(t,e,n,i=!1,r=(()=>{})){const{sri:o,sci:s,eri:a,eci:l}=t,c=e.sri,u=e.sci,h=e.eri,d=e.eci,[f,p]=t.size(),[g,m]=e.size();let v=!0,b=0;(h<o||d<s)&&(v=!1,b=h<o?g:m);for(let y=o;y<=a;y+=1)if(this._[y])for(let t=s;t<=l;t+=1)if(this._[y].cells&&this._[y].cells[t])for(let e=c;e<=h;e+=f)for(let g=u;g<=d;g+=p){const m=e+(y-o),w=g+(t-s),x=Zh.cloneDeep(this._[y].cells[t]);if(i&&x&&x.text&&x.text.length>0){const{text:t}=x;let n=g-u+(e-c)+2;if(v||(n-=b+1),"="===t[0])x.text=t.replace(/[a-zA-Z]{1,3}\d+/g,t=>{let[e,i]=[0,0];return o===c?e=n-1:i=n-1,/^\d+$/.test(t)?t:Nh(t,e,i)});else if(f<=1&&p>1&&(c>a||h<o)||p<=1&&f>1&&(u>l||d<s)||f<=1&&p<=1){const e=/[\\.\d]+$/.exec(t);if(null!==e){const i=Number(e[0])+n-1;x.text=t.substring(0,e.index)+i}}}this.setCell(m,w,x,n),r(m,w,x)}}cutPaste(t,e){const n={};this.each(i=>{this.eachCells(i,r=>{let o=parseInt(i,10),s=parseInt(r,10);t.includes(i,r)&&(o=e.sri+(o-t.sri),s=e.sci+(s-t.sci)),n[o]=n[o]||{cells:{}},n[o].cells[s]=this._[i].cells[r]})}),this._=n}paste(t,e){if(t.length<=0)return;const{sri:n,sci:i}=e;t.forEach((t,e)=>{const r=n+e;t.forEach((t,e)=>{const n=i+e;this.setCellText(r,n,t)})})}insert(t,e=1){const n={};this.each((i,r)=>{let o=parseInt(i,10);o>=t&&(o+=e,this.eachCells(i,(n,i)=>{i.text&&"="===i.text[0]&&(i.text=i.text.replace(/[a-zA-Z]{1,3}\d+/g,n=>Nh(n,0,e,(e,n)=>n>=t)))})),n[o]=r}),this._=n,this.len+=e}delete(t,e){const n=e-t+1,i={};this.each((r,o)=>{const s=parseInt(r,10);s<t?i[s]=o:r>e&&(i[s-n]=o,this.eachCells(r,(t,i)=>{i.text&&"="===i.text[0]&&(i.text=i.text.replace(/[a-zA-Z]{1,3}\d+/g,t=>Nh(t,0,-n,(t,n)=>n>e)))}))}),this._=i,this.len-=n}insertColumn(t,e=1){this.each((n,i)=>{const r={};this.eachCells(n,(n,i)=>{let o=parseInt(n,10);o>=t&&(o+=e,i.text&&"="===i.text[0]&&(i.text=i.text.replace(/[a-zA-Z]{1,3}\d+/g,n=>Nh(n,e,0,e=>e>=t)))),r[o]=i}),i.cells=r})}deleteColumn(t,e){const n=e-t+1;this.each((i,r)=>{const o={};this.eachCells(i,(i,r)=>{const s=parseInt(i,10);s<t?o[s]=r:s>e&&(o[s-n]=r,r.text&&"="===r.text[0]&&(r.text=r.text.replace(/[a-zA-Z]{1,3}\d+/g,t=>Nh(t,-n,0,t=>t>e))))}),r.cells=o})}deleteCells(t,e="all"){t.each((t,n)=>{this.deleteCell(t,n,e)})}deleteCell(t,e,n="all"){const i=this.get(t);if(null!==i){const r=this.getCell(t,e);null!==r&&("all"===n?delete i.cells[e]:"text"===n?(r.text&&delete r.text,r.value&&delete r.value):"format"===n?(void 0!==r.style&&delete r.style,r.merge&&delete r.merge):"merge"===n&&r.merge&&delete r.merge)}}maxCell(){const t=Object.keys(this._),e=t[t.length-1],n=this._[e];if(n){const{cells:t}=n,i=Object.keys(t),r=i[i.length-1];return[parseInt(e,10),parseInt(r,10)]}return[0,0]}each(t){Object.entries(this._).forEach(([e,n])=>{t(e,n)})}eachCells(t,e){this._[t]&&this._[t].cells&&Object.entries(this._[t].cells).forEach(([t,n])=>{e(t,n)})}setData(t){t.len&&(this.len=t.len,delete t.len),this._=t}getData(){const{len:t}=this;return Object.assign({len:t},this._)}}class Qh{constructor({len:t,width:e,indexWidth:n,minWidth:i}){this._={},this.len=t,this.width=e,this.indexWidth=n,this.minWidth=i}setData(t){t.len&&(this.len=t.len,delete t.len),this._=t}getData(){const{len:t}=this;return Object.assign({len:t},this._)}getWidth(t){if(this.isHide(t))return 0;const e=this._[t];return e&&e.width?e.width:this.width}getOrNew(t){return this._[t]=this._[t]||{},this._[t]}setWidth(t,e){this.getOrNew(t).width=e}unhide(t){let e=t;for(;e>0&&(e-=1,this.isHide(e));)this.setHide(e,!1)}isHide(t){const e=this._[t];return e&&e.hide}setHide(t,e){const n=this.getOrNew(t);!0===e?n.hide=!0:delete n.hide}setStyle(t,e){this.getOrNew(t).style=e}sumWidth(t,e){return Zh.rangeSum(t,e,t=>this.getWidth(t))}totalWidth(){return this.sumWidth(0,this.len)}}let Jh=["en"];const td={en:{toolbar:{undo:"Undo",redo:"Redo",print:"Print",paintformat:"Paint format",clearformat:"Clear format",format:"Format",fontName:"Font",fontSize:"Font size",fontBold:"Font bold",fontItalic:"Font italic",underline:"Underline",strike:"Strike",color:"Text color",bgcolor:"Fill color",border:"Borders",merge:"Merge cells",align:"Horizontal align",valign:"Vertical align",textwrap:"Text wrapping",freeze:"Freeze cell",autofilter:"Filter",formula:"Functions",more:"More"},contextmenu:{copy:"Copy",cut:"Cut",paste:"Paste",pasteValue:"Paste values only",pasteFormat:"Paste format only",hide:"Hide",insertRow:"Insert row",insertColumn:"Insert column",deleteSheet:"Delete",deleteRow:"Delete row",deleteColumn:"Delete column",deleteCell:"Delete cell",deleteCellText:"Delete cell text",validation:"Data validations",cellprintable:"Enable export",cellnonprintable:"Disable export",celleditable:"Enable editing",cellnoneditable:"Disable editing"},print:{size:"Paper size",orientation:"Page orientation",orientations:["Landscape","Portrait"]},format:{normal:"Normal",text:"Plain Text",number:"Number",percent:"Percent",rmb:"RMB",usd:"USD",eur:"EUR",date:"Date",time:"Time",datetime:"Date time",duration:"Duration"},formula:{sum:"Sum",average:"Average",max:"Max",min:"Min",_if:"IF",and:"AND",or:"OR",concat:"Concat"},validation:{required:"it must be required",notMatch:"it not match its validation rule",between:"it is between {} and {}",notBetween:"it is not between {} and {}",notIn:"it is not in list",equal:"it equal to {}",notEqual:"it not equal to {}",lessThan:"it less than {}",lessThanEqual:"it less than or equal to {}",greaterThan:"it greater than {}",greaterThanEqual:"it greater than or equal to {}"},error:{pasteForMergedCell:"Unable to do this for merged cells"},calendar:{weeks:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"]},button:{next:"Next",cancel:"Cancel",remove:"Remove",save:"Save",ok:"OK"},sort:{desc:"Sort Z -> A",asc:"Sort A -> Z"},filter:{empty:"empty"},dataValidation:{mode:"Mode",range:"Cell Range",criteria:"Criteria",modeType:{cell:"Cell",column:"Colun",row:"Row"},type:{list:"List",number:"Number",date:"Date",phone:"Phone",email:"Email"},operator:{be:"between",nbe:"not betwwen",lt:"less than",lte:"less than or equal to",gt:"greater than",gte:"greater than or equal to",eq:"equal to",neq:"not equal to"}}}};function ed(t,e){if(e)for(const n of Jh){if(!e[n])break;let i=e[n];const r=t.match(/(?:\\.|[^.])+/g);for(let t=0;t<r.length;t+=1){const e=i[r[t]];if(!e)break;if(t===r.length-1)return e;i=e}}}function nd(t){let e=ed(t,td);return!e&&window&&window.x_spreadsheet&&window.x_spreadsheet.$messages&&(e=ed(t,window.x_spreadsheet.$messages)),e||""}function id(t){return()=>nd(t)}function rd(t,e,n=!1){n?Jh=[t]:Jh.unshift(t),e&&(td[t]=e)}const od={phone:/^[1-9]\d{10}$/,email:/w+([-+.]w+)*@w+([-.]w+)*.w+([-.]w+)*/};function sd(t,e,...n){let i="";return t||(i=nd("validation."+e,...n)),[t,i]}class ad{constructor(t,e,n,i){this.required=e,this.value=n,this.type=t,this.operator=i,this.message=""}parseValue(t){const{type:e}=this;return"date"===e?new Date(t):"number"===e?Number(t):t}equals(t){let e=this.type===t.type&&this.required===t.required&&this.operator===t.operator;return e&&(e=Array.isArray(this.value)?Zh.arrayEquals(this.value,t.value):this.value===t.value),e}values(){return this.value.split(",")}validate(t){const{required:e,operator:n,value:i,type:r}=this;if(e&&/^\s*$/.test(t))return sd(!1,"required");if(/^\s*$/.test(t))return[!0];if(od[r]&&!od[r].test(t))return sd(!1,"notMatch");if("list"===r)return sd(this.values().includes(t),"notIn");if(n){const e=this.parseValue(t);if("be"===n){const[t,n]=i;return sd(e>=this.parseValue(t)&&e<=this.parseValue(n),"between",t,n)}if("nbe"===n){const[t,n]=i;return sd(e<this.parseValue(t)||e>this.parseValue(n),"notBetween",t,n)}if("eq"===n)return sd(e===this.parseValue(i),"equal",i);if("neq"===n)return sd(e!==this.parseValue(i),"notEqual",i);if("lt"===n)return sd(e<this.parseValue(i),"lessThan",i);if("lte"===n)return sd(e<=this.parseValue(i),"lessThanEqual",i);if("gt"===n)return sd(e>this.parseValue(i),"greaterThan",i);if("gte"===n)return sd(e>=this.parseValue(i),"greaterThanEqual",i)}return[!0]}}class ld{constructor(t,e,n){this.refs=e,this.mode=t,this.validator=n}includes(t,e){const{refs:n}=this;for(let i=0;i<n.length;i+=1)if(zh.valueOf(n[i]).includes(t,e))return!0;return!1}addRef(t){this.remove(zh.valueOf(t)),this.refs.push(t)}remove(t){const e=[];this.refs.forEach(n=>{const i=zh.valueOf(n);i.intersects(t)?i.difference(t).forEach(t=>e.push(t.toString())):e.push(n)}),this.refs=e}getData(){const{refs:t,mode:e,validator:n}=this,{type:i,required:r,operator:o,value:s}=n;return{refs:t,mode:e,type:i,required:r,operator:o,value:s}}static valueOf({refs:t,mode:e,type:n,required:i,operator:r,value:o}){return new ld(e,t,new ad(n,i,o,r))}}class cd{constructor(){this._=[],this.errors=new Map}getError(t,e){return this.errors.get(`${t}_${e}`)}validate(t,e,n){const i=this.get(t,e),r=`${t}_${e}`,{errors:o}=this;if(null!==i){const[t,e]=i.validator.validate(n);t?o.delete(r):o.set(r,e)}else o.delete(r);return!0}add(t,e,{type:n,required:i,value:r,operator:o}){const s=new ad(n,i,r,o),a=this.getByValidator(s);null!==a?a.addRef(e):this._.push(new ld(t,[e],s))}getByValidator(t){for(let e=0;e<this._.length;e+=1){const n=this._[e];if(n.validator.equals(t))return n}return null}get(t,e){for(let n=0;n<this._.length;n+=1){const i=this._[n];if(i.includes(t,e))return i}return null}remove(t){this.each(e=>{e.remove(t)})}each(t){this._.forEach(e=>t(e))}getData(){return this._.filter(t=>t.refs.length>0).map(t=>t.getData())}setData(t){this._=t.map(t=>ld.valueOf(t))}}const ud={mode:"edit",view:{height:()=>document.documentElement.clientHeight,width:()=>document.documentElement.clientWidth},showGrid:!0,showToolbar:!0,showContextmenu:!0,row:{len:100,height:25},col:{len:26,width:100,indexWidth:60,minWidth:60},style:{bgcolor:"#ffffff",align:"left",valign:"middle",textwrap:!1,strike:!1,underline:!1,color:"#0a0a0a",font:{name:"Arial",size:10,bold:!1,italic:!1},format:"normal"}};function hd(t,e,n=(()=>{})){const{merges:i}=this,r=e.clone(),[o,s]=t.size(),[a,l]=e.size();return o>a&&(r.eri=e.sri+o-1),s>l&&(r.eci=e.sci+s-1),!i.intersects(r)||(n(nd("error.pasteForMergedCell")),!1)}function dd(t,e,n,i=!1){const{rows:r,merges:o}=this;"all"!==n&&"format"!==n||(r.deleteCells(e,n),o.deleteWithin(e)),r.copyPaste(t,e,n,i,(t,e,n)=>{if(n&&n.merge){const[i,r]=n.merge;if(i<=0&&r<=0)return;o.add(new zh(t,e,t+i,e+r))}})}function fd(t,e){const{clipboard:n,rows:i,merges:r}=this;i.cutPaste(t,e),r.move(t,e.sri-t.sri,e.sci-t.sci),n.clear()}function pd(t,e,n){const{styles:i,rows:r}=this,o=r.getCellOrNew(t,e);let s={};void 0!==o.style&&(s=Zh.cloneDeep(i[o.style])),s=Zh.merge(s,{border:n}),o.style=this.addStyle(s)}function gd({mode:t,style:e,color:n}){const{styles:i,selector:r,rows:o}=this,{sri:s,sci:a,eri:l,eci:c}=r.range,u=!this.isSignleSelected();if(u||"inside"!==t&&"horizontal"!==t&&"vertical"!==t)if("outside"!==t||u){if("none"===t)r.range.each((t,e)=>{const n=o.getCell(t,e);if(n&&void 0!==n.style){const t=Zh.cloneDeep(i[n.style]);delete t.border,n.style=this.addStyle(t)}});else if("all"===t||"inside"===t||"outside"===t||"horizontal"===t||"vertical"===t){const i=[];for(let r=s;r<=l;r+=1)for(let h=a;h<=c;h+=1){const d=[];for(let t=0;t<i.length;t+=1){const[e,n,o,s]=i[t];if(r===e+o+1&&d.push(t),e<=r&&r<=e+o&&h===n){h+=s+1;break}}if(d.forEach(t=>i.splice(t,1)),h>c)break;const f=o.getCell(r,h);let[p,g]=[0,0];f&&f.merge&&([p,g]=f.merge,i.push([r,h,p,g]));const m=p>0&&r+p===l,v=g>0&&h+g===c;let b={};"all"===t?b={bottom:[e,n],top:[e,n],left:[e,n],right:[e,n]}:"inside"===t?(!v&&h<c&&(b.right=[e,n]),!m&&r<l&&(b.bottom=[e,n])):"horizontal"===t?!m&&r<l&&(b.bottom=[e,n]):"vertical"===t?!v&&h<c&&(b.right=[e,n]):"outside"===t&&u&&(s===r&&(b.top=[e,n]),(m||l===r)&&(b.bottom=[e,n]),a===h&&(b.left=[e,n]),(v||c===h)&&(b.right=[e,n])),Object.keys(b).length>0&&pd.call(this,r,h,b),h+=g}}else if("top"===t||"bottom"===t)for(let h=a;h<=c;h+=1)"top"===t&&(pd.call(this,s,h,{top:[e,n]}),h+=o.getCellMerge(s,h)[1]),"bottom"===t&&(pd.call(this,l,h,{bottom:[e,n]}),h+=o.getCellMerge(l,h)[1]);else if("left"===t||"right"===t)for(let h=s;h<=l;h+=1)"left"===t&&(pd.call(this,h,a,{left:[e,n]}),h+=o.getCellMerge(h,a)[0]),"right"===t&&(pd.call(this,h,c,{right:[e,n]}),h+=o.getCellMerge(h,c)[0])}else pd.call(this,s,a,{top:[e,n],bottom:[e,n],left:[e,n],right:[e,n]})}function md(t,e){const{rows:n}=this,i=this.freezeTotalHeight();let r=n.height;i+n.height<t&&(r-=e);const o=this.exceptRowSet;let s=0,a=r,{height:l}=n;for(;s<n.len&&!(a>t);s+=1)o.has(s)||(l=n.getHeight(s),a+=l);return a-=l,a<=0?{ri:-1,top:0,height:l}:{ri:s-1,top:a,height:l}}function vd(t,e){const{cols:n}=this,i=this.freezeTotalWidth();let r=n.indexWidth;i+n.indexWidth<t&&(r-=e);const[o,s,a]=Zh.rangeReduceIf(0,n.len,r,n.indexWidth,t,t=>n.getWidth(t));return s<=0?{ci:-1,left:0,width:n.indexWidth}:{ci:o-1,left:s,width:a}}class bd{constructor(t,e){this.settings=Zh.merge(ud,e||{}),this.name=t||"sheet",this.freeze=[0,0],this.styles=[],this.merges=new qh,this.rows=new Kh(this.settings.row),this.cols=new Qh(this.settings.col),this.validations=new cd,this.hyperlinks={},this.comments={},this.selector=new Fh,this.scroll=new $h,this.history=new Vh,this.clipboard=new Hh,this.autoFilter=new Uh,this.change=()=>{},this.exceptRowSet=new Set,this.sortedRowMap=new Map,this.unsortedRowMap=new Map}addValidation(t,e,n){this.changeData(()=>{this.validations.add(t,e,n)})}removeValidation(){const{range:t}=this.selector;this.changeData(()=>{this.validations.remove(t)})}getSelectedValidator(){const{ri:t,ci:e}=this.selector,n=this.validations.get(t,e);return n?n.validator:null}getSelectedValidation(){const{ri:t,ci:e,range:n}=this.selector,i=this.validations.get(t,e),r={ref:n.toString()};return null!==i&&(r.mode=i.mode,r.validator=i.validator),r}canUndo(){return this.history.canUndo()}canRedo(){return this.history.canRedo()}undo(){this.history.undo(this.getData(),t=>{this.setData(t)})}redo(){this.history.redo(this.getData(),t=>{this.setData(t)})}copy(){this.clipboard.copy(this.selector.range)}cut(){this.clipboard.cut(this.selector.range)}paste(t="all",e=(()=>{})){const{clipboard:n,selector:i}=this;return!n.isClear()&&!!hd.call(this,n.range,i.range,e)&&(this.changeData(()=>{n.isCopy()?dd.call(this,n.range,i.range,t):n.isCut()&&fd.call(this,n.range,i.range)}),!0)}pasteFromText(t){const e=t.split("\r\n").map(t=>t.replace(/"/g,"").split("\t"));e.length>0&&(e.length-=1);const{rows:n,selector:i}=this;this.changeData(()=>{n.paste(e,i.range)})}autofill(t,e,n=(()=>{})){const i=this.selector.range;return!!hd.call(this,i,t,n)&&(this.changeData(()=>{dd.call(this,i,t,e,!0)}),!0)}clearClipboard(){this.clipboard.clear()}calSelectedRangeByEnd(t,e){const{selector:n,rows:i,cols:r,merges:o}=this;let{sri:s,sci:a,eri:l,eci:c}=n.range;const u=n.ri,h=n.ci;let[d,f]=[t,e];return t<0&&(d=i.len-1),e<0&&(f=r.len-1),[s,l]=d>u?[u,d]:[d,u],[a,c]=f>h?[h,f]:[f,h],n.range=o.union(new zh(s,a,l,c)),n.range=o.union(n.range),n.range}calSelectedRangeByStart(t,e){const{selector:n,rows:i,cols:r,merges:o}=this;let s=o.getFirstIncludes(t,e);return null===s&&(s=new zh(t,e,t,e),-1===t&&(s.sri=0,s.eri=i.len-1),-1===e&&(s.sci=0,s.eci=r.len-1)),n.range=s,s}setSelectedCellAttr(t,e){this.changeData(()=>{const{selector:n,styles:i,rows:r}=this;if("merge"===t)e?this.merge():this.unmerge();else if("border"===t)gd.call(this,e);else if("formula"===t){const{ri:t,ci:i,range:o}=n;if(n.multiple()){const[i,s]=n.size(),{sri:a,sci:l,eri:c,eci:u}=o;if(i>1)for(let t=l;t<=u;t+=1)r.getCellOrNew(c+1,t).text=`=${e}(${Lh(t,a)}:${Lh(t,c)})`;else s>1&&(r.getCellOrNew(t,u+1).text=`=${e}(${Lh(l,t)}:${Lh(u,t)})`)}else r.getCellOrNew(t,i).text=`=${e}()`}else n.range.each((n,o)=>{const s=r.getCellOrNew(n,o);let a={};if(void 0!==s.style&&(a=Zh.cloneDeep(i[s.style])),"format"===t)a.format=e,s.style=this.addStyle(a);else if("font-bold"===t||"font-italic"===t||"font-name"===t||"font-size"===t){const n={};n[t.split("-")[1]]=e,a.font=Object.assign(a.font||{},n),s.style=this.addStyle(a)}else"strike"===t||"textwrap"===t||"underline"===t||"align"===t||"valign"===t||"color"===t||"bgcolor"===t?(a[t]=e,s.style=this.addStyle(a)):s[t]=e})})}setSelectedCellText(t,e="input"){const{autoFilter:n,selector:i,rows:r}=this,{ri:o,ci:s}=i;let a=o;this.unsortedRowMap.has(o)&&(a=this.unsortedRowMap.get(o));const l=r.getCell(a,s),c=l?l.text:"";if(this.setCellText(a,s,t,e),n.active()){const e=n.getFilter(s);if(e){const n=e.value.findIndex(t=>t===c);n>=0&&e.value.splice(n,1,t)}}}getSelectedCell(){const{ri:t,ci:e}=this.selector;let n=t;return this.unsortedRowMap.has(t)&&(n=this.unsortedRowMap.get(t)),this.rows.getCell(n,e)}xyInSelectedRect(t,e){const{left:n,top:i,width:r,height:o}=this.getSelectedRect(),s=t-this.cols.indexWidth,a=e-this.rows.height;return s>n&&s<n+r&&a>i&&a<i+o}getSelectedRect(){return this.getRect(this.selector.range)}getClipboardRect(){const{clipboard:t}=this;return t.isClear()?{left:-100,top:-100}:this.getRect(t.range)}getRect(t){const{scroll:e,rows:n,cols:i,exceptRowSet:r}=this,{sri:o,sci:s,eri:a,eci:l}=t;if(o<0&&s<0)return{left:0,l:0,top:0,t:0,scroll:e};const c=i.sumWidth(0,s),u=n.sumHeight(0,o,r),h=n.sumHeight(o,a+1,r),d=i.sumWidth(s,l+1);let f=c-e.x,p=u-e.y;const g=this.freezeTotalHeight(),m=this.freezeTotalWidth();return m>0&&m>c&&(f=c),g>0&&g>u&&(p=u),{l:c,t:u,left:f,top:p,height:h,width:d,scroll:e}}getCellRectByXY(t,e){const{scroll:n,merges:i,rows:r,cols:o}=this;let{ri:s,top:a,height:l}=md.call(this,e,n.y),{ci:c,left:u,width:h}=vd.call(this,t,n.x);if(-1===c&&(h=o.totalWidth()),-1===s&&(l=r.totalHeight()),s>=0||c>=0){const t=i.getFirstIncludes(s,c);t&&(s=t.sri,c=t.sci,({left:u,top:a,width:h,height:l}=this.cellRect(s,c)))}return{ri:s,ci:c,left:u,top:a,width:h,height:l}}isSignleSelected(){const{sri:t,sci:e,eri:n,eci:i}=this.selector.range,r=this.getCell(t,e);if(r&&r.merge){const[o,s]=r.merge;if(t+o===n&&e+s===i)return!0}return!this.selector.multiple()}canUnmerge(){const{sri:t,sci:e,eri:n,eci:i}=this.selector.range,r=this.getCell(t,e);if(r&&r.merge){const[o,s]=r.merge;if(t+o===n&&e+s===i)return!0}return!1}merge(){const{selector:t,rows:e}=this;if(this.isSignleSelected())return;const[n,i]=t.size();if(n>1||i>1){const{sri:r,sci:o}=t.range;this.changeData(()=>{const s=e.getCellOrNew(r,o);s.merge=[n-1,i-1],this.merges.add(t.range),this.rows.deleteCells(t.range),this.rows.setCell(r,o,s)})}}unmerge(){const{selector:t}=this;if(!this.isSignleSelected())return;const{sri:e,sci:n}=t.range;this.changeData(()=>{this.rows.deleteCell(e,n,"merge"),this.merges.deleteWithin(t.range)})}canAutofilter(){return!this.autoFilter.active()}autofilter(){const{autoFilter:t,selector:e}=this;this.changeData(()=>{t.active()?(t.clear(),this.exceptRowSet=new Set,this.sortedRowMap=new Map,this.unsortedRowMap=new Map):t.ref=e.range.toString()})}setAutoFilter(t,e,n,i){const{autoFilter:r}=this;r.addFilter(t,n,i),r.setSort(t,e),this.resetAutoFilter()}resetAutoFilter(){const{autoFilter:t,rows:e}=this;if(!t.active())return;const{sort:n}=t,{rset:i,fset:r}=t.filteredRows((t,n)=>e.getCell(t,n)),o=Array.from(r),s=Array.from(r);n&&o.sort((t,e)=>"asc"===n.order?t-e:"desc"===n.order?e-t:0),this.exceptRowSet=i,this.sortedRowMap=new Map,this.unsortedRowMap=new Map,o.forEach((t,e)=>{this.sortedRowMap.set(s[e],t),this.unsortedRowMap.set(t,s[e])})}deleteCell(t="all"){const{selector:e}=this;this.changeData(()=>{this.rows.deleteCells(e.range,t),"all"!==t&&"format"!==t||this.merges.deleteWithin(e.range)})}insert(t,e=1){this.changeData(()=>{const{sri:n,sci:i}=this.selector.range,{rows:r,merges:o,cols:s}=this;let a=n;"row"===t?r.insert(n,e):"column"===t&&(r.insertColumn(i,e),a=i,s.len+=1),o.shift(t,a,e,(t,e,n,i)=>{const o=r.getCell(t,e);o.merge[0]+=n,o.merge[1]+=i})})}delete(t){this.changeData(()=>{const{rows:e,merges:n,selector:i,cols:r}=this,{range:o}=i,{sri:s,sci:a,eri:l,eci:c}=i.range,[u,h]=i.range.size();let d=s,f=u;"row"===t?e.delete(s,l):"column"===t&&(e.deleteColumn(a,c),d=o.sci,f=h,r.len-=1),n.shift(t,d,-f,(t,n,i,r)=>{const o=e.getCell(t,n);o.merge[0]+=i,o.merge[1]+=r,0===o.merge[0]&&0===o.merge[1]&&delete o.merge})})}scrollx(t,e){const{scroll:n,freeze:i,cols:r}=this,[,o]=i,[s,a,l]=Zh.rangeReduceIf(o,r.len,0,0,t,t=>r.getWidth(t));let c=a;t>0&&(c+=l),n.x!==c&&(n.ci=t>0?s:0,n.x=c,e())}scrolly(t,e){const{scroll:n,freeze:i,rows:r}=this,[o]=i,[s,a,l]=Zh.rangeReduceIf(o,r.len,0,0,t,t=>r.getHeight(t));let c=a;t>0&&(c+=l),n.y!==c&&(n.ri=t>0?s:0,n.y=c,e())}cellRect(t,e){const{rows:n,cols:i}=this,r=i.sumWidth(0,e),o=n.sumHeight(0,t),s=n.getCell(t,e);let a=i.getWidth(e),l=n.getHeight(t);if(null!==s&&s.merge){const[r,o]=s.merge;if(r>0)for(let e=1;e<=r;e+=1)l+=n.getHeight(t+e);if(o>0)for(let t=1;t<=o;t+=1)a+=i.getWidth(e+t)}return{left:r,top:o,width:a,height:l,cell:s}}getCell(t,e){return this.rows.getCell(t,e)}getCellTextOrDefault(t,e){const n=this.getCell(t,e);return n&&n.text?n.text:""}getCellStyle(t,e){const n=this.getCell(t,e);return n&&void 0!==n.style?this.styles[n.style]:null}getCellStyleOrDefault(t,e){const{styles:n,rows:i}=this,r=i.getCell(t,e),o=r&&void 0!==r.style?n[r.style]:{};return Zh.merge(this.defaultStyle(),o)}getSelectedCellStyle(){const{ri:t,ci:e}=this.selector;return this.getCellStyleOrDefault(t,e)}setCellText(t,e,n,i){const{rows:r,history:o,validations:s}=this;"finished"===i?(r.setCellText(t,e,""),o.add(this.getData()),r.setCellText(t,e,n)):(r.setCellText(t,e,n),this.change(this.getData())),s.validate(t,e,n)}freezeIsActive(){const[t,e]=this.freeze;return t>0||e>0}setFreeze(t,e){this.changeData(()=>{this.freeze=[t,e]})}freezeTotalWidth(){return this.cols.sumWidth(0,this.freeze[1])}freezeTotalHeight(){return this.rows.sumHeight(0,this.freeze[0])}setRowHeight(t,e){this.changeData(()=>{this.rows.setHeight(t,e)})}setColWidth(t,e){this.changeData(()=>{this.cols.setWidth(t,e)})}viewHeight(){const{view:t,showToolbar:e}=this.settings;let n=t.height();return n-=41,e&&(n-=41),n}viewWidth(){return this.settings.view.width()}freezeViewRange(){const[t,e]=this.freeze;return new zh(0,0,t-1,e-1,this.freezeTotalWidth(),this.freezeTotalHeight())}contentRange(){const{rows:t,cols:e}=this,[n,i]=t.maxCell(),r=t.sumHeight(0,n+1),o=e.sumWidth(0,i+1);return new zh(0,0,n,i,o,r)}exceptRowTotalHeight(t,e){const{exceptRowSet:n,rows:i}=this,r=Array.from(n);let o=0;return r.forEach(n=>{if(n<t||n>e){const t=i.getHeight(n);o+=t}}),o}viewRange(){const{scroll:t,rows:e,cols:n,freeze:i,exceptRowSet:r}=this;let{ri:o,ci:s}=t;o<=0&&([o]=i),s<=0&&([,s]=i);let[a,l]=[0,0],[c,u]=[e.len,n.len];for(let h=o;h<e.len&&(r.has(h)||(l+=e.getHeight(h),c=h),!(l>this.viewHeight()));h+=1);for(let h=s;h<n.len&&(a+=n.getWidth(h),u=h,!(a>this.viewWidth()));h+=1);return new zh(o,s,c,u,a,l)}eachMergesInView(t,e){this.merges.filterIntersects(t).forEach(t=>e(t))}hideRowsOrCols(){const{rows:t,cols:e,selector:n}=this,[i,r]=n.size(),{sri:o,sci:s,eri:a,eci:l}=n.range;if(i===t.len)for(let c=s;c<=l;c+=1)e.setHide(c,!0);else if(r===e.len)for(let c=o;c<=a;c+=1)t.setHide(c,!0)}unhideRowsOrCols(t,e){this[t+"s"].unhide(e)}rowEach(t,e,n){let i=0;const{rows:r}=this,o=this.exceptRowSet,s=[...o];let a=0;for(let l=0;l<s.length;l+=1)s[l]<t&&(a+=1);for(let l=t+a;l<=e+a;l+=1)if(o.has(l))a+=1;else{const t=r.getHeight(l);if(t>0&&(n(l,i,t),i+=t,i>this.viewHeight()))break}}colEach(t,e,n){let i=0;const{cols:r}=this;for(let o=t;o<=e;o+=1){const t=r.getWidth(o);if(t>0&&(n(o,i,t),i+=t,i>this.viewWidth()))break}}defaultStyle(){return this.settings.style}addStyle(t){const{styles:e}=this;for(let n=0;n<e.length;n+=1){const i=e[n];if(Zh.equals(i,t))return n}return e.push(t),e.length-1}changeData(t){this.history.add(this.getData()),t(),this.change(this.getData())}setData(t){return Object.keys(t).forEach(e=>{if("merges"===e||"rows"===e||"cols"===e||"validations"===e)this[e].setData(t[e]);else if("freeze"===e){const[n,i]=Rh(t[e]);this.freeze=[i,n]}else"autofilter"===e?this.autoFilter.setData(t[e]):void 0!==t[e]&&(this[e]=t[e])}),this}getData(){const{name:t,freeze:e,styles:n,merges:i,rows:r,cols:o,validations:s,autoFilter:a}=this;return{name:t,freeze:Lh(e[1],e[0]),styles:n,merges:i.getData(),rows:r.getData(),cols:o.getData(),validations:s.getData(),autofilter:a.getData()}}}function yd(t,e,n){t.addEventListener(e,n)}function wd(t,e,n){t.removeEventListener(e,n)}function xd(t){t.xclickoutside&&(wd(window.document.body,"click",t.xclickoutside),delete t.xclickoutside)}function Sd(t,e){t.xclickoutside=n=>{2===n.detail||t.contains(n.target)||(e?e(t):(t.hide(),xd(t)))},yd(window.document.body,"click",t.xclickoutside)}function kd(t,e,n){yd(t,"mousemove",e),t.xEvtUp=i=>{wd(t,"mousemove",e),wd(t,"mouseup",t.xEvtUp),n(i)},yd(t,"mouseup",t.xEvtUp)}function Ed(t,e,n,i){let r="";Math.abs(t)>Math.abs(e)?(r=t>0?"right":"left",i(r,t,n)):(r=e>0?"down":"up",i(r,e,n))}const Od="x-spreadsheet";class Cd{constructor(t=!1,e){this.moving=!1,this.vertical=t,this.el=Ah("div",`${Od}-resizer ${t?"vertical":"horizontal"}`).children(this.unhideHoverEl=Ah("div",Od+"-resizer-hover").on("dblclick.stop",t=>this.mousedblclickHandler(t)).css("position","absolute").hide(),this.hoverEl=Ah("div",Od+"-resizer-hover").on("mousedown.stop",t=>this.mousedownHandler(t)),this.lineEl=Ah("div",Od+"-resizer-line").hide()).hide(),this.cRect=null,this.finishedFn=null,this.minDistance=e,this.unhideFn=()=>{}}showUnhide(t){this.unhideIndex=t,this.unhideHoverEl.show()}hideUnhide(){this.unhideHoverEl.hide()}show(t,e){const{moving:n,vertical:i,hoverEl:r,lineEl:o,el:s,unhideHoverEl:a}=this;if(n)return;this.cRect=t;const{left:l,top:c,width:u,height:h}=t;s.offset({left:i?l+u-5:l,top:i?c:c+h-5}).show(),r.offset({width:i?5:u,height:i?h:5}),o.offset({width:i?0:e.width,height:i?e.height:0}),a.offset({left:i?5-u:l,top:i?c:5-h,width:i?5:u,height:i?h:5})}hide(){this.el.offset({left:0,top:0}).hide(),this.hideUnhide()}mousedblclickHandler(){this.unhideIndex&&this.unhideFn(this.unhideIndex)}mousedownHandler(t){let e=t;const{el:n,lineEl:i,cRect:r,vertical:o,minDistance:s}=this;let a=o?r.width:r.height;i.show(),kd(window,t=>{this.moving=!0,null!==e&&1===t.buttons&&(o?(a+=t.movementX,a>s&&n.css("left",r.left+a+"px")):(a+=t.movementY,a>s&&n.css("top",r.top+a+"px")),e=t)},()=>{e=null,i.hide(),this.moving=!1,this.hide(),this.finishedFn&&(a<s&&(a=s),this.finishedFn(r,a))})}}class jd{constructor(t){this.vertical=t,this.moveFn=null,this.el=Ah("div",`${Od}-scrollbar ${t?"vertical":"horizontal"}`).child(this.contentEl=Ah("div","")).on("mousemove.stop",()=>{}).on("scroll.stop",t=>{const{scrollTop:e,scrollLeft:n}=t.target;this.moveFn&&this.moveFn(this.vertical?e:n,t)})}move(t){return this.el.scroll(t),this}scroll(){return this.el.scroll()}set(t,e){const n=t-1;if(e>n){const t=this.vertical?"height":"width";this.el.css(t,n-15+"px").show(),this.contentEl.css(this.vertical?"width":"height","1px").css(t,e+"px")}else this.el.hide();return this}}let Id=10;class Td{constructor(t=!1){this.useHideInput=t,this.inputChange=()=>{},this.cornerEl=Ah("div",Od+"-selector-corner"),this.areaEl=Ah("div",Od+"-selector-area").child(this.cornerEl).hide(),this.clipboardEl=Ah("div",Od+"-selector-clipboard").hide(),this.autofillEl=Ah("div",Od+"-selector-autofill").hide(),this.el=Ah("div",Od+"-selector").css("z-index",""+Id).children(this.areaEl,this.clipboardEl,this.autofillEl).hide(),t&&(this.hideInput=Ah("input","").on("compositionend",t=>{this.inputChange(t.target.value)}),this.el.child(this.hideInputDiv=Ah("div","hide-input").child(this.hideInput)),this.el.child(this.hideInputDiv=Ah("div","hide-input").child(this.hideInput))),Id+=1}setOffset(t){return this.el.offset(t).show(),this}hide(){return this.el.hide(),this}setAreaOffset(t){const{left:e,top:n,width:i,height:r}=t,o={width:i-3+.8,height:r-3+.8,left:e-.8,top:n-.8};this.areaEl.offset(o).show(),this.useHideInput&&(this.hideInputDiv.offset(o),this.hideInput.val("").focus())}setClipboardOffset(t){const{left:e,top:n,width:i,height:r}=t;this.clipboardEl.offset({left:e,top:n,width:i-5,height:r-5})}showAutofill(t){const{left:e,top:n,width:i,height:r}=t;this.autofillEl.offset({width:i-3,height:r-3,left:e,top:n}).show()}hideAutofill(){this.autofillEl.hide()}showClipboard(){this.clipboardEl.show()}hideClipboard(){this.clipboardEl.hide()}}function _d(t){const{data:e}=this,{left:n,top:i,width:r,height:o,scroll:s,l:a,t:l}=t,c=e.freezeTotalWidth(),u=e.freezeTotalHeight();let h=n-c;c>a&&(h-=s.x);let d=i-u;return u>l&&(d-=s.y),{left:h,top:d,width:r,height:o}}function Ad(t){const{data:e}=this,{left:n,width:i,height:r,l:o,t:s,scroll:a}=t,l=e.freezeTotalWidth();let c=n-l;return l>o&&(c-=a.x),{left:c,top:s,width:i,height:r}}function Pd(t){const{data:e}=this,{top:n,width:i,height:r,l:o,t:s,scroll:a}=t,l=e.freezeTotalHeight();let c=n-l;return l>s&&(c-=a.y),{left:o,top:c,width:i,height:r}}function Dd(t){const{br:e}=this;e.setAreaOffset(_d.call(this,t))}function Md(t){const{tl:e}=this;e.setAreaOffset(t)}function Rd(t){const{t:e}=this;e.setAreaOffset(Ad.call(this,t))}function Ld(t){const{l:e}=this;e.setAreaOffset(Pd.call(this,t))}function Nd(t){const{l:e}=this;e.setClipboardOffset(Pd.call(this,t))}function zd(t){const{br:e}=this;e.setClipboardOffset(_d.call(this,t))}function Fd(t){const{tl:e}=this;e.setClipboardOffset(t)}function $d(t){const{t:e}=this;e.setClipboardOffset(Ad.call(this,t))}function Vd(t){Dd.call(this,t),Md.call(this,t),Rd.call(this,t),Ld.call(this,t)}function Hd(t){zd.call(this,t),Fd.call(this,t),$d.call(this,t),Nd.call(this,t)}class Wd{constructor(t){this.inputChange=()=>{},this.data=t,this.br=new Td(!0),this.t=new Td,this.l=new Td,this.tl=new Td,this.br.inputChange=t=>{this.inputChange(t)},this.br.el.show(),this.offset=null,this.areaOffset=null,this.indexes=null,this.range=null,this.arange=null,this.el=Ah("div",Od+"-selectors").children(this.tl.el,this.t.el,this.l.el,this.br.el).hide(),this.lastri=-1,this.lastci=-1,Id+=1}resetData(t){this.data=t,this.range=t.selector.range,this.resetAreaOffset()}hide(){this.el.hide()}resetOffset(){const{data:t,tl:e,t:n,l:i,br:r}=this,o=t.freezeTotalHeight(),s=t.freezeTotalWidth();o>0||s>0?(e.setOffset({width:s,height:o}),n.setOffset({left:s,height:o}),i.setOffset({top:o,width:s}),r.setOffset({left:s,top:o})):(e.hide(),n.hide(),i.hide(),r.setOffset({left:0,top:0}))}resetAreaOffset(){const t=this.data.getSelectedRect(),e=this.data.getClipboardRect();Vd.call(this,t),Hd.call(this,e),this.resetOffset()}resetBRTAreaOffset(){const t=this.data.getSelectedRect(),e=this.data.getClipboardRect();Dd.call(this,t),Rd.call(this,t),zd.call(this,e),$d.call(this,e),this.resetOffset()}resetBRLAreaOffset(){const t=this.data.getSelectedRect(),e=this.data.getClipboardRect();Dd.call(this,t),Ld.call(this,t),zd.call(this,e),Nd.call(this,e),this.resetOffset()}set(t,e,n=!0){const{data:i}=this,r=i.calSelectedRangeByStart(t,e),{sri:o,sci:s}=r;if(n){let[n,r]=[t,e];t<0&&(n=0),e<0&&(r=0),i.selector.setIndexes(n,r),this.indexes=[n,r]}this.moveIndexes=[o,s],this.range=r,this.resetAreaOffset(),this.el.show()}setEnd(t,e,n=!0){const{data:i,lastri:r,lastci:o}=this;if(n){if(t===r&&e===o)return;this.lastri=t,this.lastci=e}this.range=i.calSelectedRangeByEnd(t,e),Vd.call(this,this.data.getSelectedRect())}reset(){const{eri:t,eci:e}=this.data.selector.range;this.setEnd(t,e)}showAutofill(t,e){if(-1===t&&-1===e)return;const{sri:n,sci:i,eri:r,eci:o}=this.range,[s,a]=[t,e],l=n-t,c=r-t,u=o-e;if(i-e>0)this.arange=new zh(n,a,r,i-1);else if(l>0)this.arange=new zh(s,i,n-1,o);else if(u<0)this.arange=new zh(n,o+1,r,a);else{if(!(c<0))return void(this.arange=null);this.arange=new zh(r+1,i,s,o)}if(null!==this.arange){const t=this.data.getRect(this.arange);t.width+=2,t.height+=2;const{br:e,l:n,t:i,tl:r}=this;e.showAutofill(_d.call(this,t)),n.showAutofill(Pd.call(this,t)),i.showAutofill(Ad.call(this,t)),r.showAutofill(t)}}hideAutofill(){["br","l","t","tl"].forEach(t=>{this[t].hideAutofill()})}showClipboard(){const t=this.data.getClipboardRect();Hd.call(this,t),["br","l","t","tl"].forEach(t=>{this[t].showClipboard()})}hideClipboard(){["br","l","t","tl"].forEach(t=>{this[t].hideClipboard()})}}function Bd(t){t.preventDefault(),t.stopPropagation();const{filterItems:e}=this;e.length<=0||(this.itemIndex>=0&&e[this.itemIndex].toggle(),this.itemIndex-=1,this.itemIndex<0&&(this.itemIndex=e.length-1),e[this.itemIndex].toggle())}function Ud(t){t.stopPropagation();const{filterItems:e}=this;e.length<=0||(this.itemIndex>=0&&e[this.itemIndex].toggle(),this.itemIndex+=1,this.itemIndex>e.length-1&&(this.itemIndex=0),e[this.itemIndex].toggle())}function qd(t){t.preventDefault();const{filterItems:e}=this;e.length<=0||(t.stopPropagation(),this.itemIndex<0&&(this.itemIndex=0),e[this.itemIndex].el.click(),this.hide())}function Gd(t){const{keyCode:e}=t;switch(t.ctrlKey&&t.stopPropagation(),e){case 37:t.stopPropagation();break;case 38:Bd.call(this,t);break;case 39:t.stopPropagation();break;case 40:Ud.call(this,t);break;case 13:case 9:qd.call(this,t);break;default:t.stopPropagation()}}class Yd{constructor(t,e,n="200px"){this.filterItems=[],this.items=t,this.el=Ah("div",Od+"-suggest").css("width",n).hide(),this.itemClick=e,this.itemIndex=-1}setOffset(t){this.el.cssRemoveKeys("top","bottom").offset(t)}hide(){const{el:t}=this;this.filterItems=[],this.itemIndex=-1,t.hide(),xd(this.el.parent())}setItems(t){this.items=t}search(t){let{items:e}=this;if(/^\s*$/.test(t)||(e=e.filter(e=>(e.key||e).startsWith(t.toUpperCase()))),e=e.map(t=>{let{title:e}=t;e?"function"==typeof e&&(e=e()):e=t;const n=Ah("div",Od+"-item").child(e).on("click.stop",()=>{this.itemClick(t),this.hide()});return t.label&&n.child(Ah("div","label").html(t.label)),n}),this.filterItems=e,e.length<=0)return;const{el:n}=this;n.html("").children(...e).show(),Sd(n.parent(),()=>{this.hide()})}bindInputEvents(t){t.on("keydown",t=>Gd.call(this,t))}}class Xd extends _h{constructor(t){super("div",Od+"-icon"),this.iconNameEl=Ah("div",`${Od}-icon-img ${t}`),this.child(this.iconNameEl)}setName(t){this.iconNameEl.className(`${Od}-icon-img ${t}`)}}function Zd(t,e){t.setMonth(t.getMonth()+e)}function Kd(t,e){const n=new Date(t);return n.setDate(e-t.getDay()+1),n}class Qd{constructor(t){this.value=t,this.cvalue=new Date(t),this.headerLeftEl=Ah("div","calendar-header-left"),this.bodyEl=Ah("tbody",""),this.buildAll(),this.el=Ah("div","x-spreadsheet-calendar").children(Ah("div","calendar-header").children(this.headerLeftEl,Ah("div","calendar-header-right").children(Ah("a","calendar-prev").on("click.stop",()=>this.prev()).child(new Xd("chevron-left")),Ah("a","calendar-next").on("click.stop",()=>this.next()).child(new Xd("chevron-right")))),Ah("table","calendar-body").children(Ah("thead","").child(Ah("tr","").children(...nd("calendar.weeks").map(t=>Ah("th","cell").child(t)))),this.bodyEl)),this.selectChange=()=>{}}setValue(t){this.value=t,this.cvalue=new Date(t),this.buildAll()}prev(){const{value:t}=this;Zd(t,-1),this.buildAll()}next(){const{value:t}=this;Zd(t,1),this.buildAll()}buildAll(){this.buildHeaderLeft(),this.buildBody()}buildHeaderLeft(){const{value:t}=this;this.headerLeftEl.html(`${nd("calendar.months")[t.getMonth()]} ${t.getFullYear()}`)}buildBody(){const{value:t,cvalue:e,bodyEl:n}=this,i=function(t,e,n){const i=new Date(t,e,1,23,59,59),r=[[],[],[],[],[],[]];for(let o=0;o<6;o+=1)for(let t=0;t<7;t+=1){const s=Kd(i,7*o+t),a=s.getMonth()!==e,l=s.getMonth()===n.getMonth()&&s.getDate()===n.getDate();r[o][t]={d:s,disabled:a,active:l}}return r}(t.getFullYear(),t.getMonth(),e).map(t=>{const e=t.map(t=>{let e="cell";return t.disabled&&(e+=" disabled"),t.active&&(e+=" active"),Ah("td","").child(Ah("div",e).on("click.stop",()=>{this.selectChange(t.d)}).child(t.d.getDate().toString()))});return Ah("tr","").children(...e)});n.html("").children(...i)}}class Jd{constructor(){this.calendar=new Qd(new Date),this.el=Ah("div",Od+"-datepicker").child(this.calendar.el).hide()}setValue(t){const{calendar:e}=this;return"string"==typeof t?/^\d{4}-\d{1,2}-\d{1,2}$/.test(t)&&e.setValue(new Date(t.replace(new RegExp("-","g"),"/"))):t instanceof Date&&e.setValue(t),this}change(t){this.calendar.selectChange=e=>{t(e),this.hide()}}show(){this.el.show()}hide(){this.el.hide()}}function tf(){const{inputText:t}=this;if(!/^\s*$/.test(t)){const{textlineEl:e,textEl:n,areaOffset:i}=this,r=t.split("\n"),o=Math.max(...r.map(t=>t.length)),s=e.offset().width/t.length,a=(o+1)*s+5,l=this.viewFn().width-i.left-s;let c=r.length;if(a>i.width){let t=a;a>l&&(t=l,c+=parseInt(a/l,10),c+=a%l>0?1:0),n.css("width",t+"px")}c*=this.rowHeight,c>i.height&&n.css("height",c+"px")}}function ef({target:t},e){const{value:n,selectionEnd:i}=t,r=`${n.slice(0,i)}${e}${n.slice(i)}`;t.value=r,t.setSelectionRange(i+1,i+1),this.inputText=r,this.textlineEl.html(r),tf.call(this)}function nf(t){const{keyCode:e,altKey:n}=t;13!==e&&9!==e&&t.stopPropagation(),13===e&&n&&(ef.call(this,t,"\n"),t.stopPropagation()),13!==e||n||t.preventDefault()}function rf(t){const e=t.target.value,{suggest:n,textlineEl:i,validator:r}=this,{cell:o}=this;if(null!==o)if("editable"in o&&!0===o.editable||void 0===o.editable){if(this.inputText=e,r)"list"===r.type?n.search(e):n.hide();else{const t=e.lastIndexOf("=");-1!==t?n.search(e.substring(t+1)):n.hide()}i.html(e),tf.call(this),this.change("input",e)}else t.target.value="";else{if(this.inputText=e,r)"list"===r.type?n.search(e):n.hide();else{const t=e.lastIndexOf("=");-1!==t?n.search(e.substring(t+1)):n.hide()}i.html(e),tf.call(this),this.change("input",e)}}function of(t){const{el:e}=this.textEl;setTimeout(()=>{e.focus(),e.setSelectionRange(t,t)},0)}function sf(t,e){const{textEl:n,textlineEl:i}=this;n.el.blur(),n.val(t),i.html(t),of.call(this,e)}function af(t){const{inputText:e,validator:n}=this;let i=0;if(n&&"list"===n.type)this.inputText=t,i=this.inputText.length;else{const n=e.lastIndexOf("="),r=e.substring(0,n+1);let o=e.substring(n+1);o=-1!==o.indexOf(")")?o.substring(o.indexOf(")")):"",this.inputText=r+t.key+"(",i=this.inputText.length,this.inputText+=")"+o}sf.call(this,this.inputText,i)}function lf(){this.suggest.setItems(this.formulas)}class cf{constructor(t,e,n){this.viewFn=e,this.rowHeight=n,this.formulas=t,this.suggest=new Yd(t,t=>{af.call(this,t)}),this.datepicker=new Jd,this.datepicker.change(t=>{this.setText(function(t){let e=t.getMonth()+1,n=t.getDate();return e<10&&(e="0"+e),n<10&&(n="0"+n),`${t.getFullYear()}-${e}-${n}`}(t)),this.clear()}),this.areaEl=Ah("div",Od+"-editor-area").children(this.textEl=Ah("textarea","").on("input",t=>rf.call(this,t)).on("paste.stop",()=>{}).on("keydown",t=>nf.call(this,t)),this.textlineEl=Ah("div","textline"),this.suggest.el,this.datepicker.el).on("mousemove.stop",()=>{}).on("mousedown.stop",()=>{}),this.el=Ah("div",Od+"-editor").child(this.areaEl).hide(),this.suggest.bindInputEvents(this.textEl),this.areaOffset=null,this.freeze={w:0,h:0},this.cell=null,this.inputText="",this.change=()=>{}}setFreezeLengths(t,e){this.freeze.w=t,this.freeze.h=e}clear(){""!==this.inputText&&this.change("finished",this.inputText),this.cell=null,this.areaOffset=null,this.inputText="",this.el.hide(),this.textEl.val(""),this.textlineEl.html(""),lf.call(this),this.datepicker.hide()}setOffset(t,e="top"){const{textEl:n,areaEl:i,suggest:r,freeze:o,el:s}=this;if(t){this.areaOffset=t;const{left:a,top:l,width:c,height:u,l:h,t:d}=t,f={left:0,top:0};o.w>h&&o.h>d||(o.w<h&&o.h<d?(f.left=o.w,f.top=o.h):o.w>h?f.top=o.h:o.h>d&&(f.left=o.w)),s.offset(f),i.offset({left:a-f.left-.8,top:l-f.top-.8}),n.offset({width:c-9+.8,height:u-3+.8});const p={left:0};p[e]=u,r.setOffset(p),r.hide()}}setCell(t,e){const{el:n,datepicker:i,suggest:r}=this;n.show(),this.cell=t;const o=t&&t.text||"";if(this.setText(o),this.validator=e,e){const{type:t}=e;"date"===t&&(i.show(),/^\s*$/.test(o)||i.setValue(o)),"list"===t&&(r.setItems(e.values()),r.search(""))}}setText(t){this.inputText=t,sf.call(this,t,t.length),tf.call(this)}}class uf extends _h{constructor(t,e=""){super("div",`${Od}-button ${e}`),this.child(nd("button."+t))}}function hf(){return window.devicePixelRatio||1}function df(){return hf()-.5}function ff(t){return parseInt(t*hf(),10)}function pf(t){const e=ff(t);return e>0?e-.5:.5}class gf{constructor(t,e,n,i,r=0){this.x=t,this.y=e,this.width=n,this.height=i,this.padding=r,this.bgcolor="#ffffff",this.borderTop=null,this.borderRight=null,this.borderBottom=null,this.borderLeft=null}setBorders({top:t,bottom:e,left:n,right:i}){t&&(this.borderTop=t),i&&(this.borderRight=i),e&&(this.borderBottom=e),n&&(this.borderLeft=n)}innerWidth(){return this.width-2*this.padding-2}innerHeight(){return this.height-2*this.padding-2}textx(t){const{width:e,padding:n}=this;let{x:i}=this;return"left"===t?i+=n:"center"===t?i+=e/2:"right"===t&&(i+=e-n),i}texty(t,e){const{height:n,padding:i}=this;let{y:r}=this;return"top"===t?r+=i:"middle"===t?r+=n/2-e/2:"bottom"===t&&(r+=n-i-e),r}topxys(){const{x:t,y:e,width:n}=this;return[[t,e],[t+n,e]]}rightxys(){const{x:t,y:e,width:n,height:i}=this;return[[t+n,e],[t+n,e+i]]}bottomxys(){const{x:t,y:e,width:n,height:i}=this;return[[t,e+i],[t+n,e+i]]}leftxys(){const{x:t,y:e,height:n}=this;return[[t,e],[t,e+n]]}}function mf(t,e,n,i,r,o,s){const a={x:0,y:0};"underline"===t?a.y="bottom"===r?0:"top"===r?-(o+2):-o/2:"strike"===t&&("bottom"===r?a.y=o/2:"top"===r&&(a.y=-(o/2+2))),"center"===i?a.x=s/2:"right"===i&&(a.x=s),this.line([e-a.x,n-a.y],[e-a.x+s,n-a.y])}class vf{constructor(t,e,n){this.el=t,this.ctx=t.getContext("2d"),this.resize(e,n),this.ctx.scale(hf(),hf())}resize(t,e){this.el.style.width=t+"px",this.el.style.height=e+"px",this.el.width=ff(t),this.el.height=ff(e)}clear(){const{width:t,height:e}=this.el;return this.ctx.clearRect(0,0,t,e),this}attr(t){return Object.assign(this.ctx,t),this}save(){return this.ctx.save(),this.ctx.beginPath(),this}restore(){return this.ctx.restore(),this}beginPath(){return this.ctx.beginPath(),this}translate(t,e){return this.ctx.translate(ff(t),ff(e)),this}scale(t,e){return this.ctx.scale(t,e),this}clearRect(t,e,n,i){return this.ctx.clearRect(t,e,n,i),this}fillRect(t,e,n,i){return this.ctx.fillRect(ff(t)-.5,ff(e)-.5,ff(n),ff(i)),this}fillText(t,e,n){return this.ctx.fillText(t,ff(e),ff(n)),this}text(t,e,n={},i=!0){const{ctx:r}=this,{align:o,valign:s,font:a,color:l,strike:c,underline:u}=n,h=e.textx(o);r.save(),r.beginPath(),this.attr({textAlign:o,textBaseline:s,font:`${a.italic?"italic":""} ${a.bold?"bold":""} ${ff(a.size)}px ${a.name}`,fillStyle:l,strokeStyle:l});const d=(""+t).split("\n"),f=e.innerWidth(),p=[];d.forEach(t=>{const e=r.measureText(t).width;if(i&&e>ff(f)){let e={w:0,len:0,start:0};for(let n=0;n<t.length;n+=1)e.w>=ff(f)&&(p.push(t.substr(e.start,e.len)),e={w:0,len:0,start:n}),e.len+=1,e.w+=r.measureText(t[n]).width+1;e.len>0&&p.push(t.substr(e.start,e.len))}else p.push(t)});const g=(p.length-1)*(a.size+2);let m=e.texty(s,g);return p.forEach(t=>{const e=r.measureText(t).width;this.fillText(t,h,m),c&&mf.call(this,"strike",h,m,o,s,a.size,e),u&&mf.call(this,"underline",h,m,o,s,a.size,e),m+=a.size+2}),r.restore(),this}border(t,e){const{ctx:n}=this;return n.lineWidth=df,n.strokeStyle=e,"medium"===t?n.lineWidth=ff(2)-.5:"thick"===t?n.lineWidth=ff(3):"dashed"===t?n.setLineDash([ff(3),ff(2)]):"dotted"===t?n.setLineDash([ff(1),ff(1)]):"double"===t&&n.setLineDash([ff(2),0]),this}line(...t){const{ctx:e}=this;if(t.length>1){e.beginPath();const[n,i]=t[0];e.moveTo(pf(n),pf(i));for(let r=1;r<t.length;r+=1){const[n,i]=t[r];e.lineTo(pf(n),pf(i))}e.stroke()}return this}strokeBorders(t){const{ctx:e}=this;e.save();const{borderTop:n,borderRight:i,borderBottom:r,borderLeft:o}=t;n&&(this.border(...n),this.line(...t.topxys())),i&&(this.border(...i),this.line(...t.rightxys())),r&&(this.border(...r),this.line(...t.bottomxys())),o&&(this.border(...o),this.line(...t.leftxys())),e.restore()}dropdown(t){const{ctx:e}=this,{x:n,y:i,width:r,height:o}=t,s=n+r-15,a=i+o-15;e.save(),e.beginPath(),e.moveTo(ff(s),ff(a)),e.lineTo(ff(s+8),ff(a)),e.lineTo(ff(s+4),ff(a+6)),e.closePath(),e.fillStyle="rgba(0, 0, 0, .45)",e.fill(),e.restore()}error(t){const{ctx:e}=this,{x:n,y:i,width:r}=t,o=n+r-1;e.save(),e.beginPath(),e.moveTo(ff(o-8),ff(i-1)),e.lineTo(ff(o),ff(i-1)),e.lineTo(ff(o),ff(i+8)),e.closePath(),e.fillStyle="rgba(255, 0, 0, .65)",e.fill(),e.restore()}frozen(t){const{ctx:e}=this,{x:n,y:i,width:r}=t,o=n+r-1;e.save(),e.beginPath(),e.moveTo(ff(o-8),ff(i-1)),e.lineTo(ff(o),ff(i-1)),e.lineTo(ff(o),ff(i+8)),e.closePath(),e.fillStyle="rgba(0, 255, 0, .85)",e.fill(),e.restore()}rect(t,e){const{ctx:n}=this,{x:i,y:r,width:o,height:s,bgcolor:a}=t;n.save(),n.beginPath(),n.fillStyle=a||"#fff",n.rect(pf(i+1),pf(r+1),ff(o-2),ff(s-2)),n.clip(),n.fill(),e(),n.restore()}}const bf=[{key:"Arial",title:"Arial"},{key:"Helvetica",title:"Helvetica"},{key:"Source Sans Pro",title:"Source Sans Pro"},{key:"Comic Sans MS",title:"Comic Sans MS"},{key:"Courier New",title:"Courier New"},{key:"Verdana",title:"Verdana"},{key:"Lato",title:"Lato"}],yf=[{pt:7.5,px:10},{pt:8,px:11},{pt:9,px:12},{pt:10,px:13},{pt:10.5,px:14},{pt:11,px:15},{pt:12,px:16},{pt:14,px:18.7},{pt:15,px:20},{pt:16,px:21.3},{pt:18,px:24},{pt:22,px:29.3},{pt:24,px:32},{pt:26,px:34.7},{pt:36,px:48},{pt:42,px:56}],wf=(t,e)=>{const[n]=t;let i=t;if('"'===n)return t.substring(1);let r=1;if("-"===n&&(i=t.substring(1),r=-1),i[0]>="0"&&i[0]<="9")return r*Number(i);const[o,s]=Rh(i);return r*e(o,s)},xf=(t,e,n,i=[])=>{if("="===t[0]){const r=(t=>{const e=[],n=[];let i=[],r=0,o="",s=1,a="";for(let l=0;l<t.length;l+=1){const u=t.charAt(l);if(" "!==u){if(u>="a"&&u<="z")i.push(u.toUpperCase());else if(u>="0"&&u<="9"||u>="A"&&u<="Z"||"."===u)i.push(u);else if('"'===u){for(l+=1;'"'!==t.charAt(l);)i.push(t.charAt(l)),l+=1;n.push('"'+i.join("")),i=[]}else if("-"===u&&/[+\-*/,(]/.test(a))i.push(u);else{if("("!==u&&i.length>0&&n.push(i.join("")),")"===u){let t=e.pop();if(2===r)try{const[e,i]=Rh(n.pop()),[r,o]=Rh(n.pop());let s=0;for(let t=r;t<=e;t+=1)for(let e=o;e<=i;e+=1)n.push(Lh(t,e)),s+=1;n.push([t,s])}catch(c){}else if(1===r||3===r)3===r&&n.push(o),n.push([t,s]),s=1;else for(;"("!==t&&(n.push(t),!(e.length<=0));)t=e.pop();r=0}else if("="===u||">"===u||"<"===u){const e=t.charAt(l+1);o=u,"="!==e&&"-"!==e||(o+=e,l+=1),r=3}else if(":"===u)r=2;else if(","===u)3===r&&n.push(o),r=1,s+=1;else if("("===u&&i.length>0)e.push(i.join(""));else{if(e.length>0&&("+"===u||"-"===u)){let t=e[e.length-1];if("("!==t&&n.push(e.pop()),"*"===t||"/"===t)for(;e.length>0&&(t=e[e.length-1],"("!==t);)n.push(e.pop())}else if(e.length>0){const t=e[e.length-1];"*"!==t&&"/"!==t||n.push(e.pop())}e.push(u)}i=[]}a=u}}for(i.length>0&&n.push(i.join(""));e.length>0;)n.push(e.pop());return n})(t.substring(1));return r.length<=0?t:((t,e,n,i)=>{const r=[];for(let o=0;o<t.length;o+=1){const s=t[o],a=s[0];if("+"===s){const t=r.pop();r.push(Xh("+",r.pop(),t))}else if("-"===s)if(1===r.length){const t=r.pop();r.push(Xh("*",t,-1))}else{const t=r.pop();r.push(Xh("-",r.pop(),t))}else if("*"===s)r.push(Xh("*",r.pop(),r.pop()));else if("/"===s){const t=r.pop();r.push(Xh("/",r.pop(),t))}else if("="===a||">"===a||"<"===a){let t=r.pop();Number.isNaN(t)||(t=Number(t));let e=r.pop();Number.isNaN(e)||(e=Number(e));let n=!1;"="===a?n=e===t:">"===s?n=e>t:">="===s?n=e>=t:"<"===s?n=e<t:"<="===s&&(n=e<=t),r.push(n)}else if(Array.isArray(s)){const[t,n]=s,i=[];for(let e=0;e<n;e+=1)i.push(r.pop());r.push(e[t].render(i.reverse()))}else{if(i.includes(s))return 0;(a>="a"&&a<="z"||a>="A"&&a<="Z")&&i.push(s),r.push(wf(s,n)),i.pop()}}return r[0]})(r,e,(t,r)=>xf(n(t,r),e,n,i),i)}return t};var Sf={render:xf};const kf=[{key:"SUM",title:id("formula.sum"),render:t=>t.reduce((t,e)=>Xh("+",t,e),0)},{key:"AVERAGE",title:id("formula.average"),render:t=>t.reduce((t,e)=>Number(t)+Number(e),0)/t.length},{key:"MAX",title:id("formula.max"),render:t=>Math.max(...t.map(t=>Number(t)))},{key:"MIN",title:id("formula.min"),render:t=>Math.min(...t.map(t=>Number(t)))},{key:"IF",title:id("formula._if"),render:([t,e,n])=>t?e:n},{key:"AND",title:id("formula.and"),render:t=>t.every(t=>t)},{key:"OR",title:id("formula.or"),render:t=>t.some(t=>t)},{key:"CONCAT",title:id("formula.concat"),render:t=>t.join("")}],Ef=kf,Of={};kf.forEach(t=>{Of[t.key]=t});const Cf=t=>t,jf=t=>{if(/^(-?\d*.?\d*)$/.test(t)){const e=Number(t).toFixed(2).toString(),[n,...i]=e.split("\\.");return[n.replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,"),...i]}return t},If=[{key:"normal",title:id("format.normal"),type:"string",render:Cf},{key:"text",title:id("format.text"),type:"string",render:Cf},{key:"number",title:id("format.number"),type:"number",label:"1,000.12",render:jf},{key:"percent",title:id("format.percent"),type:"number",label:"10.12%",render:t=>t+"%"},{key:"rmb",title:id("format.rmb"),type:"number",label:"￥10.00",render:t=>"￥"+jf(t)},{key:"usd",title:id("format.usd"),type:"number",label:"$10.00",render:t=>"$"+jf(t)},{key:"eur",title:id("format.eur"),type:"number",label:"€10.00",render:t=>"€"+jf(t)},{key:"date",title:id("format.date"),type:"date",label:"26/09/2008",render:Cf},{key:"time",title:id("format.time"),type:"date",label:"15:59:00",render:Cf},{key:"datetime",title:id("format.datetime"),type:"date",label:"26/09/2008 15:59:00",render:Cf},{key:"duration",title:id("format.duration"),type:"date",label:"24:01:00",render:Cf}],Tf={};If.forEach(t=>{Tf[t.key]=t});const _f={fillStyle:"#f4f5f8"},Af={fillStyle:"#fff",lineWidth:df,strokeStyle:"#e6e6e6"};function Pf(t,e,n,i=0){const{left:r,top:o,width:s,height:a}=t.cellRect(e,n);return new gf(r,o+i,s,a,5)}function Df(t,e,n,i,r=0){const{sortedRowMap:o,rows:s,cols:a}=e;if(s.isHide(n)||a.isHide(i))return;let l=n;o.has(n)&&(l=o.get(n));const c=e.getCell(l,i);if(null===c)return;let u=!1;"editable"in c&&!1===c.editable&&(u=!0);const h=e.getCellStyleOrDefault(l,i),d=Pf(e,n,i,r);d.bgcolor=h.bgcolor,void 0!==h.border&&(d.setBorders(h.border),t.strokeBorders(d)),t.rect(d,()=>{let r=Sf.render(c.text||"",Of,(t,n)=>e.getCellTextOrDefault(n,t));h.format&&(r=Tf[h.format].render(r));const o=Object.assign({},h.font);o.size=function(t){for(let e=0;e<yf.length;e+=1){const n=yf[e];if(n.pt===t)return n.px}return t}(o.size),t.text(r,d,{align:h.align,valign:h.valign,font:o,color:h.color,strike:h.strike,underline:h.underline},h.textwrap),e.validations.getError(n,i)&&t.error(d),u&&t.frozen(d)})}function Mf(t){const{data:e,draw:n}=this;if(t){const{autoFilter:i}=e;if(!i.active())return;const r=i.hrange();t.intersects(r)&&r.each((t,i)=>{const r=Pf(e,t,i);n.dropdown(r)})}}function Rf(t,e,n,i,r){const{draw:o,data:s}=this;o.save(),o.translate(e,n).translate(i,r);const{exceptRowSet:a}=s,l=s.exceptRowTotalHeight(t.sri,t.eri);o.save(),o.translate(0,-l),t.each((t,e)=>{Df(o,s,t,e)},t=>(t=>{const e=a.has(t);if(e){const e=s.rows.getHeight(t);o.translate(0,-e)}return!e})(t)),o.restore();const c=new Set;o.save(),o.translate(0,-l),s.eachMergesInView(t,({sri:t,sci:e,eri:n})=>{if(a.has(t)){if(!c.has(t)){c.add(t);const e=s.rows.sumHeight(t,n+1);o.translate(0,-e)}}else Df(o,s,t,e)}),o.restore(),Mf.call(this,t),o.restore()}function Lf(t,e,n,i){const{draw:r}=this;r.save(),r.attr({fillStyle:"rgba(75, 137, 255, 0.08)"}).fillRect(t,e,n,i),r.restore()}function Nf(t,e,n,i,r,o){const{draw:s,data:a}=this,l=e.h,c=e.w,u=o+i,h=r+n;s.save(),s.attr(_f),"all"!==t&&"left"!==t||s.fillRect(0,u,n,l),"all"!==t&&"top"!==t||s.fillRect(h,0,c,i);const{sri:d,sci:f,eri:p,eci:g}=a.selector.range;s.attr({textAlign:"center",textBaseline:"middle",font:`500 ${ff(12)}px Source Sans Pro`,fillStyle:"#585757",lineWidth:df(),strokeStyle:"#e6e6e6"}),"all"!==t&&"left"!==t||(a.rowEach(e.sri,e.eri,(t,e,i)=>{const r=u+e,o=t;s.line([0,r],[n,r]),d<=o&&o<p+1&&Lf.call(this,0,r,n,i),s.fillText(o+1,n/2,r+i/2),t>0&&a.rows.isHide(t-1)&&(s.save(),s.attr({strokeStyle:"#c6c6c6"}),s.line([5,r+5],[n-5,r+5]),s.restore())}),s.line([0,l+u],[n,l+u]),s.line([n,u],[n,l+u])),"all"!==t&&"top"!==t||(a.colEach(e.sci,e.eci,(t,e,n)=>{const r=h+e,o=t;s.line([r,0],[r,i]),f<=o&&o<g+1&&Lf.call(this,r,0,n,i),s.fillText(Dh(o),r+n/2,i/2),t>0&&a.cols.isHide(t-1)&&(s.save(),s.attr({strokeStyle:"#c6c6c6"}),s.line([r+5,5],[r+5,i-5]),s.restore())}),s.line([c+h,0],[c+h,i]),s.line([0,i],[c+h,i])),s.restore()}function zf(t,e){const{draw:n}=this;n.save(),n.attr({fillStyle:"#f4f5f8"}).fillRect(0,0,t,e),n.restore()}function Ff({sri:t,sci:e,eri:n,eci:i,w:r,h:o},s,a,l,c){const{draw:u,data:h}=this,{settings:d}=h;u.save(),u.attr(Af).translate(s+l,a+c),u.clearRect(0,0,r,o),d.showGrid?(h.rowEach(t,n,(e,i,o)=>{e!==t&&u.line([0,i],[r,i]),e===n&&u.line([0,i+o],[r,i+o])}),h.colEach(e,i,(t,n,r)=>{t!==e&&u.line([n,0],[n,o]),t===i&&u.line([n+r,0],[n+r,o])}),u.restore()):u.restore()}function $f(t,e,n,i){const{draw:r,data:o}=this,s=o.viewWidth()-t,a=o.viewHeight()-e;r.save().translate(t,e).attr({strokeStyle:"rgba(75, 137, 255, .6)"}),r.line([0,i],[s,i]),r.line([n,0],[n,a]),r.restore()}class Vf{constructor(t,e){this.el=t,this.draw=new vf(t,e.viewWidth(),e.viewHeight()),this.data=e}resetData(t){this.data=t,this.render()}render(){const{data:t}=this,{rows:e,cols:n}=t,i=n.indexWidth,r=e.height;this.draw.resize(t.viewWidth(),t.viewHeight()),this.clear();const o=t.viewRange(),s=t.freezeTotalWidth(),a=t.freezeTotalHeight(),{x:l,y:c}=t.scroll;Ff.call(this,o,i,r,s,a),Rf.call(this,o,i,r,-l,-c),Nf.call(this,"all",o,i,r,s,a),zf.call(this,i,r);const[u,h]=t.freeze;if(u>0||h>0){if(u>0){const t=o.clone();t.sri=0,t.eri=u-1,t.h=a,Ff.call(this,t,i,r,s,0),Rf.call(this,t,i,r,-l,0),Nf.call(this,"top",t,i,r,s,0)}if(h>0){const t=o.clone();t.sci=0,t.eci=h-1,t.w=s,Ff.call(this,t,i,r,0,a),Nf.call(this,"left",t,i,r,0,a),Rf.call(this,t,i,r,0,-c)}const e=t.freezeViewRange();Ff.call(this,e,i,r,0,0),Nf.call(this,"all",e,i,r,0,0),Rf.call(this,e,i,r,0,0),$f.call(this,i,r,s,a)}}clear(){this.draw.clear()}}const Hf=[["A3",11.69,16.54],["A4",8.27,11.69],["A5",5.83,8.27],["B4",9.84,13.9],["B5",6.93,9.84]],Wf=["landscape","portrait"];function Bf(t){return parseInt(96*t,10)}function Uf(t){"cancel"===t?this.el.hide():this.toPrint()}function qf(t){const{paper:e}=this,{value:n}=t.target,i=Hf[n];e.w=Bf(i[1]),e.h=Bf(i[2]),this.preview()}function Gf(t){const{paper:e}=this,{value:n}=t.target,i=Wf[n];e.orientation=i,this.preview()}class Yf{constructor(t){this.paper={w:Bf(Hf[0][1]),h:Bf(Hf[0][2]),padding:50,orientation:Wf[0],get width(){return"landscape"===this.orientation?this.h:this.w},get height(){return"landscape"===this.orientation?this.w:this.h}},this.data=t,this.el=Ah("div",Od+"-print").children(Ah("div",Od+"-print-bar").children(Ah("div","-title").child("Print settings"),Ah("div","-right").children(Ah("div",Od+"-buttons").children(new uf("cancel").on("click",Uf.bind(this,"cancel")),new uf("next","primary").on("click",Uf.bind(this,"next"))))),Ah("div",Od+"-print-content").children(this.contentEl=Ah("div","-content"),Ah("div","-sider").child(Ah("form","").children(Ah("fieldset","").children(Ah("label","").child(""+nd("print.size")),Ah("select","").children(...Hf.map((t,e)=>Ah("option","").attr("value",e).child(`${t[0]} ( ${t[1]}''x${t[2]}'' )`))).on("change",qf.bind(this))),Ah("fieldset","").children(Ah("label","").child(""+nd("print.orientation")),Ah("select","").children(...Wf.map((t,e)=>Ah("option","").attr("value",e).child(""+nd("print.orientations")[e]))).on("change",Gf.bind(this))))))).hide()}resetData(t){this.data=t}preview(){const{data:t,paper:e}=this,{width:n,height:i,padding:r}=e,o=n-2*r,s=i-2*r,a=t.contentRange(),l=parseInt(a.h/s,10)+1,c=o/a.w;let u=r;const h=r;c>1&&(u+=(o-a.w)/2);let d=0,f=0;this.contentEl.html(""),this.canvases=[];const p={sri:0,sci:0,eri:0,eci:0};for(let g=0;g<l;g+=1){let e=0,r=0;const o=Ah("div",Od+"-canvas-card"),l=Ah("canvas",Od+"-canvas");this.canvases.push(l.el);const g=new vf(l.el,n,i);for(g.save(),g.translate(u,h),c<1&&g.scale(c,c);d<=a.eri;d+=1){const n=t.rows.getHeight(d);if(e+=n,!(e<s)){r=-(e-n);break}for(let e=0;e<=a.eci;e+=1)Df(g,t,d,e,f),p.eci=e}p.eri=d,g.restore(),g.save(),g.translate(u,h),c<1&&g.scale(c,c);const m=f;t.eachMergesInView(p,({sri:e,sci:n})=>{Df(g,t,e,n,m)}),g.restore(),p.sri=p.eri,p.sci=p.eci,f+=r,this.contentEl.child(Ah("div",Od+"-canvas-card-wraper").child(o.child(l)))}this.el.show()}toPrint(){this.el.hide();const{paper:t}=this,e=Ah("iframe","").hide(),{el:n}=e;window.document.body.appendChild(n);const{contentWindow:i}=n,r=i.document,o=document.createElement("style");o.innerHTML=`\n      @page { size: ${t.width}px ${t.height}px; };\n      canvas {\n        page-break-before: auto;        \n        page-break-after: always;\n        image-rendering: pixelated;\n      };\n    `,r.head.appendChild(o),this.canvases.forEach(t=>{const e=t.cloneNode(!1);e.getContext("2d").drawImage(t,0,0),r.body.appendChild(e)}),i.print()}}const Xf=[{key:"copy",title:id("contextmenu.copy"),label:"Ctrl+C"},{key:"cut",title:id("contextmenu.cut"),label:"Ctrl+X"},{key:"paste",title:id("contextmenu.paste"),label:"Ctrl+V"},{key:"paste-value",title:id("contextmenu.pasteValue"),label:"Ctrl+Shift+V"},{key:"paste-format",title:id("contextmenu.pasteFormat"),label:"Ctrl+Alt+V"},{key:"divider"},{key:"insert-row",title:id("contextmenu.insertRow")},{key:"insert-column",title:id("contextmenu.insertColumn")},{key:"divider"},{key:"delete-row",title:id("contextmenu.deleteRow")},{key:"delete-column",title:id("contextmenu.deleteColumn")},{key:"delete-cell-text",title:id("contextmenu.deleteCellText")},{key:"hide",title:id("contextmenu.hide")},{key:"divider"},{key:"validation",title:id("contextmenu.validation")},{key:"divider"},{key:"cell-printable",title:id("contextmenu.cellprintable")},{key:"cell-non-printable",title:id("contextmenu.cellnonprintable")},{key:"divider"},{key:"cell-editable",title:id("contextmenu.celleditable")},{key:"cell-non-editable",title:id("contextmenu.cellnoneditable")}];function Zf(t){return"divider"===t.key?Ah("div",Od+"-item divider"):Ah("div",Od+"-item").on("click",()=>{this.itemClick(t.key),this.hide()}).children(t.title(),Ah("div","label").child(t.label||""))}function Kf(){return Xf.map(t=>Zf.call(this,t))}class Qf{constructor(t,e=!1){this.menuItems=Kf.call(this),this.el=Ah("div",Od+"-contextmenu").children(...this.menuItems).hide(),this.viewFn=t,this.itemClick=()=>{},this.isHide=e,this.setMode("range")}setMode(t){const e=this.menuItems[12];"row-col"===t?e.show():e.hide()}hide(){const{el:t}=this;t.hide(),xd(t)}setPosition(t,e){if(this.isHide)return;const{el:n}=this,{width:i}=n.show().offset(),r=this.viewFn(),o=r.height/2;let s=t;r.width-t<=i&&(s-=i),n.css("left",s+"px"),e>o?n.css("bottom",r.height-e+"px").css("max-height",e+"px").css("top","auto"):n.css("top",e+"px").css("max-height",r.height-e+"px").css("bottom","auto"),Sd(n)}}class Jf{constructor(t,e,n){this.tip=nd("toolbar."+t.replace(/-[a-z]/g,t=>t[1].toUpperCase())),e&&(this.tip+=` (${e})`),this.tag=t,this.shortcut=e,this.value=n,this.el=this.element(),this.change=()=>{}}element(){const{tip:t}=this;return Ah("div",Od+"-toolbar-btn").on("mouseenter",e=>{!function(t,e){if(e.classList.contains("active"))return;const{left:n,top:i,width:r,height:o}=e.getBoundingClientRect(),s=Ah("div",Od+"-tooltip").html(t).show();document.body.appendChild(s.el);const a=s.box();s.css("left",n+r/2-a.width/2+"px").css("top",i+o+2+"px"),yd(e,"mouseleave",()=>{document.body.contains(s.el)&&document.body.removeChild(s.el)}),yd(e,"click",()=>{document.body.contains(s.el)&&document.body.removeChild(s.el)})}(t,e.target)}).attr("data-tooltip",t)}setState(){}}class tp extends Jf{dropdown(){}getValue(t){return t}element(){const{tag:t}=this;return this.dd=this.dropdown(),this.dd.change=e=>this.change(t,this.getValue(e)),super.element().child(this.dd)}setState(t){t&&(this.value=t,this.dd.setTitle(t))}}class ep extends _h{constructor(t,e,n,i,...r){super("div",`${Od}-dropdown ${i}`),this.title=t,this.change=()=>{},this.headerClick=()=>{},"string"==typeof t?this.title=Ah("div",Od+"-dropdown-title").child(t):n&&this.title.addClass("arrow-left"),this.contentEl=Ah("div",Od+"-dropdown-content").css("width",e).hide(),this.setContentChildren(...r),this.headerEl=Ah("div",Od+"-dropdown-header"),this.headerEl.on("click",()=>{"block"!==this.contentEl.css("display")?this.show():this.hide()}).children(this.title,n?Ah("div",Od+"-icon arrow-right").child(Ah("div",Od+"-icon-img arrow-down")):""),this.children(this.headerEl,this.contentEl)}setContentChildren(...t){this.contentEl.html(""),t.length>0&&this.contentEl.children(...t)}setTitle(t){this.title.html(t),this.hide()}show(){const{contentEl:t}=this;t.show(),this.parent().active(),Sd(this.parent(),()=>{this.hide()})}hide(){this.parent().active(!1),this.contentEl.hide(),xd(this.parent())}}class np extends ep{constructor(t,e){super(new Xd("align-"+e),"auto",!0,"bottom-left",...t.map(t=>{return(e="align-"+t,Ah("div",Od+"-item").child(new Xd(e))).on("click",()=>{this.setTitle(t),this.change(t)});var e}))}setTitle(t){this.title.setName("align-"+t),this.hide()}}class ip extends tp{constructor(t){super("align","",t)}dropdown(){const{value:t}=this;return new np(["left","center","right"],t)}}class rp extends tp{constructor(t){super("valign","",t)}dropdown(){const{value:t}=this;return new np(["top","middle","bottom"],t)}}class op extends Jf{element(){const{tag:t}=this;return super.element().child(new Xd(t)).on("click",()=>this.click())}click(){this.change(this.tag,this.toggle())}setState(t){this.el.active(t)}toggle(){return this.el.toggle()}active(){return this.el.hasClass("active")}}class sp extends op{constructor(){super("autofilter")}setState(){}}class ap extends op{constructor(){super("font-bold","Ctrl+B")}}class lp extends op{constructor(){super("font-italic","Ctrl+I")}}class cp extends op{constructor(){super("strike","Ctrl+U")}}class up extends op{constructor(){super("underline","Ctrl+U")}}const hp=["#ffffff","#000100","#e7e5e6","#445569","#5b9cd6","#ed7d31","#a5a5a5","#ffc001","#4371c6","#71ae47"],dp=[["#f2f2f2","#7f7f7f","#d0cecf","#d5dce4","#deeaf6","#fce5d5","#ededed","#fff2cd","#d9e2f3","#e3efd9"],["#d8d8d8","#595959","#afabac","#adb8ca","#bdd7ee","#f7ccac","#dbdbdb","#ffe59a","#b3c6e7","#c5e0b3"],["#bfbfbf","#3f3f3f","#756f6f","#8596b0","#9cc2e6","#f4b184","#c9c9c9","#fed964","#8eaada","#a7d08c"],["#a5a5a5","#262626","#3a3839","#333f4f","#2e75b5","#c45a10","#7b7b7b","#bf8e01","#2f5596","#538136"],["#7f7f7f","#0c0c0c","#171516","#222a35","#1f4e7a","#843c0a","#525252","#7e6000","#203864","#365624"]],fp=["#c00000","#fe0000","#fdc101","#ffff01","#93d051","#00b04e","#01b0f1","#0170c1","#012060","#7030a0"];function pp(t){return Ah("td","").child(Ah("div",Od+"-color-palette-cell").on("click.stop",()=>this.change(t)).css("background-color",t))}class gp{constructor(){this.el=Ah("div",Od+"-color-palette"),this.change=()=>{};const t=Ah("table","").children(Ah("tbody","").children(Ah("tr",Od+"-theme-color-placeholders").children(...hp.map(t=>pp.call(this,t))),...dp.map(t=>Ah("tr",Od+"-theme-colors").children(...t.map(t=>pp.call(this,t)))),Ah("tr",Od+"-standard-colors").children(...fp.map(t=>pp.call(this,t)))));this.el.child(t)}}class mp extends ep{constructor(t,e){const n=new Xd(t).css("height","16px").css("border-bottom","3px solid "+e),i=new gp;i.change=t=>{this.setTitle(t),this.change(t)},super(n,"auto",!1,"bottom-left",i.el)}setTitle(t){this.title.css("border-color",t),this.hide()}}const vp=[["thin",'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="1" style="user-select: none;"><line x1="0" y1="0.5" x2="50" y2="0.5" stroke-width="1" stroke="black" style="user-select: none;"></line></svg>'],["medium",'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="2" style="user-select: none;"><line x1="0" y1="1.0" x2="50" y2="1.0" stroke-width="2" stroke="black" style="user-select: none;"></line></svg>'],["thick",'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="3" style="user-select: none;"><line x1="0" y1="1.5" x2="50" y2="1.5" stroke-width="3" stroke="black" style="user-select: none;"></line></svg>'],["dashed",'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="1" style="user-select: none;"><line x1="0" y1="0.5" x2="50" y2="0.5" stroke-width="1" stroke="black" stroke-dasharray="2" style="user-select: none;"></line></svg>'],["dotted",'<svg xmlns="http://www.w3.org/2000/svg" width="50" height="1" style="user-select: none;"><line x1="0" y1="0.5" x2="50" y2="0.5" stroke-width="1" stroke="black" stroke-dasharray="1" style="user-select: none;"></line></svg>']];class bp extends ep{constructor(t){const e=new Xd("line-type");let n=0;const i=vp.map((e,r)=>Ah("div",`${Od}-item state ${t===e[0]?"checked":""}`).on("click",()=>{i[n].toggle("checked"),i[r].toggle("checked"),n=r,this.hide(),this.change(e)}).child(Ah("div",Od+"-line-type").html(e[1])));super(e,"auto",!1,"bottom-left",...i)}}function yp(...t){return Ah("table","").child(Ah("tbody","").children(...t))}function wp(t){return Ah("td","").child(Ah("div",Od+"-border-palette-cell").child(new Xd("border-"+t)).on("click",()=>{this.mode=t;const{mode:e,style:n,color:i}=this;this.change({mode:e,style:n,color:i})}))}class xp{constructor(){this.color="#000",this.style="thin",this.mode="all",this.change=()=>{},this.ddColor=new mp("line-color",this.color),this.ddColor.change=t=>{this.color=t},this.ddType=new bp(this.style),this.ddType.change=([t])=>{this.style=t},this.el=Ah("div",Od+"-border-palette");const t=yp(Ah("tr","").children(Ah("td",Od+"-border-palette-left").child(yp(Ah("tr","").children(...["all","inside","horizontal","vertical","outside"].map(t=>wp.call(this,t))),Ah("tr","").children(...["left","top","right","bottom","none"].map(t=>wp.call(this,t))))),Ah("td",Od+"-border-palette-right").children(Ah("div",Od+"-toolbar-btn").child(this.ddColor.el),Ah("div",Od+"-toolbar-btn").child(this.ddType.el))));this.el.child(t)}}class Sp extends ep{constructor(){const t=new Xd("border-all"),e=new xp;e.change=t=>{this.change(t),this.hide()},super(t,"auto",!1,"bottom-left",e.el)}}class kp extends tp{constructor(){super("border")}dropdown(){return new Sp}}class Ep extends Jf{element(){return super.element().child(new Xd(this.tag)).on("click",()=>this.change(this.tag))}setState(t){this.el.disabled(t)}}class Op extends Ep{constructor(){super("clearformat")}}class Cp extends op{constructor(){super("paintformat")}setState(){}}class jp extends tp{constructor(t){super("color",void 0,t)}dropdown(){const{tag:t,value:e}=this;return new mp(t,e)}}class Ip extends tp{constructor(t){super("bgcolor",void 0,t)}dropdown(){const{tag:t,value:e}=this;return new mp(t,e)}}class Tp extends ep{constructor(){super("10","60px",!0,"bottom-left",...yf.map(t=>Ah("div",Od+"-item").on("click",()=>{this.setTitle(""+t.pt),this.change(t)}).child(""+t.pt)))}}class _p extends tp{constructor(){super("font-size")}getValue(t){return t.pt}dropdown(){return new Tp}}class Ap extends ep{constructor(){const t=bf.map(t=>Ah("div",Od+"-item").on("click",()=>{this.setTitle(t.title),this.change(t)}).child(t.title));super(bf[0].title,"160px",!0,"bottom-left",...t)}}class Pp extends tp{constructor(){super("font-name")}getValue(t){return t.key}dropdown(){return new Ap}}class Dp extends ep{constructor(){let t=If.slice(0);t.splice(2,0,{key:"divider"}),t.splice(8,0,{key:"divider"}),t=t.map(t=>{const e=Ah("div",Od+"-item");return"divider"===t.key?e.addClass("divider"):(e.child(t.title()).on("click",()=>{this.setTitle(t.title()),this.change(t)}),t.label&&e.child(Ah("div","label").html(t.label))),e}),super("Normal","220px",!0,"bottom-left",...t)}setTitle(t){for(let e=0;e<If.length;e+=1)If[e].key===t&&this.title.html(If[e].title());this.hide()}}class Mp extends tp{constructor(){super("format")}getValue(t){return t.key}dropdown(){return new Dp}}class Rp extends ep{constructor(){const t=kf.map(t=>Ah("div",Od+"-item").on("click",()=>{this.hide(),this.change(t)}).child(t.key));super(new Xd("formula"),"180px",!0,"bottom-left",...t)}}class Lp extends tp{constructor(){super("formula")}getValue(t){return t.key}dropdown(){return new Rp}}class Np extends op{constructor(){super("freeze")}}class zp extends op{constructor(){super("merge")}setState(t,e){this.el.active(t).disabled(e)}}class Fp extends Ep{constructor(){super("redo","Ctrl+Y")}}class $p extends Ep{constructor(){super("undo","Ctrl+Z")}}class Vp extends Ep{constructor(){super("print","Ctrl+P")}}class Hp extends op{constructor(){super("textwrap")}}class Wp extends ep{constructor(){const t=new Xd("ellipsis"),e=Ah("div",Od+"-toolbar-more");super(t,"auto",!1,"bottom-right",e),this.moreBtns=e,this.contentEl.css("max-width","420px")}}class Bp extends tp{constructor(){super("more"),this.el.hide()}dropdown(){return new Wp}show(){this.el.show()}hide(){this.el.hide()}}function Up(){return Ah("div",Od+"-toolbar-divider")}function qp(){this.btns2=[],this.items.forEach(t=>{if(Array.isArray(t))t.forEach(({el:t})=>{const e=t.box(),{marginLeft:n,marginRight:i}=t.computedStyle();this.btns2.push([t,e.width+parseInt(n,10)+parseInt(i,10)])});else{const e=t.box(),{marginLeft:n,marginRight:i}=t.computedStyle();this.btns2.push([t,e.width+parseInt(n,10)+parseInt(i,10)])}})}function Gp(){const{el:t,btns:e,moreEl:n,btns2:i}=this,{moreBtns:r,contentEl:o}=n.dd;t.css("width",this.widthFn()-60+"px");const s=t.box();let a=160,l=12;const c=[],u=[];i.forEach(([t,e],n)=>{a+=e,n===i.length-1||a<s.width?c.push(t):(l+=e,u.push(t))}),e.html("").children(...c),r.html("").children(...u),o.css("width",l+"px"),u.length>0?n.show():n.hide()}class Yp{constructor(t,e,n=!1){this.data=t,this.change=()=>{},this.widthFn=e,this.isHide=n;const i=t.defaultStyle();this.items=[[this.undoEl=new $p,this.redoEl=new Fp,new Vp,this.paintformatEl=new Cp,this.clearformatEl=new Op],Up(),[this.formatEl=new Mp],Up(),[this.fontEl=new Pp,this.fontSizeEl=new _p],Up(),[this.boldEl=new ap,this.italicEl=new lp,this.underlineEl=new up,this.strikeEl=new cp,this.textColorEl=new jp(i.color)],Up(),[this.fillColorEl=new Ip(i.bgcolor),this.borderEl=new kp,this.mergeEl=new zp],Up(),[this.alignEl=new ip(i.align),this.valignEl=new rp(i.valign),this.textwrapEl=new Hp],Up(),[this.freezeEl=new Np,this.autofilterEl=new sp,this.formulaEl=new Lp,this.moreEl=new Bp]],this.el=Ah("div",Od+"-toolbar"),this.btns=Ah("div",Od+"-toolbar-btns"),this.items.forEach(t=>{Array.isArray(t)?t.forEach(t=>{this.btns.child(t.el),t.change=(...t)=>{this.change(...t)}}):this.btns.child(t.el)}),this.el.child(this.btns),n?this.el.hide():(this.reset(),setTimeout(()=>{qp.call(this),Gp.call(this)},0),yd(window,"resize",()=>{Gp.call(this)}))}paintformatActive(){return this.paintformatEl.active()}paintformatToggle(){this.paintformatEl.toggle()}trigger(t){this[t+"El"].click()}resetData(t){this.data=t,this.reset()}reset(){if(this.isHide)return;const{data:t}=this,e=t.getSelectedCellStyle();this.undoEl.setState(!t.canUndo()),this.redoEl.setState(!t.canRedo()),this.mergeEl.setState(t.canUnmerge(),!t.selector.multiple()),this.autofilterEl.setState(!t.canAutofilter());const{font:n,format:i}=e;this.formatEl.setState(i),this.fontEl.setState(n.name),this.fontSizeEl.setState(n.size),this.boldEl.setState(n.bold),this.italicEl.setState(n.italic),this.underlineEl.setState(e.underline),this.strikeEl.setState(e.strike),this.textColorEl.setState(e.color),this.fillColorEl.setState(e.bgcolor),this.alignEl.setState(e.align),this.valignEl.setState(e.valign),this.textwrapEl.setState(e.textwrap),this.freezeEl.setState(t.freezeIsActive())}}class Xp{constructor(t,e){this.vchange=()=>{},this.el=Ah("div",Od+"-form-input"),this.input=Ah("input","").css("width",t).on("input",t=>this.vchange(t)).attr("placeholder",e),this.el.child(this.input)}focus(){setTimeout(()=>{this.input.el.focus()},10)}hint(t){this.input.attr("placeholder",t)}val(t){return this.input.val(t)}}class Zp{constructor(t,e,n,i=(t=>t),r=(()=>{})){this.key=t,this.getTitle=i,this.vchange=()=>{},this.el=Ah("div",Od+"-form-select"),this.suggest=new Yd(e.map(t=>({key:t,title:this.getTitle(t)})),t=>{this.itemClick(t.key),r(t.key),this.vchange(t.key)},n,this.el),this.el.children(this.itemEl=Ah("div","input-text").html(this.getTitle(t)),this.suggest.el).on("click",()=>this.show())}show(){this.suggest.search("")}itemClick(t){this.key=t,this.itemEl.html(this.getTitle(t))}val(t){return void 0!==t?(this.key=t,this.itemEl.html(this.getTitle(t)),this):this.key}}const Kp={number:/(^\d+$)|(^\d+(\.\d{0,4})?$)/,date:/^\d{4}-\d{1,2}-\d{1,2}$/};class Qp{constructor(t,e,n,i){this.label="",this.rule=e,n&&(this.label=Ah("label","label").css("width",i+"px").html(n)),this.tip=Ah("div","tip").child("tip").hide(),this.input=t,this.input.vchange=()=>this.validate(),this.el=Ah("div",Od+"-form-field").children(this.label,t.el,this.tip)}isShow(){return"none"!==this.el.css("display")}show(){this.el.show()}hide(){return this.el.hide(),this}val(t){return this.input.val(t)}hint(t){this.input.hint(t)}validate(){const{input:t,rule:e,tip:n,el:i}=this,r=t.val();return e.required&&/^\s*$/.test(r)?(n.html(nd("validation.required")),i.addClass("error"),!1):!e.type&&!e.pattern||(e.pattern||Kp[e.type]).test(r)?(i.removeClass("error"),!0):(n.html(nd("validation.notMatch")),i.addClass("error"),!1)}}class Jp extends class{constructor(t,e,n="600px"){this.title=t,this.el=Ah("div",Od+"-modal").css("width",n).children(Ah("div",Od+"-modal-header").children(new Xd("close").on("click.stop",()=>this.hide()),this.title),Ah("div",Od+"-modal-content").children(...e)).hide()}show(){this.dimmer=Ah("div",Od+"-dimmer active"),document.body.appendChild(this.dimmer.el);const{width:t,height:e}=this.el.show().box(),{clientHeight:n,clientWidth:i}=document.documentElement;this.el.offset({left:(i-t)/2,top:(n-e)/3}),window.xkeydownEsc=t=>{27===t.keyCode&&this.hide()},yd(window,"keydown",window.xkeydownEsc)}hide(){this.el.hide(),document.body.removeChild(this.dimmer.el),wd(window,"keydown",window.xkeydownEsc),delete window.xkeydownEsc}}{constructor(){const t=new Qp(new Zp("cell",["cell"],"100%",t=>nd("dataValidation.modeType."+t)),{required:!0},nd("dataValidation.range")+":",100),e=new Qp(new Xp("120px","E3 or E3:F12"),{required:!0,pattern:/^([A-Z]{1,2}[1-9]\d*)(:[A-Z]{1,2}[1-9]\d*)?$/}),n=new Qp(new Zp("list",["list","number","date","phone","email"],"100%",t=>nd("dataValidation.type."+t),t=>this.criteriaSelected(t)),{required:!0},nd("dataValidation.criteria")+":",100),i=new Qp(new Zp("be",["be","nbe","eq","neq","lt","lte","gt","gte"],"160px",t=>nd("dataValidation.operator."+t),t=>this.criteriaOperatorSelected(t)),{required:!0}).hide(),r=new Qp(new Xp("70px","10"),{required:!0}).hide(),o=new Qp(new Xp("70px","100"),{required:!0,type:"number"}).hide(),s=new Qp(new Xp("120px","a,b,c"),{required:!0}),a=new Qp(new Xp("70px","10"),{required:!0,type:"number"}).hide();super(nd("contextmenu.validation"),[Ah("div",Od+"-form-fields").children(t.el,e.el),Ah("div",Od+"-form-fields").children(n.el,i.el,r.el,o.el,a.el,s.el),Ah("div",Od+"-buttons").children(new uf("cancel").on("click",()=>this.btnClick("cancel")),new uf("remove").on("click",()=>this.btnClick("remove")),new uf("save","primary").on("click",()=>this.btnClick("save")))]),this.mf=t,this.rf=e,this.cf=n,this.of=i,this.minvf=r,this.maxvf=o,this.vf=a,this.svf=s,this.change=()=>{}}showVf(t){const e="date"===t?"2018-11-12":"10",{vf:n}=this;n.input.hint(e),n.show()}criteriaSelected(t){const{of:e,minvf:n,maxvf:i,vf:r,svf:o}=this;"date"===t||"number"===t?(e.show(),n.rule.type=t,i.rule.type=t,"date"===t?(n.hint("2018-11-12"),i.hint("2019-11-12")):(n.hint("10"),i.hint("100")),n.show(),i.show(),r.hide(),o.hide()):("list"===t?o.show():o.hide(),r.hide(),e.hide(),n.hide(),i.hide())}criteriaOperatorSelected(t){if(!t)return;const{minvf:e,maxvf:n,vf:i}=this;if("be"===t||"nbe"===t)e.show(),n.show(),i.hide();else{const t=this.cf.val();i.rule.type=t,"date"===t?i.hint("2018-11-12"):i.hint("10"),i.show(),e.hide(),n.hide()}}btnClick(t){if("cancel"===t)this.hide();else if("remove"===t)this.change("remove"),this.hide();else if("save"===t){const t=["mf","rf","cf","of","svf","vf","minvf","maxvf"];for(let s=0;s<t.length;s+=1){const e=this[t[s]];if(e.isShow()&&!e.validate())return}const e=this.mf.val(),n=this.rf.val(),i=this.cf.val(),r=this.of.val();let o=this.svf.val();"number"!==i&&"date"!==i||(o="be"===r||"nbe"===r?[this.minvf.val(),this.maxvf.val()]:this.vf.val()),this.change("save",e,n,{type:i,operator:r,required:!1,value:o}),this.hide()}}setValue(t){if(t){const{mf:e,rf:n,cf:i,of:r,svf:o,vf:s,minvf:a,maxvf:l}=this,{mode:c,ref:u,validator:h}=t,{type:d,operator:f,value:p}=h||{type:"list"};e.val(c||"cell"),n.val(u),i.val(d),r.val(f),Array.isArray(p)?(a.val(p[0]),l.val(p[1])):(o.val(p||""),s.val(p||"")),this.criteriaSelected(d),this.criteriaOperatorSelected(f)}this.show()}}function tg(t){return Ah("div",`${Od}-item ${t}`)}function eg(t){return tg("state").child(nd("sort."+t)).on("click.stop",()=>this.itemClick(t))}function ng(t){const{filterbEl:e,filterValues:n}=this;e.html(""),Object.keys(t).forEach((i,r)=>{const o=t[i],s=n.includes(i)?"checked":"";e.child(Ah("div",`${Od}-item state ${s}`).on("click.stop",()=>this.filterClick(r,i)).children(""===i?nd("filter.empty"):i,Ah("div","label").html(`(${o})`)))})}function ig(){const{filterhEl:t,filterValues:e,values:n}=this;t.html(`${e.length} / ${n.length}`),t.checked(e.length===n.length)}class rg{constructor(){this.filterbEl=Ah("div",Od+"-body"),this.filterhEl=Ah("div",Od+"-header state").on("click.stop",()=>this.filterClick(0,"all")),this.el=Ah("div",Od+"-sort-filter").children(this.sortAscEl=eg.call(this,"asc"),this.sortDescEl=eg.call(this,"desc"),tg("divider"),Ah("div",Od+"-filter").children(this.filterhEl,this.filterbEl),Ah("div",Od+"-buttons").children(new uf("cancel").on("click",()=>this.btnClick("cancel")),new uf("ok","primary").on("click",()=>this.btnClick("ok")))).hide(),this.ci=null,this.sortDesc=null,this.values=null,this.filterValues=[]}btnClick(t){if("ok"===t){const{ci:t,sort:e,filterValues:n}=this;this.ok&&this.ok(t,e,"in",n)}this.hide()}itemClick(t){this.sort=t;const{sortAscEl:e,sortDescEl:n}=this;e.checked("asc"===t),n.checked("desc"===t)}filterClick(t,e){const{filterbEl:n,filterValues:i,values:r}=this,o=n.children();"all"===e?o.length===i.length?(this.filterValues=[],o.forEach(t=>Ah(t).checked(!1))):(this.filterValues=Array.from(r),o.forEach(t=>Ah(t).checked(!0))):Ah(o[t]).toggle("checked")?i.push(e):i.splice(i.findIndex(t=>t===e),1),ig.call(this)}set(t,e,n,i){this.ci=t;const{sortAscEl:r,sortDescEl:o}=this;null!==i?(this.sort=i.order,r.checked(i.asc()),o.checked(i.desc())):(this.sortDesc=null,r.checked(!1),o.checked(!1)),this.values=Object.keys(e),this.filterValues=n?Array.from(n.value):Object.keys(e),ng.call(this,e,n),ig.call(this)}setOffset(t){this.el.offset(t).show();let e=1;Sd(this.el,()=>{e<=0&&this.hide(),e-=1})}show(){this.el.show()}hide(){this.el.hide(),xd(this.el)}}function og(t,e){const n=Ah("div",Od+"-toast"),i=Ah("div",Od+"-dimmer active");n.children(Ah("div",Od+"-toast-header").children(new Xd("close").on("click.stop",()=>(document.body.removeChild(n.el),void document.body.removeChild(i.el))),t),Ah("div",Od+"-toast-content").html(e)),document.body.appendChild(n.el),document.body.appendChild(i.el);const{width:r,height:o}=n.box(),{clientHeight:s,clientWidth:a}=document.documentElement;n.offset({left:(a-r)/2,top:(s-o)/3})}function sg(t,e){let n;return(...i)=>{const r=this,o=i;n||(n=setTimeout(()=>{n=null,t.apply(r,o)},e))}}function ag(){const{data:t,verticalScrollbar:e,horizontalScrollbar:n}=this,{l:i,t:r,left:o,top:s,width:a,height:l}=t.getSelectedRect(),c=this.getTableOffset();if(Math.abs(o)+a>c.width)n.move({left:i+a-c.width});else{const e=t.freezeTotalWidth();o<e&&n.move({left:i-1-e})}if(Math.abs(s)+l>c.height)e.move({top:r+l-c.height-1});else{const n=t.freezeTotalHeight();s<n&&e.move({top:r-1-n})}}function lg(t,e,n,i=!0,r=!1){if(-1===e&&-1===n)return;const{table:o,selector:s,toolbar:a,data:l,contextMenu:c}=this;c.setMode(-1===e||-1===n?"row-col":"range");const u=l.getCell(e,n);t?(s.setEnd(e,n,r),this.trigger("cells-selected",u,s.range)):(s.set(e,n,i),this.trigger("cell-selected",u,e,n)),a.reset(),o.render()}function cg(t,e){const{selector:n,data:i}=this,{rows:r,cols:o}=i;let[s,a]=n.indexes;const{eri:l,eci:c}=n.range;t&&([s,a]=n.moveIndexes),"left"===e?a>0&&(a-=1):"right"===e?(c!==a&&(a=c),a<o.len-1&&(a+=1)):"up"===e?s>0&&(s-=1):"down"===e?(l!==s&&(s=l),s<r.len-1&&(s+=1)):"row-first"===e?a=0:"row-last"===e?a=o.len-1:"col-first"===e?s=0:"col-last"===e&&(s=r.len-1),t&&(n.moveIndexes=[s,a]),lg.call(this,t,s,a),ag.call(this)}function ug(t){if(0!==t.buttons)return;if(t.target.className===Od+"-resizer-hover")return;const{offsetX:e,offsetY:n}=t,{rowResizer:i,colResizer:r,tableEl:o,data:s}=this,{rows:a,cols:l}=s;if(e>l.indexWidth&&n>a.height)return i.hide(),void r.hide();const c=o.box(),u=s.getCellRectByXY(t.offsetX,t.offsetY);u.ri>=0&&-1===u.ci?(u.width=l.indexWidth,i.show(u,{width:c.width}),a.isHide(u.ri-1)?i.showUnhide(u.ri):i.hideUnhide()):i.hide(),-1===u.ri&&u.ci>=0?(u.height=a.height,r.show(u,{height:c.height}),l.isHide(u.ci-1)?r.showUnhide(u.ci):r.hideUnhide()):r.hide()}let hg=15;function dg(t){if(hg-=1,hg>0)return;hg=15;const{verticalScrollbar:e,horizontalScrollbar:n,data:i}=this,{top:r}=e.scroll(),{left:o}=n.scroll(),{rows:s,cols:a}=i,{deltaY:l,deltaX:c}=t,u=(t,e)=>{let n=t,i=0;do{i=e(n),n+=1}while(i<=0);return i},h=t=>{if(t>0){const t=i.scroll.ri+1;if(t<s.len){const n=u(t,t=>s.getHeight(t));e.move({top:r+n-1})}}else{const t=i.scroll.ri-1;if(t>=0){const n=u(t,t=>s.getHeight(t));e.move({top:0===t?0:r-n})}}},d=Math.abs(l),f=Math.abs(c),p=Math.max(d,f);/Firefox/i.test(window.navigator.userAgent)&&sg(h(t.detail),50),p===f&&sg((t=>{if(t>0){const t=i.scroll.ci+1;if(t<a.len){const e=u(t,t=>a.getWidth(t));n.move({left:o+e-1})}}else{const t=i.scroll.ci-1;if(t>=0){const e=u(t,t=>a.getWidth(t));n.move({left:0===t?0:o-e})}}})(c),50),p===d&&sg(h(l),50)}function fg(t,e){const{verticalScrollbar:n,horizontalScrollbar:i}=this,{top:r}=n.scroll(),{left:o}=i.scroll();"left"===t||"right"===t?i.move({left:o-e}):"up"!==t&&"down"!==t||n.move({top:r-e})}function pg(){const{data:t,verticalScrollbar:e}=this,{height:n}=this.getTableOffset(),i=t.exceptRowTotalHeight(0,-1);e.set(n,t.rows.totalHeight()-i)}function gg(){const{data:t,horizontalScrollbar:e}=this,{width:n}=this.getTableOffset();t&&e.set(n,t.cols.totalWidth())}function mg(){const{selector:t,data:e,editor:n}=this,[i,r]=e.freeze;if(i>0||r>0){const t=e.freezeTotalWidth(),i=e.freezeTotalHeight();n.setFreezeLengths(t,i)}t.resetAreaOffset()}function vg(){const{tableEl:t,overlayerEl:e,overlayerCEl:n,table:i,toolbar:r,selector:o,el:s}=this,a=this.getTableOffset(),l=this.getRect();t.attr(l),e.offset(l),n.offset(a),s.css("width",l.width+"px"),pg.call(this),gg.call(this),mg.call(this),i.render(),r.reset(),o.reset()}function bg(){const{data:t,selector:e}=this;t.clearClipboard(),e.hideClipboard()}function yg(){const{data:t,selector:e}=this;t.copy(),e.showClipboard()}function wg(){const{data:t,selector:e}=this;t.cut(),e.showClipboard()}function xg(t,e){const{data:n}=this;if("read"!==n.settings.mode)if(n.paste(t,t=>og("Tip",t)))vg.call(this);else if(e){const t=e.clipboardData.getData("text/plain");this.data.pasteFromText(t),vg.call(this)}}function Sg(){this.data.hideRowsOrCols(),vg.call(this)}function kg(t,e){this.data.unhideRowsOrCols(t,e),vg.call(this)}function Eg(){const{data:t}=this;t.autofilter(),vg.call(this)}function Og(){const{toolbar:t}=this;t.paintformatActive()&&(xg.call(this,"format"),bg.call(this),t.paintformatToggle())}function Cg(t){const{selector:e,data:n,table:i,sortFilter:r}=this,{offsetX:o,offsetY:s}=t,a=t.target.className===Od+"-selector-corner",l=n.getCellRectByXY(o,s),{left:c,top:u,width:h,height:d}=l;let{ri:f,ci:p}=l;const{autoFilter:g}=n;if(g.includes(f,p)&&c+h-20<o&&u+d-20<s){const t=g.items(p,(t,e)=>n.rows.getCell(t,e));return r.hide(),r.set(p,t,g.getFilter(p),g.getSort(p)),void r.setOffset({left:c,top:u+d+2})}t.shiftKey||(a?e.showAutofill(f,p):lg.call(this,!1,f,p),kd(window,t=>{({ri:f,ci:p}=n.getCellRectByXY(t.offsetX,t.offsetY)),a?e.showAutofill(f,p):1!==t.buttons||t.shiftKey||lg.call(this,!0,f,p,!0,!0)},()=>{a&&e.arange&&"read"!==n.settings.mode&&n.autofill(e.arange,"all",t=>og("Tip",t))&&i.render(),e.hideAutofill(),Og.call(this)})),a||1!==t.buttons||t.shiftKey&&lg.call(this,!0,f,p)}function jg(){const{editor:t,data:e}=this,n=e.getSelectedRect(),i=this.getTableOffset();let r="top";n.top>i.height/2&&(r="bottom"),t.setOffset(n,r)}function Ig(){const{editor:t,data:e}=this;"read"!==e.settings.mode&&(jg.call(this),t.setCell(e.getSelectedCell(),e.getSelectedValidator()),bg.call(this))}function Tg(t){const{data:e,table:n,selector:i}=this;e.scrolly(t,()=>{i.resetBRLAreaOffset(),jg.call(this),n.render()})}function _g(t){const{data:e,table:n,selector:i}=this;e.scrollx(t,()=>{i.resetBRTAreaOffset(),jg.call(this),n.render()})}function Ag(t,e){const{ri:n}=t,{table:i,selector:r,data:o}=this;o.rows.setHeight(n,e),i.render(),r.resetAreaOffset(),pg.call(this),jg.call(this)}function Pg(t,e){const{ci:n}=t,{table:i,selector:r,data:o}=this;o.cols.setWidth(n,e),i.render(),r.resetAreaOffset(),gg.call(this),jg.call(this)}function Dg(t,e="finished"){const{data:n,table:i}=this;if("read"===n.settings.mode)return;n.setSelectedCellText(t,e);const{ri:r,ci:o}=n.selector;"finished"===e?i.render():this.trigger("cell-edited",t,r,o)}function Mg(t){const{data:e}=this;"read"!==e.settings.mode&&("insert-row"===t?e.insert("row"):"delete-row"===t?e.delete("row"):"insert-column"===t?e.insert("column"):"delete-column"===t?e.delete("column"):"delete-cell"===t?e.deleteCell():"delete-cell-format"===t?e.deleteCell("format"):"delete-cell-text"===t?e.deleteCell("text"):"cell-printable"===t?e.setSelectedCellAttr("printable",!0):"cell-non-printable"===t?e.setSelectedCellAttr("printable",!1):"cell-editable"===t?e.setSelectedCellAttr("editable",!0):"cell-non-editable"===t&&e.setSelectedCellAttr("editable",!1),bg.call(this),vg.call(this))}function Rg(t,e){const{data:n}=this;if("undo"===t)this.undo();else if("redo"===t)this.redo();else if("print"===t)this.print.preview();else if("paintformat"===t)!0===e?yg.call(this):bg.call(this);else if("clearformat"===t)Mg.call(this,"delete-cell-format");else if("link"===t);else if("chart"===t);else if("autofilter"===t)Eg.call(this);else if("freeze"===t)if(e){const{ri:t,ci:e}=n.selector;this.freeze(t,e)}else this.freeze(0,0);else n.setSelectedCellAttr(t,e),"formula"!==t||n.selector.multiple()||Ig.call(this),vg.call(this)}function Lg(t,e,n,i){this.data.setAutoFilter(t,e,n,i),vg.call(this)}function Ng(){const{selector:t,overlayerEl:e,rowResizer:n,colResizer:i,verticalScrollbar:r,horizontalScrollbar:o,editor:s,contextMenu:a,toolbar:l,modalValidation:c,sortFilter:u}=this;e.on("mousemove",t=>{ug.call(this,t)}).on("mousedown",t=>{s.clear(),a.hide(),2===t.buttons?(this.data.xyInSelectedRect(t.offsetX,t.offsetY)||Cg.call(this,t),a.setPosition(t.offsetX,t.offsetY),t.stopPropagation()):2===t.detail?Ig.call(this):Cg.call(this,t)}).on("mousewheel.stop",t=>{dg.call(this,t)}).on("mouseout",t=>{const{offsetX:e,offsetY:r}=t;r<=0&&i.hide(),e<=0&&n.hide()}),t.inputChange=t=>{Dg.call(this,t,"input"),Ig.call(this)},function(t,{move:e,end:n}){let i=0,r=0;yd(t,"touchstart",t=>{const{pageX:e,pageY:n}=t.touches[0];i=e,r=n}),yd(t,"touchmove",t=>{if(!e)return;const{pageX:n,pageY:o}=t.changedTouches[0],s=n-i,a=o-r;(Math.abs(s)>10||Math.abs(a)>10)&&(Ed(s,a,t,e),i=n,r=o),t.preventDefault()}),yd(t,"touchend",t=>{if(!n)return;const{pageX:e,pageY:o}=t.changedTouches[0];Ed(e-i,o-r,t,n)})}(e.el,{move:(t,e)=>{fg.call(this,t,e)}}),l.change=(t,e)=>Rg.call(this,t,e),u.ok=(t,e,n,i)=>Lg.call(this,t,e,n,i),n.finishedFn=(t,e)=>{Ag.call(this,t,e)},i.finishedFn=(t,e)=>{Pg.call(this,t,e)},n.unhideFn=t=>{kg.call(this,"row",t)},i.unhideFn=t=>{kg.call(this,"col",t)},r.moveFn=(t,e)=>{Tg.call(this,t,e)},o.moveFn=(t,e)=>{_g.call(this,t,e)},s.change=(t,e)=>{Dg.call(this,e,t)},c.change=(t,...e)=>{"save"===t?this.data.addValidation(...e):this.data.removeValidation()},a.itemClick=t=>{"validation"===t?c.setValue(this.data.getSelectedValidation()):"copy"===t?yg.call(this):"cut"===t?wg.call(this):"paste"===t?xg.call(this,"all"):"paste-value"===t?xg.call(this,"text"):"paste-format"===t?xg.call(this,"format"):"hide"===t?Sg.call(this):Mg.call(this,t)},yd(window,"resize",()=>{this.reload()}),yd(window,"click",t=>{this.focusing=e.contains(t.target)}),yd(window,"paste",t=>{xg.call(this,"all",t),t.preventDefault()}),yd(window,"keydown",t=>{if(!this.focusing)return;const e=t.keyCode||t.which,{key:n,ctrlKey:i,shiftKey:r,metaKey:o}=t;if(i||o)switch(e){case 90:this.undo(),t.preventDefault();break;case 89:this.redo(),t.preventDefault();break;case 67:yg.call(this),t.preventDefault();break;case 88:wg.call(this),t.preventDefault();break;case 85:l.trigger("underline"),t.preventDefault();break;case 86:break;case 37:cg.call(this,r,"row-first"),t.preventDefault();break;case 38:cg.call(this,r,"col-first"),t.preventDefault();break;case 39:cg.call(this,r,"row-last"),t.preventDefault();break;case 40:cg.call(this,r,"col-last"),t.preventDefault();break;case 32:lg.call(this,!1,-1,this.data.selector.ci,!1),t.preventDefault();break;case 66:l.trigger("bold");break;case 73:l.trigger("italic")}else{switch(e){case 32:r&&lg.call(this,!1,this.data.selector.ri,-1,!1);break;case 27:a.hide(),bg.call(this);break;case 37:cg.call(this,r,"left"),t.preventDefault();break;case 38:cg.call(this,r,"up"),t.preventDefault();break;case 39:cg.call(this,r,"right"),t.preventDefault();break;case 40:cg.call(this,r,"down"),t.preventDefault();break;case 9:s.clear(),cg.call(this,!1,r?"left":"right"),t.preventDefault();break;case 13:s.clear(),cg.call(this,!1,r?"up":"down"),t.preventDefault();break;case 8:Mg.call(this,"delete-cell-text"),t.preventDefault()}"Delete"===n?(Mg.call(this,"delete-cell-text"),t.preventDefault()):e>=65&&e<=90||e>=48&&e<=57||e>=96&&e<=105||"="===t.key?(Dg.call(this,t.key,"input"),Ig.call(this)):113===e&&Ig.call(this)}})}class zg{constructor(t,e){this.eventMap=new Map;const{view:n,showToolbar:i,showContextmenu:r}=e.settings;this.el=Ah("div",Od+"-sheet"),this.toolbar=new Yp(e,n.width,!i),this.print=new Yf(e),t.children(this.toolbar.el,this.el,this.print.el),this.data=e,this.tableEl=Ah("canvas",Od+"-table"),this.rowResizer=new Cd(!1,e.rows.height),this.colResizer=new Cd(!0,e.cols.minWidth),this.verticalScrollbar=new jd(!0),this.horizontalScrollbar=new jd(!1),this.editor=new cf(Ef,()=>this.getTableOffset(),e.rows.height),this.modalValidation=new Jp,this.contextMenu=new Qf(()=>this.getRect(),!r),this.selector=new Wd(e),this.overlayerCEl=Ah("div",Od+"-overlayer-content").children(this.editor.el,this.selector.el),this.overlayerEl=Ah("div",Od+"-overlayer").child(this.overlayerCEl),this.sortFilter=new rg,this.el.children(this.tableEl,this.overlayerEl.el,this.rowResizer.el,this.colResizer.el,this.verticalScrollbar.el,this.horizontalScrollbar.el,this.contextMenu.el,this.modalValidation.el,this.sortFilter.el),this.table=new Vf(this.tableEl.el,e),Ng.call(this),vg.call(this),lg.call(this,!1,0,0)}on(t,e){return this.eventMap.set(t,e),this}trigger(t,...e){const{eventMap:n}=this;n.has(t)&&n.get(t).call(this,...e)}resetData(t){this.editor.clear(),this.data=t,pg.call(this),gg.call(this),this.toolbar.resetData(t),this.print.resetData(t),this.selector.resetData(t),this.table.resetData(t)}loadData(t){return this.data.setData(t),vg.call(this),this}freeze(t,e){const{data:n}=this;return n.setFreeze(t,e),vg.call(this),this}undo(){this.data.undo(),vg.call(this)}redo(){this.data.redo(),vg.call(this)}reload(){return vg.call(this),this}getRect(){const{data:t}=this;return{width:t.viewWidth(),height:t.viewHeight()}}getTableOffset(){const{rows:t,cols:e}=this.data,{width:n,height:i}=this.getRect();return{width:n-e.indexWidth,height:i-t.height,left:e.indexWidth,top:t.height}}}class Fg extends ep{constructor(t){super(new Xd("ellipsis"),"auto",!1,"top-left"),this.contentClick=t}reset(t){const e=t.map((t,e)=>Ah("div",Od+"-item").css("width","150px").css("font-weight","normal").on("click",()=>{this.contentClick(e),this.hide()}).child(t));this.setContentChildren(...e)}setTitle(){}}const $g=[{key:"delete",title:id("contextmenu.deleteSheet")}];function Vg(t){return Ah("div",Od+"-item").child(t.title()).on("click",()=>{this.itemClick(t.key),this.hide()})}function Hg(){return $g.map(t=>Vg.call(this,t))}class Wg{constructor(){this.el=Ah("div",Od+"-contextmenu").css("width","160px").children(...Hg.call(this)).hide(),this.itemClick=()=>{}}hide(){const{el:t}=this;t.hide(),xd(t)}setOffset(t){const{el:e}=this;e.offset(t),e.show(),Sd(e)}}class Bg{constructor(t=(()=>{}),e=(()=>{}),n=(()=>{}),i=(()=>{})){this.swapFunc=e,this.updateFunc=i,this.dataNames=[],this.activeEl=null,this.deleteEl=null,this.items=[],this.moreEl=new Fg(t=>{this.clickSwap2(this.items[t])}),this.contextMenu=new Wg,this.contextMenu.itemClick=n,this.el=Ah("div",Od+"-bottombar").children(this.contextMenu.el,this.menuEl=Ah("ul",Od+"-menu").child(Ah("li","").children(new Xd("add").on("click",()=>{this.dataNames.length<10?t():og("tip","it less than or equal to 10")}),Ah("span","").child(this.moreEl))))}addItem(t,e){this.dataNames.push(t);const n=Ah("li",e?"active":"").child(t);n.on("click",()=>{this.clickSwap2(n)}).on("contextmenu",t=>{const{offsetLeft:e,offsetHeight:i}=t.target;this.contextMenu.setOffset({left:e,bottom:i+1}),this.deleteEl=n}).on("dblclick",()=>{const t=n.html(),e=new Xp("auto","");e.val(t),e.input.on("blur",({target:e})=>{const{value:n}=e,i=this.dataNames.findIndex(e=>e===t);this.renameItem(i,n)}),n.html("").child(e.el),e.focus()}),e&&this.clickSwap(n),this.items.push(n),this.menuEl.child(n),this.moreEl.reset(this.dataNames)}renameItem(t,e){this.dataNames.splice(t,1,e),this.moreEl.reset(this.dataNames),this.items[t].html("").child(e),this.updateFunc(t,e)}clear(){this.items.forEach(t=>{this.menuEl.removeChild(t.el)}),this.items=[],this.dataNames=[],this.moreEl.reset(this.dataNames)}deleteItem(){const{activeEl:t,deleteEl:e}=this;if(this.items.length>1){const n=this.items.findIndex(t=>t===e);if(this.items.splice(n,1),this.dataNames.splice(n,1),this.menuEl.removeChild(e.el),this.moreEl.reset(this.dataNames),t===e){const[t]=this.items;return this.activeEl=t,this.activeEl.toggle(),[n,0]}return[n,-1]}return[-1]}clickSwap2(t){const e=this.items.findIndex(e=>e===t);this.clickSwap(t),this.activeEl.toggle(),this.swapFunc(e)}clickSwap(t){null!==this.activeEl&&this.activeEl.toggle(),this.activeEl=t}}class Ug{constructor(t,e={}){let n=t;this.options=e,this.sheetIndex=1,this.datas=[],"string"==typeof t&&(n=document.querySelector(t)),this.bottombar=new Bg(()=>{const t=this.addSheet();this.sheet.resetData(t)},t=>{const e=this.datas[t];this.sheet.resetData(e)},()=>{this.deleteSheet()},(t,e)=>{this.datas[t].name=e}),this.data=this.addSheet();const i=Ah("div",""+Od).on("contextmenu",t=>t.preventDefault());n.appendChild(i.el),this.sheet=new zg(i,this.data),i.child(this.bottombar.el)}addSheet(t,e=!0){const n=t||"sheet"+this.sheetIndex,i=new bd(n,this.options);return i.change=(...t)=>{this.sheet.trigger("change",...t)},this.datas.push(i),this.bottombar.addItem(n,e),this.sheetIndex+=1,i}deleteSheet(){const[t,e]=this.bottombar.deleteItem();t>=0&&(this.datas.splice(t,1),e>=0&&this.sheet.resetData(this.datas[e]))}loadData(t){const e=Array.isArray(t)?t:[t];if(this.bottombar.clear(),this.datas=[],e.length>0)for(let n=0;n<e.length;n+=1){const t=e[n],i=this.addSheet(t.name,0===n);i.setData(t),0===n&&this.sheet.resetData(i)}return this}getData(){return this.datas.map(t=>t.getData())}cellText(t,e,n,i=0){return this.datas[i].setCellText(t,e,n,"finished"),this}cell(t,e,n=0){return this.datas[n].getCell(t,e)}cellStyle(t,e,n=0){return this.datas[n].getCellStyle(t,e)}reRender(){return this.sheet.table.render(),this}on(t,e){return this.sheet.on(t,e),this}validate(){const{validations:t}=this.data;return t.errors.size<=0}change(t){return this.sheet.on("change",t),this}static locale(t,e){rd(t,e)}}const qg=(t,e={})=>new Ug(t,e);window&&(window.x_spreadsheet=qg,window.x_spreadsheet.locale=(t,e)=>rd(t,e));var Gg=Jo.values;Gt({target:"Object",stat:!0},{values:function(t){return Gg(t)}});var Yg,Xg=wu.trim;Gt({target:"String",proto:!0,forced:(Yg="trim",d((function(){return!!gu[Yg]()||"​᠎"!="​᠎"[Yg]()||gu[Yg].name!==Yg})))},{trim:function(){return Xg(this)}});var Zg,Kg,Qg=function(){function t(){xe(this,t)}return Oe(t,null,[{key:"dataset2excel",value:function(t){return t.map((function(t){return{cells:{0:{text:t.x},1:{text:t.y},2:{text:t.s}}}}))}},{key:"binaryMatrix2excel",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=t.map((function(t,e){var n={};return t.forEach((function(t,e){n[e]={text:t}})),{cells:n}}));return e}},{key:"excel2chartDataSet",value:function(t){return Object.values(t.rows).filter((function(t){return"object"===mo(t)})).map((function(t){var e=Object.values(t.cells).map((function(t){return t.text})),n=ss(e,3);return{x:n[0],y:n[1],s:n[2]}}))}},{key:"excel2BinaryMatrix",value:function(t){return Object.values(t.rows).filter((function(t){return"object"===mo(t)})).map((function(t){return Object.values(t.cells).map((function(t){return t.text}))}))}},{key:"csv2VChartJson",value:function(t){var e=t[0],n=t.slice(1);return{columns:e,rows:n.map((function(t,n){var i={};return e.forEach((function(e,n){i[e.trim()]=t[n]})),i}))}}}]),t}(),Jg=g((function(t,e){t.exports=function t(){var e="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:{},n=!e.document&&!!e.postMessage,i=n&&/blob:/i.test((e.location||{}).protocol),r={},o=0,s={parse:function(n,i){var a=(i=i||{}).dynamicTyping||!1;if(x(a)&&(i.dynamicTypingFunction=a,a={}),i.dynamicTyping=a,i.transform=!!x(i.transform)&&i.transform,i.worker&&s.WORKERS_SUPPORTED){var l=function(){if(!s.WORKERS_SUPPORTED)return!1;var n,i,a=(n=e.URL||e.webkitURL||null,i=t.toString(),s.BLOB_URL||(s.BLOB_URL=n.createObjectURL(new Blob(["(",i,")();"],{type:"text/javascript"})))),l=new e.Worker(a);return l.onmessage=m,l.id=o++,r[l.id]=l}();return l.userStep=i.step,l.userChunk=i.chunk,l.userComplete=i.complete,l.userError=i.error,i.step=x(i.step),i.chunk=x(i.chunk),i.complete=x(i.complete),i.error=x(i.error),delete i.worker,void l.postMessage({input:n,config:i,workerId:l.id})}var f=null;return"string"==typeof n?f=i.download?new c(i):new h(i):!0===n.readable&&x(n.read)&&x(n.on)?f=new d(i):(e.File&&n instanceof File||n instanceof Object)&&(f=new u(i)),f.stream(n)},unparse:function(t,e){var n=!1,i=!0,r=",",o="\r\n",a='"',l=a+a,c=!1,u=null,h=!1;!function(){if("object"==typeof e){if("string"!=typeof e.delimiter||s.BAD_DELIMITERS.filter((function(t){return-1!==e.delimiter.indexOf(t)})).length||(r=e.delimiter),("boolean"==typeof e.quotes||"function"==typeof e.quotes||Array.isArray(e.quotes))&&(n=e.quotes),"boolean"!=typeof e.skipEmptyLines&&"string"!=typeof e.skipEmptyLines||(c=e.skipEmptyLines),"string"==typeof e.newline&&(o=e.newline),"string"==typeof e.quoteChar&&(a=e.quoteChar),"boolean"==typeof e.header&&(i=e.header),Array.isArray(e.columns)){if(0===e.columns.length)throw new Error("Option columns is empty");u=e.columns}void 0!==e.escapeChar&&(l=e.escapeChar+a),"boolean"==typeof e.escapeFormulae&&(h=e.escapeFormulae)}}();var d=new RegExp(p(a),"g");if("string"==typeof t&&(t=JSON.parse(t)),Array.isArray(t)){if(!t.length||Array.isArray(t[0]))return g(null,t,c);if("object"==typeof t[0])return g(u||f(t[0]),t,c)}else if("object"==typeof t)return"string"==typeof t.data&&(t.data=JSON.parse(t.data)),Array.isArray(t.data)&&(t.fields||(t.fields=t.meta&&t.meta.fields),t.fields||(t.fields=Array.isArray(t.data[0])?t.fields:f(t.data[0])),Array.isArray(t.data[0])||"object"==typeof t.data[0]||(t.data=[t.data])),g(t.fields||[],t.data||[],c);throw new Error("Unable to serialize unrecognized input");function f(t){if("object"!=typeof t)return[];var e=[];for(var n in t)e.push(n);return e}function g(t,e,n){var s="";"string"==typeof t&&(t=JSON.parse(t)),"string"==typeof e&&(e=JSON.parse(e));var a=Array.isArray(t)&&0<t.length,l=!Array.isArray(e[0]);if(a&&i){for(var c=0;c<t.length;c++)0<c&&(s+=r),s+=m(t[c],c);0<e.length&&(s+=o)}for(var u=0;u<e.length;u++){var h=a?t.length:e[u].length,d=!1,f=a?0===Object.keys(e[u]).length:0===e[u].length;if(n&&!a&&(d="greedy"===n?""===e[u].join("").trim():1===e[u].length&&0===e[u][0].length),"greedy"===n&&a){for(var p=[],g=0;g<h;g++){var v=l?t[g]:g;p.push(e[u][v])}d=""===p.join("").trim()}if(!d){for(var b=0;b<h;b++){0<b&&!f&&(s+=r);var y=a&&l?t[b]:b;s+=m(e[u][y],b)}u<e.length-1&&(!n||0<h&&!f)&&(s+=o)}}return s}function m(t,e){if(null==t)return"";if(t.constructor===Date)return JSON.stringify(t).slice(1,25);!0===h&&"string"==typeof t&&null!==t.match(/^[=+\-@].*$/)&&(t="'"+t);var i=t.toString().replace(d,l);return"boolean"==typeof n&&n||"function"==typeof n&&n(t,e)||Array.isArray(n)&&n[e]||function(t,e){for(var n=0;n<e.length;n++)if(-1<t.indexOf(e[n]))return!0;return!1}(i,s.BAD_DELIMITERS)||-1<i.indexOf(r)||" "===i.charAt(0)||" "===i.charAt(i.length-1)?a+i+a:i}}};if(s.RECORD_SEP=String.fromCharCode(30),s.UNIT_SEP=String.fromCharCode(31),s.BYTE_ORDER_MARK="\ufeff",s.BAD_DELIMITERS=["\r","\n",'"',s.BYTE_ORDER_MARK],s.WORKERS_SUPPORTED=!n&&!!e.Worker,s.NODE_STREAM_INPUT=1,s.LocalChunkSize=10485760,s.RemoteChunkSize=5242880,s.DefaultDelimiter=",",s.Parser=g,s.ParserHandle=f,s.NetworkStreamer=c,s.FileStreamer=u,s.StringStreamer=h,s.ReadableStreamStreamer=d,e.jQuery){var a=e.jQuery;a.fn.parse=function(t){var n=t.config||{},i=[];return this.each((function(t){if("INPUT"!==a(this).prop("tagName").toUpperCase()||"file"!==a(this).attr("type").toLowerCase()||!e.FileReader||!this.files||0===this.files.length)return!0;for(var r=0;r<this.files.length;r++)i.push({file:this.files[r],inputElem:this,instanceConfig:a.extend({},n)})})),r(),this;function r(){if(0!==i.length){var e,n,r,l,c=i[0];if(x(t.before)){var u=t.before(c.file,c.inputElem);if("object"==typeof u){if("abort"===u.action)return e="AbortError",n=c.file,r=c.inputElem,l=u.reason,void(x(t.error)&&t.error({name:e},n,r,l));if("skip"===u.action)return void o();"object"==typeof u.config&&(c.instanceConfig=a.extend(c.instanceConfig,u.config))}else if("skip"===u)return void o()}var h=c.instanceConfig.complete;c.instanceConfig.complete=function(t){x(h)&&h(t,c.file,c.inputElem),o()},s.parse(c.file,c.instanceConfig)}else x(t.complete)&&t.complete()}function o(){i.splice(0,1),r()}}}function l(t){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(t){var e=y(t);e.chunkSize=parseInt(e.chunkSize),t.step||t.chunk||(e.chunkSize=null),this._handle=new f(e),(this._handle.streamer=this)._config=e}.call(this,t),this.parseChunk=function(t,n){if(this.isFirstChunk&&x(this._config.beforeFirstChunk)){var r=this._config.beforeFirstChunk(t);void 0!==r&&(t=r)}this.isFirstChunk=!1,this._halted=!1;var o=this._partialLine+t;this._partialLine="";var a=this._handle.parse(o,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var l=a.meta.cursor;this._finished||(this._partialLine=o.substring(l-this._baseIndex),this._baseIndex=l),a&&a.data&&(this._rowCount+=a.data.length);var c=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(i)e.postMessage({results:a,workerId:s.WORKER_ID,finished:c});else if(x(this._config.chunk)&&!n){if(this._config.chunk(a,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);a=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(a.data),this._completeResults.errors=this._completeResults.errors.concat(a.errors),this._completeResults.meta=a.meta),this._completed||!c||!x(this._config.complete)||a&&a.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),c||a&&a.meta.paused||this._nextChunk(),a}this._halted=!0},this._sendError=function(t){x(this._config.error)?this._config.error(t):i&&this._config.error&&e.postMessage({workerId:s.WORKER_ID,error:t,finished:!1})}}function c(t){var e;(t=t||{}).chunkSize||(t.chunkSize=s.RemoteChunkSize),l.call(this,t),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(t){this._input=t,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(e=new XMLHttpRequest,this._config.withCredentials&&(e.withCredentials=this._config.withCredentials),n||(e.onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)),e.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var t=this._config.downloadRequestHeaders;for(var i in t)e.setRequestHeader(i,t[i])}if(this._config.chunkSize){var r=this._start+this._config.chunkSize-1;e.setRequestHeader("Range","bytes="+this._start+"-"+r)}try{e.send(this._config.downloadRequestBody)}catch(t){this._chunkError(t.message)}n&&0===e.status&&this._chunkError()}},this._chunkLoaded=function(){4===e.readyState&&(e.status<200||400<=e.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:e.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(t){var e=t.getResponseHeader("Content-Range");return null===e?-1:parseInt(e.substring(e.lastIndexOf("/")+1))}(e),this.parseChunk(e.responseText)))},this._chunkError=function(t){var n=e.statusText||t;this._sendError(new Error(n))}}function u(t){var e,n;(t=t||{}).chunkSize||(t.chunkSize=s.LocalChunkSize),l.call(this,t);var i="undefined"!=typeof FileReader;this.stream=function(t){this._input=t,n=t.slice||t.webkitSlice||t.mozSlice,i?((e=new FileReader).onload=w(this._chunkLoaded,this),e.onerror=w(this._chunkError,this)):e=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var t=this._input;if(this._config.chunkSize){var r=Math.min(this._start+this._config.chunkSize,this._input.size);t=n.call(t,this._start,r)}var o=e.readAsText(t,this._config.encoding);i||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(t){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(t.target.result)},this._chunkError=function(){this._sendError(e.error)}}function h(t){var e;l.call(this,t=t||{}),this.stream=function(t){return e=t,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var t,n=this._config.chunkSize;return n?(t=e.substring(0,n),e=e.substring(n)):(t=e,e=""),this._finished=!e,this.parseChunk(t)}}}function d(t){l.call(this,t=t||{});var e=[],n=!0,i=!1;this.pause=function(){l.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){l.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(t){this._input=t,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){i&&1===e.length&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),e.length?this.parseChunk(e.shift()):n=!0},this._streamData=w((function(t){try{e.push("string"==typeof t?t:t.toString(this._config.encoding)),n&&(n=!1,this._checkIsFinished(),this.parseChunk(e.shift()))}catch(t){this._streamError(t)}}),this),this._streamError=w((function(t){this._streamCleanUp(),this._sendError(t)}),this),this._streamEnd=w((function(){this._streamCleanUp(),i=!0,this._streamData("")}),this),this._streamCleanUp=w((function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)}),this)}function f(t){var e,n,i,r=Math.pow(2,53),o=-r,a=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)(e[-+]?\d+)?\s*$/,l=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,c=this,u=0,h=0,d=!1,f=!1,m=[],v={data:[],errors:[],meta:{}};if(x(t.step)){var b=t.step;t.step=function(e){if(v=e,k())S();else{if(S(),0===v.data.length)return;u+=e.data.length,t.preview&&u>t.preview?n.abort():(v.data=v.data[0],b(v,c))}}}function w(e){return"greedy"===t.skipEmptyLines?""===e.join("").trim():1===e.length&&0===e[0].length}function S(){if(v&&i&&(O("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+s.DefaultDelimiter+"'"),i=!1),t.skipEmptyLines)for(var e=0;e<v.data.length;e++)w(v.data[e])&&v.data.splice(e--,1);return k()&&function(){if(v)if(Array.isArray(v.data[0])){for(var e=0;k()&&e<v.data.length;e++)v.data[e].forEach(n);v.data.splice(0,1)}else v.data.forEach(n);function n(e,n){x(t.transformHeader)&&(e=t.transformHeader(e,n)),m.push(e)}}(),function(){if(!v||!t.header&&!t.dynamicTyping&&!t.transform)return v;function e(e,n){var i,r=t.header?{}:[];for(i=0;i<e.length;i++){var o=i,s=e[i];t.header&&(o=i>=m.length?"__parsed_extra":m[i]),t.transform&&(s=t.transform(s,o)),s=E(o,s),"__parsed_extra"===o?(r[o]=r[o]||[],r[o].push(s)):r[o]=s}return t.header&&(i>m.length?O("FieldMismatch","TooManyFields","Too many fields: expected "+m.length+" fields but parsed "+i,h+n):i<m.length&&O("FieldMismatch","TooFewFields","Too few fields: expected "+m.length+" fields but parsed "+i,h+n)),r}var n=1;return!v.data.length||Array.isArray(v.data[0])?(v.data=v.data.map(e),n=v.data.length):v.data=e(v.data,0),t.header&&v.meta&&(v.meta.fields=m),h+=n,v}()}function k(){return t.header&&0===m.length}function E(e,n){return i=e,t.dynamicTypingFunction&&void 0===t.dynamicTyping[i]&&(t.dynamicTyping[i]=t.dynamicTypingFunction(i)),!0===(t.dynamicTyping[i]||t.dynamicTyping)?"true"===n||"TRUE"===n||"false"!==n&&"FALSE"!==n&&(function(t){if(a.test(t)){var e=parseFloat(t);if(o<e&&e<r)return!0}return!1}(n)?parseFloat(n):l.test(n)?new Date(n):""===n?null:n):n;var i}function O(t,e,n,i){var r={type:t,code:e,message:n};void 0!==i&&(r.row=i),v.errors.push(r)}this.parse=function(r,o,a){var l=t.quoteChar||'"';if(t.newline||(t.newline=function(t,e){t=t.substring(0,1048576);var n=new RegExp(p(e)+"([^]*?)"+p(e),"gm"),i=(t=t.replace(n,"")).split("\r"),r=t.split("\n"),o=1<r.length&&r[0].length<i[0].length;if(1===i.length||o)return"\n";for(var s=0,a=0;a<i.length;a++)"\n"===i[a][0]&&s++;return s>=i.length/2?"\r\n":"\r"}(r,l)),i=!1,t.delimiter)x(t.delimiter)&&(t.delimiter=t.delimiter(r),v.meta.delimiter=t.delimiter);else{var c=function(e,n,i,r,o){var a,l,c,u;o=o||[",","\t","|",";",s.RECORD_SEP,s.UNIT_SEP];for(var h=0;h<o.length;h++){var d=o[h],f=0,p=0,m=0;c=void 0;for(var v=new g({comments:r,delimiter:d,newline:n,preview:10}).parse(e),b=0;b<v.data.length;b++)if(i&&w(v.data[b]))m++;else{var y=v.data[b].length;p+=y,void 0!==c?0<y&&(f+=Math.abs(y-c),c=y):c=y}0<v.data.length&&(p/=v.data.length-m),(void 0===l||f<=l)&&(void 0===u||u<p)&&1.99<p&&(l=f,a=d,u=p)}return{successful:!!(t.delimiter=a),bestDelimiter:a}}(r,t.newline,t.skipEmptyLines,t.comments,t.delimitersToGuess);c.successful?t.delimiter=c.bestDelimiter:(i=!0,t.delimiter=s.DefaultDelimiter),v.meta.delimiter=t.delimiter}var u=y(t);return t.preview&&t.header&&u.preview++,e=r,n=new g(u),v=n.parse(e,o,a),S(),d?{meta:{paused:!0}}:v||{meta:{paused:!1}}},this.paused=function(){return d},this.pause=function(){d=!0,n.abort(),e=x(t.chunk)?"":e.substring(n.getCharIndex())},this.resume=function(){c.streamer._halted?(d=!1,c.streamer.parseChunk(e,!0)):setTimeout(c.resume,3)},this.aborted=function(){return f},this.abort=function(){f=!0,n.abort(),v.meta.aborted=!0,x(t.complete)&&t.complete(v),e=""}}function p(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function g(t){var e,n=(t=t||{}).delimiter,i=t.newline,r=t.comments,o=t.step,a=t.preview,l=t.fastMode,c=e=void 0===t.quoteChar?'"':t.quoteChar;if(void 0!==t.escapeChar&&(c=t.escapeChar),("string"!=typeof n||-1<s.BAD_DELIMITERS.indexOf(n))&&(n=","),r===n)throw new Error("Comment character same as delimiter");!0===r?r="#":("string"!=typeof r||-1<s.BAD_DELIMITERS.indexOf(r))&&(r=!1),"\n"!==i&&"\r"!==i&&"\r\n"!==i&&(i="\n");var u=0,h=!1;this.parse=function(t,s,d){if("string"!=typeof t)throw new Error("Input must be a string");var f=t.length,g=n.length,m=i.length,v=r.length,b=x(o),y=[],w=[],S=[],k=u=0;if(!t)return N();if(l||!1!==l&&-1===t.indexOf(e)){for(var E=t.split(i),O=0;O<E.length;O++){if(S=E[O],u+=S.length,O!==E.length-1)u+=i.length;else if(d)return N();if(!r||S.substring(0,v)!==r){if(b){if(y=[],D(S.split(n)),z(),h)return N()}else D(S.split(n));if(a&&a<=O)return y=y.slice(0,a),N(!0)}}return N()}for(var C=t.indexOf(n,u),j=t.indexOf(i,u),I=new RegExp(p(c)+p(e),"g"),T=t.indexOf(e,u);;)if(t[u]!==e)if(r&&0===S.length&&t.substring(u,u+v)===r){if(-1===j)return N();u=j+m,j=t.indexOf(i,u),C=t.indexOf(n,u)}else{if(-1!==C&&(C<j||-1===j)){if(!(C<T)){S.push(t.substring(u,C)),u=C+g,C=t.indexOf(n,u);continue}var _=F(C,T,j);if(_&&void 0!==_.nextDelim){C=_.nextDelim,T=_.quoteSearch,S.push(t.substring(u,C)),u=C+g,C=t.indexOf(n,u);continue}}if(-1===j)break;if(S.push(t.substring(u,j)),L(j+m),b&&(z(),h))return N();if(a&&y.length>=a)return N(!0)}else for(T=u,u++;;){if(-1===(T=t.indexOf(e,T+1)))return d||w.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:y.length,index:u}),R();if(T===f-1)return R(t.substring(u,T).replace(I,e));if(e!==c||t[T+1]!==c){if(e===c||0===T||t[T-1]!==c){-1!==C&&C<T+1&&(C=t.indexOf(n,T+1)),-1!==j&&j<T+1&&(j=t.indexOf(i,T+1));var A=M(-1===j?C:Math.min(C,j));if(t[T+1+A]===n){S.push(t.substring(u,T).replace(I,e)),t[u=T+1+A+g]!==e&&(T=t.indexOf(e,u)),C=t.indexOf(n,u),j=t.indexOf(i,u);break}var P=M(j);if(t.substring(T+1+P,T+1+P+m)===i){if(S.push(t.substring(u,T).replace(I,e)),L(T+1+P+m),C=t.indexOf(n,u),T=t.indexOf(e,u),b&&(z(),h))return N();if(a&&y.length>=a)return N(!0);break}w.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:y.length,index:u}),T++}}else T++}return R();function D(t){y.push(t),k=u}function M(e){var n=0;if(-1!==e){var i=t.substring(T+1,e);i&&""===i.trim()&&(n=i.length)}return n}function R(e){return d||(void 0===e&&(e=t.substring(u)),S.push(e),u=f,D(S),b&&z()),N()}function L(e){u=e,D(S),S=[],j=t.indexOf(i,u)}function N(t){return{data:y,errors:w,meta:{delimiter:n,linebreak:i,aborted:h,truncated:!!t,cursor:k+(s||0)}}}function z(){o(N()),y=[],w=[]}function F(i,r,o){var s={nextDelim:void 0,quoteSearch:void 0},a=t.indexOf(e,r+1);if(r<i&&i<a&&(a<o||-1===o)){var l=t.indexOf(n,a);if(-1===l)return s;a<l&&(a=t.indexOf(e,a+1)),s=F(l,a,o)}else s={nextDelim:i,quoteSearch:r};return s}},this.abort=function(){h=!0},this.getCharIndex=function(){return u}}function m(t){var e=t.data,n=r[e.workerId],i=!1;if(e.error)n.userError(e.error,e.file);else if(e.results&&e.results.data){var o={abort:function(){i=!0,v(e.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:b,resume:b};if(x(n.userStep)){for(var s=0;s<e.results.data.length&&(n.userStep({data:e.results.data[s],errors:e.results.errors,meta:e.results.meta},o),!i);s++);delete e.results}else x(n.userChunk)&&(n.userChunk(e.results,o,e.file),delete e.results)}e.finished&&!i&&v(e.workerId,e.results)}function v(t,e){var n=r[t];x(n.userComplete)&&n.userComplete(e),n.terminate(),delete r[t]}function b(){throw new Error("Not implemented.")}function y(t){if("object"!=typeof t||null===t)return t;var e=Array.isArray(t)?[]:{};for(var n in t)e[n]=y(t[n]);return e}function w(t,e){return function(){t.apply(e,arguments)}}function x(t){return"function"==typeof t}return i&&(e.onmessage=function(t){var n=t.data;if(void 0===s.WORKER_ID&&n&&(s.WORKER_ID=n.workerId),"string"==typeof n.input)e.postMessage({workerId:s.WORKER_ID,results:s.parse(n.input,n.config),finished:!0});else if(e.File&&n.input instanceof File||n.input instanceof Object){var i=s.parse(n.input,n.config);i&&e.postMessage({workerId:s.WORKER_ID,results:i,finished:!0})}}),(c.prototype=Object.create(l.prototype)).constructor=c,(u.prototype=Object.create(l.prototype)).constructor=u,(h.prototype=Object.create(h.prototype)).constructor=h,(d.prototype=Object.create(l.prototype)).constructor=d,s}()})),tm=["text/csv","text/x-csv","application/vnd.ms-excel","text/plain"],em={name:"lbs-csv-import",methods:{checkMimeType:function(t){return tm.indexOf(t)>-1},validFileMimeType:function(t){t.preventDefault();var e=this.$refs.csv.files[0];this.checkMimeType(e.type)&&this.loadFile()},loadFile:function(){var t=this;this.readFile((function(e){var n=Jg.parse(e,{skipEmptyLines:!0});t.$emit("parse",n),t.$refs.input.value=""}))},readFile:function(t){var e=this.$refs.csv.files[0];if(e){var n=new FileReader;n.readAsText(e,"UTF-8"),n.onload=function(e){t(e.target.result)},n.onerror=function(){}}}},render:function(){var t=arguments[0],e=+new Date;return t("div",{style:"height: 24px;"},[t("label",{attrs:{for:e},class:"ant-btn ant-btn-primary ant-btn-sm"},["选择导入 csv 文件"]),t("input",{ref:"csv",attrs:{id:e,type:"file",name:"csv"},on:{change:this.validFileMimeType},style:"visibility:hidden;"},["xxxx"])])}},nm={name:"lbs-excel-editor",props:{value:{type:Array},formatter:{type:Function}},computed:{innerItems:{get:function(){return Qg.binaryMatrix2excel(this.value)},set:function(t){this.$emit("input",t)}}},watch:{value:function(){this.refreshSheet({rows:this.innerItems})}},methods:{parseCSV:function(t){var e=Qg.binaryMatrix2excel(t.data);this.$emit("change",t.data),this.refreshSheet({rows:e})},refreshSheet:function(t){this.sheet.loadData(t),this.sheet.reRender()},initSheet:function(){var t=this,e=this.$refs.excel;return this.sheet||new Ug(e,{showToolbar:!1,showGrid:!0,showContextmenu:!0}).change((function(e){t.$emit("change",t.formatter(e))}))}},render:function(){var t=arguments[0];return t("div",{style:"max-height: 320px;overflow:scroll;"},[t("div",{style:"line-height:2;"},[t("span",["方案1: ",t(em,{on:{parse:this.parseCSV}})]),t("span",["方案2: 直接编辑 Excel"]),t("div",{ref:"excel",style:"margin-right: 12px;width: 100%;overflow: scroll"})])])},mounted:function(){this.sheet=this.initSheet(),this.refreshSheet({rows:this.innerItems})}},im={components:(Zg={},mn(Zg,i.Pagination.name,i.Pagination),mn(Zg,i.Button.name,i.Pagination),Zg),props:{elementProps:{type:Object,default:function(){return{items:[],activeIndex:0}}}},computed:{innerItems:function(){return this.elementProps.items}},data:function(){return{current:1}},methods:{itemRender:function(t,e,n){var i=this,r=this.$createElement;return"prev"===e?r("a-button",{style:{marginRight:"8px"},attrs:{size:"small",icon:"minus",disabled:1===this.innerItems.length},on:{click:function(){return i.minus(t)}}}):"next"===e?r("a-button",{style:{marginLeft:"8px"},attrs:{size:"small",icon:"plus"},on:{click:this.add}}):n},add:function(){this.elementProps.items.push({image:"",value:"选项".concat(this.innerItems.length+1,"-value"),label:"选项".concat(this.innerItems.length+1,"-label")})},minus:function(t){1!==this.innerItems.length&&(this.elementProps.items.splice(t,1),this.elementProps.activeIndex=Math.max(t-1,0))}},render:function(){var t=this,e=arguments[0],n=this.innerItems[this.current-1]||{};return e("div",[e("a-pagination",{attrs:{current:this.current,size:"small",total:this.innerItems.length,defaultPageSize:1,itemRender:this.itemRender},on:{change:function(e){t.current=e,t.elementProps.activeIndex=e-1}}}),e("lbs-image-gallery",{style:{margin:"16px 0"},attrs:{value:n.image},on:{change:function(t){n.image=t}}})])}};
/* @license
  Papa Parse
  v5.3.0
  https://github.com/mholt/PapaParse
  License: MIT
  */function rm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function om(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rm(Object(n),!0).forEach((function(e){mn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var sm,am={components:(Kg={},mn(Kg,i.Form.name,i.Form),mn(Kg,i.Form.Item.name,i.Form.Item),mn(Kg,i.Tabs.name,i.Tabs),mn(Kg,i.Button.name,i.Button),mn(Kg,i.Radio.name,i.Radio),mn(Kg,i.Radio.Group.name,i.Radio.Group),mn(Kg,i.Radio.Button.name,i.Radio.Button),mn(Kg,i.Input.name,i.Input),mn(Kg,i.Input.TextArea.name,i.Input.TextArea),mn(Kg,i.Switch.name,i.Switch),mn(Kg,i.InputNumber.name,i.InputNumber),mn(Kg,i.Select.name,i.Select),mn(Kg,"colorsPanel",Ih),mn(Kg,"lbsTextAlign",Th),mn(Kg,"lbsExcelEditor",nm),mn(Kg,"lbpSlideCustomEditor",im),Kg),data:function(){return{loadCustomEditorFlag:!1}},props:{layout:{type:String,default:"horizontal"},config:{type:Object,default:function(){return{}}},value:{type:Object,default:function(){return{}}}},watch:{config:function(){var t=this;setTimeout((function(){t.form.setFieldsValue(t.value)}))}},created:function(){var t=this;this.form=this.$form.createForm(this,{onFieldsChange:function(){t.$emit("change",t.form.getFieldsValue())}})},computed:{formItemLayout:function(){return"horizontal"===this.layout?{labelCol:{span:6},wrapperCol:{span:16,offset:2}}:{}}},methods:{renderPropFormItem:function(t,e){var n=this.$createElement,i=e.editor;if(i){var r={props:om(om(om({},this.formItemLayout),i.layout),{},{label:i.label})};return n("a-form-item",Vc([{},r]),[n(i.type,Vc([{directives:[{name:"decorator",value:[t]}]},{props:i.props}]))])}}},render:function(){var t=this,e=arguments[0],n=Object.entries(this.config);return e("a-form",{attrs:{form:this.form,size:"mini",layout:this.layout,initialValue:this.value},class:"props-config-form"},[n.map((function(e){var n=ss(e,2),i=n[0],r=n[1];return t.renderPropFormItem(i,r)}))])}},lm={components:(sm={},mn(sm,i.Input.TextArea.name,i.Input.TextArea),mn(sm,i.Button.name,i.Button),sm),data:function(){return{editorContent:"return {\n      editorMethods: {              // 此项配置自定义方法的在组件配置面板如何展示\n        projectJump1: {             // 方法名，对应于 methods 内的某方法\n          label: '外部跳转1',        // 自定义方法显示名\n          params: [                 // 参数列表，对象数组\n            {\n              label: '跳转地址',     // 参数1的名称\n              desc: '项目相对地址',   // 参数1的描述\n              type: 'string',       // 参数1的类型，支持string|number|boolean|array|object\n              default: ''           // 参数1默认值\n            },\n            {\n              label: '参数',\n              desc: 'query形式参数',\n              type: 'object',\n              default: {}\n            }\n          ]\n        }\n      },\n      methods:{\n        projectJump1:function(url, query){\n          console.log(url, query)\n          let win = window.open(url, '_blank')\n          win.focus()\n        }\n      }\n    }"}},render:function(t){return t("span",[this.$t("editor.editPanel.common.empty")])}};kc("match",1,(function(t,e,n){return[function(e){var n=$(this),i=null==e?void 0:e[t];return void 0!==i?i.call(e,n):new RegExp(e)[t](String(n))},function(t){var i=n(e,t,this);if(i.done)return i.value;var r=k(t),o=String(this);if(!r.global)return jc(r,o);var s=r.unicode;r.lastIndex=0;for(var a,l=[],c=0;null!==(a=jc(r,o));){var u=String(a[0]);l[c]=u,""===u&&(r.lastIndex=Cc(o,Ot(r.lastIndex),s)),c++}return 0===c?null:l}]}));var cm=function(t){return function(e,n,i,r){Yt(n);var o=Zt(e),s=F(o),a=Ot(o.length),l=t?a-1:0,c=t?-1:1;if(i<2)for(;;){if(l in s){r=s[l],l+=c;break}if(l+=c,t?l<0:a<=l)throw TypeError("Reduce of empty array with no initial value")}for(;t?l>=0:a>l;l+=c)l in s&&(r=n(r,s[l],l,o));return r}},um={left:cm(!1),right:cm(!0)}.left,hm=ce("reduce"),dm=fe("reduce",{1:0});Gt({target:"Array",proto:!0,forced:!hm||!dm||!Ui&&Pe>79&&Pe<83},{reduce:function(t){return um(this,t,arguments.length,arguments.length>1?arguments[1]:void 0)}});var fm,pm,gm=[{label:"进入",value:/进/},{label:"退出",value:/退/},{label:"强调",value:/强调|特殊/}],mm=[{label:"",value:"空",children:[{label:"无",value:""}]},{label:"强调",value:"Attention Seekers",children:[{label:"旋转",value:"justRotate"},{label:"弹跳",value:"bounce"},{label:"闪烁",value:"flash"},{label:"跳动",value:"pulse"},{label:"抖动",value:"shake"},{label:"摇摆",value:"swing"},{label:"橡皮圈",value:"rubberBand"},{label:"果冻",value:"jello"},{label:"",value:"tada"},{label:"",value:"wobble"}]},{label:"弹跳进入",value:"Bouncing Entrances",children:[{label:"弹跳进入",value:"bounceIn"},{label:"向下弹跳进入",value:"bounceInDown"},{label:"向右弹跳进入",value:"bounceInLeft"},{label:"向左弹跳进入",value:"bounceInRight"},{label:"向上弹跳进入",value:"bounceInUp"}]},{label:"弹跳退出",value:"Bouncing Exits",children:[{label:"弹跳退出",value:"bounceOut"},{label:"向下弹跳退出",value:"bounceOutDown"},{label:"向左弹跳退出",value:"bounceOutLeft"},{label:"向右弹跳退出",value:"bounceOutRight"},{label:"向上弹跳退出",value:"bounceOutUp"}]},{label:"渐显进入",value:"Fading Entrances",children:[{label:"渐显进入",value:"fadeIn"},{label:"向下渐显进入",value:"fadeInDown"},{label:"由屏幕外向下渐显进入",value:"fadeInDownBig"},{label:"向右显进入",value:"fadeInLeft"},{label:"由屏幕外向右渐显进入",value:"fadeInLeftBig"},{label:"向左渐显进入",value:"fadeInRight"},{label:"由屏幕外向左渐显进入",value:"fadeInRightBig"},{label:"向上渐显进入",value:"fadeInUp"},{label:"由屏幕外向上渐显进入",value:"fadeInUpBig"}]},{label:"渐隐退出",value:"Fading Exits",children:[{label:"渐隐退出",value:"fadeOut"},{label:"向下渐隐退出",value:"fadeOutDown"},{label:"向下渐隐退出屏幕外",value:"fadeOutDownBig"},{label:"向左渐隐退出",value:"fadeOutLeft"},{label:"向左渐隐退出屏幕外",value:"fadeOutLeftBig"},{label:"向右渐隐退出",value:"fadeOutRight"},{label:"向右渐隐退出屏幕外",value:"fadeOutRightBig"},{label:"向上渐隐退出",value:"fadeOutUp"},{label:"向上渐隐退出屏幕外",value:"fadeOutUpBig"}]},{label:"翻动",value:"Flippers",children:[{label:"翻动",value:"flip"},{label:"纵向翻动",value:"flipInX"},{label:"横向翻动",value:"flipInY"},{label:"立体纵向翻动",value:"flipOutX"},{label:"立体横向翻动",value:"flipOutY"}]},{label:"加速进出",value:"Lightspeed",children:[{label:"加速进入",value:"lightSpeedIn"},{label:"加速退出",value:"lightSpeedOut"}]},{label:"旋转渐显",value:"Rotating Entrances",children:[{label:"旋转渐显",value:"rotateIn"},{label:"左下角旋转渐显",value:"rotateInDownLeft"},{label:"旋转渐显",value:"右下角rotateInDownRight"},{label:"左上角旋转渐显",value:"rotateInUpLeft"},{label:"右上角旋转渐显",value:"rotateInUpRight"}]},{label:"旋转渐隐",value:"Rotating Exits",children:[{label:"旋转渐隐",value:"rotateOut"},{label:"左下角旋转渐隐",value:"rotateOutDownLeft"},{label:"左下角旋转渐隐",value:"rotateOutDownRight"},{label:"左上角旋转渐隐",value:"rotateOutUpLeft"},{label:"右上角旋转渐隐",value:"rotateOutUpRight"}]},{label:"平移进入",value:"Sliding Entrances",children:[{label:"向上平移进入",value:"slideInUp"},{label:"向下平移进入",value:"slideInDown"},{label:"向右平移进入",value:"slideInLeft"},{label:"向左平移进入",value:"slideInRight"}]},{label:"平移退出",value:"Sliding Exits",children:[{label:"向上平移退出",value:"slideOutUp"},{label:"向下平移退出",value:"slideOutDown"},{label:"向左平移退出",value:"slideOutLeft"},{label:"向右平移退出",value:"slideOutRight"}]},{label:"放大进入",value:"Zoom Entrances",children:[{label:"放大进入",value:"zoomIn"},{label:"向下放大进入",value:"zoomInDown"},{label:"向右放大进入",value:"zoomInLeft"},{label:"向左放大进入",value:"zoomInRight"},{label:"向上放大进入",value:"zoomInUp"}]},{label:"缩小退出",value:"Zoom Exits",children:[{label:"缩小退出",value:"zoomOut"},{label:"向下缩小退出",value:"zoomOutDown"},{label:"向左缩小退出",value:"zoomOutLeft"},{label:"向右缩小退出",value:"zoomOutRight"},{label:"向上缩小退出",value:"zoomOutUp"}]},{label:"特殊效果",value:"Specials",children:[{label:"悬挂",value:"hinge"},{label:"滚动进入",value:"rollIn"},{label:"滚动退出",value:"rollOut"}]}],vm=mm.reduce((function(t,e){return e.children.forEach((function(e){t[e.value]=e.label})),t}),{}),bm={components:(fm={},mn(fm,i.InputNumber.name,i.InputNumber),mn(fm,i.List.Item.name,i.List.Item),mn(fm,i.Tabs.name,i.Tabs),mn(fm,i.Form.name,i.Form),mn(fm,i.Button.name,i.Button),mn(fm,i.Popover.name,i.Popover),mn(fm,i.Slider.name,i.Slider),mn(fm,i.Switch.name,i.Switch),mn(fm,i.Collapse.name,i.Collapse),mn(fm,i.Collapse.Panel.name,i.Collapse.Panel),mn(fm,i.Icon.name,i.Icon),mn(fm,i.Drawer.name,i.Drawer),mn(fm,i.Tabs.TabPane.name,i.Tabs.TabPane),mn(fm,i.Button.Group.name,i.Button.Group),mn(fm,i.Form.Item.name,i.Form.Item),mn(fm,i.Tag.name,i.Tag),fm),props:{value:{type:Array,default:function(){return[]}}},computed:{animationQueue:function(){return this.value||[]}},data:function(){return{activeCollapsePanel:0,activePreviewAnimation:"",drawerVisible:!1}},methods:{addAnimation:function(){this.animationQueue.push({type:"",duration:1,delay:0,interationCount:1,infinite:!1}),this.activeCollapsePanel=this.animationQueue.length-1,this.$emit("change",this.animationQueue)},deleteAnimate:function(t){this.animationQueue.splice(t,1),this.$emit("change",this.animationQueue)},updateAnimation:function(t){var e=this.animationQueue[this.activeCollapsePanel];e&&(e.type=t),this.drawerVisible=!1,this.$emit("change",this.animationQueue)},runAnimate:function(){Lu.$emit("RUN_ANIMATIONS")},renderSecondAnimationTabs:function(t){var e=this,n=this.$createElement;return n("a-tabs",{attrs:{defaultActiveKey:t[0].value,tabBarStyle:{marginLeft:"-16px"},size:"small",tabBarGutter:0,tabPosition:"left"},on:{change:function(t){}},style:"width:100%;"},[t.map((function(t){return n("a-tab-pane",{attrs:{tab:t.label||t.value},key:t.value},[n("a-list",{attrs:{grid:{gutter:12,column:2},dataSource:t.children,renderItem:function(t,i){return n("a-list-item",{class:"shortcut-button-wrapper"},[n("div",{on:{click:function(){return e.updateAnimation(t.value)},mouseenter:function(n){e.activePreviewAnimation=t.value},mouseleave:function(){}},class:["shortcut-button",e.activePreviewAnimation===t.value&&"".concat(t.value," animated")]},[t.label])])}}})])}))])},renderAvaiableAnimations:function(){var t=this,e=this.$createElement;return e("a-tabs",{class:"avaiable-animations-tabs",attrs:{defaultActiveKey:gm[0].label,size:"small",tabBarGutter:0},on:{change:function(t){}},style:"width:100%;"},[gm.map((function(n){return e("a-tab-pane",{attrs:{tab:n.label},key:n.label},[t.renderSecondAnimationTabs(mm.filter((function(t){return!!t.label.match(n.value)})))])}))])},renderAnimationOptions:function(t){var e=this,n=this.$createElement;return n("a-form",{attrs:{layout:"horizontal"}},[n("a-form-item",{attrs:{label:this.$t("editor.editPanel.animation.type"),labelCol:{span:5},wrapperCol:{span:16,offset:2}}},[n("a-button",{attrs:{type:"link",size:"small",icon:"ordered-list"},on:{click:function(){e.drawerVisible=!0}}},[this.$t("editor.editPanel.animation.list")])]),n("a-form-item",{attrs:{label:this.$t("editor.editPanel.animation.duration"),labelCol:{span:5},wrapperCol:{span:16,offset:2}},style:"margin-bottom:0;"},[n("a-form-item",{style:{display:"inline-block",width:"calc(50% - 12px)"}},[n("a-slider",{attrs:{defaultValue:2,min:0,max:20,value:t.duration},on:{change:function(e){t.duration=e}}})]),n("a-form-item",{style:{display:"inline-block",width:"calc(50% - 12px)",marginLeft:"4px"}},[n("a-input-number",{attrs:{min:0,max:20,size:"small",formatter:function(t){return"".concat(t,"秒(s)")},value:t.duration},on:{change:function(e){t.duration=e}}})])]),n("a-form-item",{attrs:{label:this.$t("editor.editPanel.animation.delay"),labelCol:{span:5},wrapperCol:{span:16,offset:2}},style:"margin-bottom:0;"},[n("a-form-item",{style:{display:"inline-block",width:"calc(50% - 12px)"}},[n("a-slider",{attrs:{defaultValue:2,min:0,max:20,value:t.delay},on:{change:function(e){t.delay=e}}})]),n("a-form-item",{style:{display:"inline-block",width:"calc(50% - 12px)",marginLeft:"4px"}},[n("a-input-number",{attrs:{min:0,max:20,size:"small",formatter:function(t){return"".concat(t,"秒(s)")},value:t.delay},on:{change:function(e){t.delay=e}}})])]),n("a-form-item",{attrs:{label:this.$t("editor.editPanel.animation.iteration"),labelCol:{span:5},wrapperCol:{span:16,offset:2}},style:"margin-bottom:0;"},[n("a-form-item",{style:{display:"inline-block",width:"calc(50% - 12px)"}},[n("a-slider",{attrs:{defaultValue:2,min:0,max:20,value:t.interationCount},on:{change:function(e){t.interationCount=e}}})]),n("a-form-item",{style:{display:"inline-block",width:"calc(50% - 12px)",marginLeft:"4px"}},[n("a-input-number",{attrs:{min:0,max:20,size:"small",formatter:function(t){return"".concat(t,"次(times)")},value:t.interationCount},on:{change:function(e){t.interationCount=e}}})])]),n("a-form-item",{attrs:{label:this.$t("editor.editPanel.animation.inifinite"),labelCol:{span:5},wrapperCol:{span:16,offset:2}},style:"margin-bottom:0;"},[n("a-switch",{attrs:{value:t.infinite},on:{change:function(e){t.infinite=e}}})])])}},render:function(t){var e=this;return t("div",{class:"main-animate widget",attrs:{id:"animation-right-panel"}},[t("a-button-group",[t("a-button",{attrs:{type:"primary"},on:{click:this.addAnimation}},[t("a-icon",{attrs:{type:"plus"}}),this.$t("editor.editPanel.animation.add")]),t("a-button",{attrs:{type:"primary"},on:{click:this.runAnimate}},[this.$t("editor.editPanel.animation.run"),t("a-icon",{attrs:{type:"right-circle"}})])]),t("a-collapse",{attrs:{accordion:!0,activeKey:""+this.activeCollapsePanel},class:"collapse-wrapper",on:{change:function(t){e.activeCollapsePanel=void 0!==t?+t:-1}}},[this.animationQueue.map((function(n,i){return t("a-collapse-panel",{key:"".concat(i)},[t("template",{slot:"header"},[t("span",[e.$t("editor.editPanel.animation.title",{index:i+1})]),t("a-tag",{attrs:{color:"orange"}},[vm[n.type]||n.type]),t("a-icon",{attrs:{type:"delete",title:"删除动画"},on:{click:function(){return e.deleteAnimate(i)}}})]),e.renderAnimationOptions(n)])}))]),t("a-drawer",{attrs:{title:"请选择动画",placement:"left",closable:!0,width:"100%",visible:this.drawerVisible,wrapStyle:{position:"absolute"},getContainer:!1},on:{close:function(){e.drawerVisible=!1}}},[t("div",[this.renderAvaiableAnimations()])])])}},ym={data:function(){return{}},render:function(){var t=arguments[0],e=this.editingElement;return e?t("div",["TODO"]):t("span",[this.$t("editor.editPanel.common.empty")])}},wm=!d((function(){return Object.isExtensible(Object.preventExtensions({}))})),xm=g((function(t){var e=C.f,n=st("meta"),i=0,r=Object.isExtensible||function(){return!0},o=function(t){e(t,n,{value:{objectID:"O"+ ++i,weakData:{}}})},s=t.exports={REQUIRED:!1,fastKey:function(t,e){if(!b(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!W(t,n)){if(!r(t))return"F";if(!e)return"E";o(t)}return t[n].objectID},getWeakData:function(t,e){if(!W(t,n)){if(!r(t))return!0;if(!e)return!1;o(t)}return t[n].weakData},onFreeze:function(t){return wm&&s.REQUIRED&&r(t)&&!W(t,n)&&o(t),t}};ct[n]=!0})).onFreeze,Sm=Object.freeze,km=d((function(){Sm(1)}));Gt({target:"Object",stat:!0,forced:km,sham:!wm},{freeze:function(t){return Sm&&b(t)?Sm(xm(t)):t}});var Em,Om,Cm={components:(pm={},mn(pm,i.Form.name,i.Form),mn(pm,i.Form.Item.name,i.Form.Item),mn(pm,i.Radio.Group.name,i.Radio.Group),mn(pm,i.Radio.Button.name,i.Radio.Button),pm),data:function(){return{formLayout:"vertical",PAGE_MODE:Object.freeze(uu),PAGE_MODE_LABEL:Object.freeze(hu)}},computed:{pageMode:{get:function(){return this.work.page_mode||uu.SWIPPER_PAGE},set:function(t){this.updateWork({page_mode:t})}}},render:function(){var t=this,e=arguments[0];return e("div",[e("a-form",{attrs:{layout:this.formLayout}},[e("a-form-item",{attrs:{label:"H5类型"}},[e("a-radio-group",{attrs:{size:"small"},model:{value:t.pageMode,callback:function(e){t.pageMode=e}}},[uu.map((function(t,n){return e("a-radio-button",{key:n,attrs:{value:t}},[hu[n]])}))])])])])}},jm={name:"ElementPropsEditor",components:(Em={},mn(Em,i.Layout.Sider.name,i.Layout.Sider),mn(Em,i.Tabs.name,i.Tabs),mn(Em,i.Tabs.TabPane.name,i.Tabs.TabPane),Em),props:{width:{type:Number,default:375},element:{type:Object,default:function(){return{}}}},computed:{editPropsConfig:function(){var t=this.element;return t&&t.pluginName?t.getEditorProps():{}},editPropsValue:function(){var t=this.element,e=this.editPropsConfig,n=Object.keys(e),i=t?t.props:{};return xh(i,n)},editAnimationValue:function(){var t=this.element;return t?t.animations:[]}},data:function(){return{activeTabKey:"属性"}},methods:{setActiveTab:function(t){this.activeTabKey=t}},render:function(){var t=arguments[0];return t("a-layout-sider",{attrs:{width:this.width,theme:"light"},style:{padding:"0 12px"}},[t("a-tabs",{style:"height: 100%;",attrs:{tabBarGutter:10,defaultActiveKey:this.activeTabKey,activeKey:this.activeTabKey},on:{change:this.setActiveTab}},[t("a-tab-pane",{key:"属性"},[t("span",{slot:"tab"},[this.$t("editor.editPanel.tab.prop")]),t(am,{attrs:{config:this.editPropsConfig,value:this.editPropsValue},on:{change:this.$listeners.propsChange}})]),t("a-tab-pane",{attrs:{label:"动画",tab:this.$t("editor.editPanel.tab.animation")},key:"动画"},[t(bm,{attrs:{value:this.editAnimationValue},on:{change:this.$listeners.animationsChange}})]),t("a-tab-pane",{attrs:{label:"动作",tab:this.$t("editor.editPanel.tab.action")},key:"动作"},["动作"===this.activeTabKey&&t(ym)]),t("a-tab-pane",{attrs:{label:"脚本",tab:this.$t("editor.editPanel.tab.script")},key:"脚本"},[t(lm)]),t("a-tab-pane",{attrs:{label:"页面",tab:this.$t("editor.editPanel.tab.page")},key:"页面"},["页面"===this.activeTabKey&&t(Cm)])])])}},Im={functional:!0,props:{faIcon:{required:!0,type:String},name:{required:!0,type:String},clickFn:{required:!1,type:Function,default:function(){}},mousedownFn:{required:!1,type:Function,default:function(){}},disabled:{type:Boolean,default:!1}},render:function(t,e){var n=e.props;return e.listeners,e.slots,t("button",{class:"shortcut-button",on:{click:n.clickFn,mousedown:n.mousedownFn},attrs:{disabled:n.disabled}},[t("i",{class:["shortcut-icon","fa","fa-".concat(n.faIcon)],attrs:{"aria-hidden":"true"}}),t("span",[n.name])])}},Tm={components:mn({},i.Icon.name,i.Icon),render:function(){var t=arguments[0];return t("div",{class:"plugin-usage-tip "},[t("a-icon",{attrs:{type:"info-circle"}}),t("i18n",{attrs:{path:"editor.tip.componentUsage",tag:"span"},class:"ml-1"},[t("strong",[this.$t("editor.tip.click")]),this.$t("editor.tip.click")])])}};function _m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Am(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_m(Object(n),!0).forEach((function(e){mn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Pm(t,e,n,i,r,o,s,a,l,c){"boolean"!=typeof s&&(l=a,a=s,s=!1);const u="function"==typeof n?n.options:n;let h;if(t&&t.render&&(u.render=t.render,u.staticRenderFns=t.staticRenderFns,u._compiled=!0,r&&(u.functional=!0)),i&&(u._scopeId=i),o?(h=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(o)},u._ssrRegister=h):e&&(h=s?function(t){e.call(this,c(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,a(t))}),h)if(u.functional){const t=u.render;u.render=function(e,n){return h.call(n),t(e,n)}}else{const t=u.beforeCreate;u.beforeCreate=t?[].concat(t,h):[h]}return n}const Dm=Pm({render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticStyle:{"text-align":"center"}},[n("a-button",{staticStyle:{"margin-top":"16px"},attrs:{type:"primary"},on:{click:t.showModal}},[t._v("配置 NPM 组件列表")]),t._v(" "),n("a-modal",{attrs:{title:"NPM 组件列表配置信息",visible:t.visible,confirmLoading:t.confirmLoading},on:{ok:t.handleOk,cancel:t.handleCancel}},[n("div",[n("a-textarea",{attrs:{placeholder:"Basic usage",rows:20},model:{value:t.text,callback:function(e){t.text=e},expression:"text"}})],1)])],1)},staticRenderFns:[]},void 0,{components:(Om={},mn(Om,i.Modal.name,i.Modal),mn(Om,i.Input.TextArea.name,i.Input.TextArea),mn(Om,i.Button.name,i.Button),Om),data:function(){return{visible:!1,confirmLoading:!1,text:JSON.stringify([{package:"@luban-h5/lbp-slide",version:"0.0.7",name:"lbp-slide",icon:"photo",title:"轮播图",visible:!0}],null,2)}},methods:{showModal:function(){this.visible=!0},handleOk:function(t){var e=window.createjs,n=new Function("return ".concat(this.text).replace("\n",""))();n=n.map((function(t){return Am(Am({},t),{},{src:"https://cdn.jsdelivr.net/npm/".concat(t.package,"@").concat(t.version,"/dist/").concat(t.name,".umd.js")})}));var i=new e.LoadQueue;i.on("fileload",(function(t){var e=t.item.name;c.default.component(e,window[e])}),this),i.on("complete",(function(t){this.visible=!1,this.confirmLoading=!1,this.$emit("loadComplete",n)}),this),i.loadManifest(n)},handleCancel:function(t){this.visible=!1}}},void 0,!1,void 0,!1,void 0,void 0,void 0);function Mm(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function Rm(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Mm(Object(n),!0).forEach((function(e){mn(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Mm(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Lm,Nm,zm,Fm=null,$m={isPreDrag:!1,isDrag:!1,origin:{clientY:0,clientX:0,layerX:0,layerY:0}},Vm=function(){function t(e){xe(this,t),this.mousedown=e.mousedown,this.mousemove=e.mousemove,this.mouseup=e.mouseup,this._mousedown=this._mousedown.bind(this),this._mousemove=this._mousemove.bind(this),this._mouseup=this._mouseup.bind(this)}return Oe(t,[{key:"start",value:function(t){this._mousedown(t)}},{key:"_mousedown",value:function(t){this.mousedown(t),this.toggleListener("add")}},{key:"_mousemove",value:function(t){this.mousemove(t)}},{key:"_mouseup",value:function(t){this.mouseup(t),this.toggleListener("remove")}},{key:"toggleListener",value:function(t){document["".concat(t,"EventListener")]("mousemove",this._mousemove),document["".concat(t,"EventListener")]("mouseup",this._mouseup)}}]),t}(),Hm={data:function(){return{}},methods:{handleDragStartFromMixin:function(t,e){0===e.button&&(Fm&&(document.body.removeChild(Fm),Fm=null),this.dragElement=t,Fm=e.target.cloneNode(!0),document.body.appendChild(Fm),new Vm({mousedown:this.mousedown,mousemove:this.mousemove,mouseup:this.mouseup}).start(e))},mousedown:function(t){var e=t.layerX,n=t.layerY;$m.origin.layerX=e,$m.origin.layerY=n,$m.origin.clientX=t.clientX,$m.origin.clientY=t.clientY,Fm.style.position="absolute",Fm.style.left=t.clientX-e+"px",Fm.style.top=t.clientY-n+"px",Fm.classList.add("dragging-dom-ele","hidden"),$m.isPreDrag=!0},mousemove:function(t){Fm.classList.remove("hidden");var e=$m.origin,n=e.layerX,i=e.layerY;Fm.style.left=t.clientX-n+"px",Fm.style.top=t.clientY-i+"px"},mouseup:function(t){var e=$m.origin,n=e.layerX,i=e.layerY;if(document.body.removeChild(Fm),Fm=null,this.checkCanMousedown(t,{minOffset:10})){var r=document.querySelector(".lbp-canvas").getBoundingClientRect();this.dragElement&&this.clone(Rm(Rm({},this.dragElement),{},{dragStyle:{left:t.clientX-n-r.left,top:t.clientY-i-r.top}}))}},checkCanMousedown:function(t,e){var n=e.minOffsetX,i=e.minOffsetY,r=e.minOffset,o=t.clientX-$m.origin.clientX,s=t.clientY-$m.origin.clientY;return o>=(n||r)||s>=(i||r)}},updated:function(){}},Wm={name:"shotcuts-panel",components:(Lm={},mn(Lm,i.Row.name,i.Row),mn(Lm,i.Col.name,i.Col),Lm),mixins:[Hm],data:function(){return{npmPackages:[]}},methods:{clone:function(t){this.$emit("add",t)}},render:function(t){var e=this;return t("a-row",{style:"padding-bottom: 24px"},[t(Tm),[].concat(je.getPlugins(),this.npmPackages).filter((function(t){return t.visible})).map((function(n){return t("a-col",{attrs:{span:12},style:{marginTop:"10px"}},[t(Im,{attrs:{clickFn:e.clone.bind(e,n),mousedownFn:e.handleDragStartFromMixin.bind(e,n),name:n.title||n.name,faIcon:n.icon,disabled:n.disabled}})])})),t(Dm,{on:{loadComplete:function(t){e.npmPackages=t}}})])}},Bm={components:(Nm={},mn(Nm,i.Popconfirm.name,i.Popconfirm),mn(Nm,i.Input.name,i.Input),mn(Nm,i.Icon.name,i.Icon),Nm),props:["page","pageIndex"],data:function(){return{editingTitle:""}},methods:{getTitle:function(){return this.page.title||this.$t("editor.pageManager.title",{index:this.pageIndex})}},render:function(){var t=this,e=arguments[0];return e("a-popconfirm",{attrs:{placement:"bottom",okText:"Yes",cancelText:"No"},on:{confirm:function(){t.$emit("editTitle",{newTitle:t.editingTitle,pageIndex:t.pageIndex})},cancel:function(){}}},[e("a-input",{slot:"title",attrs:{value:this.editingTitle,size:"small"},on:{change:function(e){t.editingTitle=e.target.value}}}),e("a-icon",{attrs:{type:"edit"},on:{click:function(e){e.stopPropagation(),t.editingTitle=t.getTitle()}}})])}},Um={components:(zm={},mn(zm,i.Dropdown.name,i.Dropdown),mn(zm,i.Menu.name,i.Menu),mn(zm,i.Menu.Item.name,i.Menu.Item),mn(zm,i.Icon.name,i.Icon),zm),render:function(){var t=this,e=arguments[0],n=this.$t("editor.pageManager.action.add"),i=this.$t("editor.pageManager.action.copy"),r=this.$t("editor.pageManager.action.delete");return e("a-dropdown",{attrs:{trigger:["hover"],placement:"bottomCenter"}},[e("a",{class:"ml-2",attrs:{href:"#"}},[e("a-icon",{attrs:{type:"down"}})]),e("a-menu",{slot:"overlay",on:{click:function(e){var n=e.key;return t.$emit("selectMenuItem",n)}}},[e("a-menu-item",{key:"add"},[e("a-icon",{attrs:{type:"plus"}}),n]),e("a-menu-item",{key:"copy"},[e("a-icon",{attrs:{type:"copy"}}),i]),e("a-menu-item",{key:"delete"},[e("a-icon",{attrs:{type:"delete"}}),r])])])}},qm={components:mn({},i.Badge.name,i.Badge),props:["page","pageIndex"],methods:{getTitle:function(){return this.page.title||this.$t("editor.pageManager.title",{index:this.pageIndex})}},render:function(t){return t("span",[t("a-badge",{attrs:{count:this.pageIndex+1,numberStyle:{backgroundColor:"#fff",color:"#999",boxShadow:"0 0 0 1px #d9d9d9 inset"}}}),t("span",{class:"ml-3"},[this.getTitle()])])}},Gm={name:"page-manager",props:{pages:{type:Array,default:[]}},components:mn({},i.Button.name,i.Button),data:function(){return{pageIndex:0}},methods:{onSelectMenuItem:function(t){this.$emit("add")},onEditTitle:function(t){var e=t.pageIndex,n=t.newTitle;this.pageManager({type:"editTitle",value:{pageIndex:e,newTitle:n}})},onSelectPage:function(t){this.pageIndex=t,this.$emit("pageChange",t)},onLeave:function(){this.hoverIndex=-1}},render:function(t){var e=this;return t("div",{class:"page-manager-panel"},[this.pages.map((function(n,i){return t("span",{class:["cursor-pointer","page-manager-panel__item",i===e.pageIndex&&"active"],on:{click:function(){return e.onSelectPage(i)},mouseenter:function(){e.hoverIndex=i}}},[t(qm,{attrs:{page:n,pageIndex:i}}),t("span",[e.hoverIndex===i&&t(Bm,{attrs:{page:n,pageIndex:i},on:{editTitle:e.onEditTitle}}),t(Um,{on:{selectMenuItem:e.onSelectMenuItem}})])])})),t("a-button",{attrs:{icon:"plus",type:"dashed"},class:"footer-actions",on:{click:function(){return e.onSelectMenuItem("add")}}},[this.$t("editor.pageManager.action.add")])])}};function Ym(t){return{title:t.name,key:t.id,children:(t.children||[]).map(Ym)}}const Xm=Pm({render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("a-tree",{staticClass:"draggable-tree",attrs:{"default-expanded-keys":t.expandedKeys,draggable:"","tree-data":t.treeData}})},staticRenderFns:[]},void 0,{name:"page-tree",components:mn({},i.Tree.name,i.Tree),computed:{treeData:function(){return this.elements.map(Ym)}},data:function(){return{gData:[],expandedKeys:[]}}},void 0,!1,void 0,!1,void 0,void 0,void 0);var Zm,Km,Qm={props:{pages:{type:Array,default:function(){return[]}}},components:(Zm={},mn(Zm,i.Layout.Sider.name,i.Layout.Sider),mn(Zm,i.Tabs.name,i.Tabs),mn(Zm,i.Tabs.TabPane.name,i.Tabs.TabPane),Zm),name:"EditorLeftPanel",render:function(t){return t("a-layout-sider",{attrs:{width:"240",theme:"light"},style:{padding:"0 12px",height:"100%",overflow:"auto"}},[t("a-tabs",{attrs:{tabBarGutter:10}},[t("a-tab-pane",{key:"plugin-list",attrs:{tab:this.$t("editor.sidebar.components")}},[t(Wm,{on:{add:this.$listeners.addElement}})]),t("a-tab-pane",{key:"page-manager",attrs:{tab:this.$t("editor.sidebar.pages")}},[t(Gm,{attrs:{pages:this.pages},on:{add:this.$listeners.addPage,pageChange:this.$listeners.pageChange}})]),t("a-tab-pane",{key:"page-tree",attrs:{tab:this.$t("editor.sidebar.tree")}},[t(Xm)])])])}},Jm={props:{width:{type:Number,default:0},height:{type:Number,default:0},data:{type:Array,default:function(){return[]}}},data:function(){return{vLines:[],hLines:[]}},watch:{data:{handler:"calcVHLine",deep:!0}},methods:{drawVLine:function(t){this.vLines=[{left:t}]},clearVLine:function(){this.vLines=[]},drawHLine:function(t){this.hLines=[{top:t}]},clearHLine:function(){this.hLines=[]},genBorder:function(t){var e=t.left,n=t.top,i=t.width,r=t.height;return[[e+i,e+i/2,e],[n+r,n+r/2,n]]},calcVHLine:function(){var t=this,e=[],n=[],i=!1,r=!1;this.data.forEach((function(i){var r=t.genBorder(i),o=ss(r,2),s=o[0],a=o[1];e.push.apply(e,Ql(s)),n.push.apply(n,Ql(a))}));var o=this.genBorder({left:0,top:0,width:this.width,height:this.height}),s=ss(o,2),a=s[0],l=s[1];a.forEach((function(n){e.forEach((function(e){var r=e-n;Math.abs(r)<=5&&(t.drawVLine(e),i=!0)}))})),l.forEach((function(e){n.forEach((function(n){var i=n-e;Math.abs(i)<=5&&(t.drawHLine(n),r=!0)}))})),i||this.clearVLine(),r||this.clearHLine()}},render:function(){var t=this,e=arguments[0];return e("div",{class:"luban-auxiliary-line"},[this.vLines.map((function(n){return e("div",{class:"v-line",style:{left:"".concat(n.left,"px"),height:"".concat(t.height,"px")}})})),this.hLines.map((function(n){return e("div",{class:"h-line",style:{top:"".concat(n.top,"px"),width:"".concat(t.width,"px")}})}))])}},tv={props:{height:{type:Number,default:0}},components:mn({},i.InputNumber.name,i.InputNumber),methods:{updateWorkHeight:function(t){this.$emit("change",t||0)},mousedownForAdjustLine:function(t){var e=this,n=t.clientY,i=this.height,r=document.querySelector("#editor-wrapper .ant-layout"),o=function(t){t.stopPropagation(),t.preventDefault();var o=t.clientY-n+i;e.updateWorkHeight(o),r&&(r.scrollTop=r.scrollHeight)};document.addEventListener("mousemove",o,!0),document.addEventListener("mouseup",(function t(){document.removeEventListener("mousemove",o,!0),document.removeEventListener("mouseup",t,!0)}),!0)}},render:function(){var t=arguments[0];return t("div",{style:{position:"absolute",bottom:"0px",width:"100%",transform:"translateY(100%)"}},[t("div",{class:"adjust-line-wrapper adjust-line-wrapper-h"},[t("div",{class:"adjust-line adjust-line-h"}),t("div",{class:"adjust-button",on:{mousedown:this.mousedownForAdjustLine}},[t("div",{class:"indicator"})]),t("div",{class:"adjust-tip"},[t("span",["375 x"]),t("a-input-number",{attrs:{size:"small",min:0,value:this.height},style:"margin: 0 4px; width:60px;",on:{change:this.updateWorkHeight}}),t("span",["px"])])])])}},ev={methods:{onMousedown:function(t){var e=this,n=t.clientX,i=function(t){t.preventDefault(),t.stopPropagation();var i=n-t.clientX;e.$emit("lineMove",i),n-=i};document.addEventListener("mousemove",i,!0),document.addEventListener("mouseup",(function t(e){document.removeEventListener("mousemove",i,!0),document.removeEventListener("mouseup",t,!0)}),!0)}},render:function(){var t=arguments[0];return t("div",{class:"adjust-line-wrapper adjust-line-wrapper-v",on:{mousedown:this.onMousedown}},[t("div",{class:"adjust-line adjust-line-v"}),t("div",{class:"adjust-button"},[t("div",{class:"indicator"})])])}},nv={name:"lbp-h5-editor",i18n:lo,components:(Km={},mn(Km,i.Layout.name,i.Layout),mn(Km,i.Layout.Content.name,i.Layout),Km),props:{data:{type:Object,default:function(){return{}}}},data:function(){return{work:{},pageIndex:0,activeElement:null,auxiliayVisible:!1,rightPanelWidth:yo}},computed:{currentPage:function(){var t=this.work.pages,e=(void 0===t?[]:t)[this.pageIndex]||{};return e},elementsRect:function(){var t=this.currentPage,e=(void 0===t?{}:t).elements;return(void 0===e?[]:e).map((function(t){return t.style}))}},watch:{data:{handler:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.work=new fu(t),bo.init(this.work)},immediate:!0}},methods:{record:gn((function(){bo.addState(this.work)}),80),getData:function(){return this.work},changePageIndex:function(t){this.pageIndex=t},addPage:function(t){this.work.pages.push(new du({title:t})),this.record()},updatePage:function(t){Object.assign(this.currentPage,t),this.record()},addElement:function(){for(var t=this,e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];n.forEach((function(e){if(e instanceof cu)t.currentPage.elements.push(e);else{var n=new cu(e);t.currentPage.elements.push(n)}})),this.record()},updateElement:function(t){this.activeElement&&this.activeElement.update(t),this.record()},clear:function(){this.currentPage.elements=[],this.record()},undo:function(){this.work=new fu(bo.undo())},redo:function(){this.work=new fu(bo.redo())},_hideAuxiliay:function(){this.auxiliayVisible=!1},_showAuxiliay:function(){this.auxiliayVisible=!0},_handleElementActive:function(t){this.activeElement=t},_handleElementDeactive:function(t){t===this.activeElement&&(this.activeElement=null)},_handleAdjustLieMove:function(t){this.rightPanelWidth+=t},_handlePropsChange:function(t){this.updateElement({props:t})},_handleAnimationsChange:function(t){this.updateElement({animations:t})},_handleElementRectChange:function(t){this.updateElement({style:t})},_handleAddElement:function(t){this.addElement({pluginName:t.name,style:t.dragStyle})},_handleAddPage:function(t){this.addPage(t)},_handlePageHeightChange:function(t){this.updatePage({height:t})},_handlePageIndexChange:function(t){this.changePageIndex(t)},_handleRedo:function(){this.redo()},_handleUndo:function(){this.undo()}},render:function(){var t=arguments[0];return t("a-layout",{style:{height:"100%"}},[t(Qm,{attrs:{pages:this.work.pages},on:{pageChange:this._handlePageIndexChange,addElement:this._handleAddElement,addPage:this._handleAddPage}}),t("a-layout",{attrs:{id:"editor-wrapper"}},[t("a-layout-content",{class:"scroll-view remove-scrollbar"},[t("div",{class:"editor-content",on:{mousedown:this._showAuxiliay,mouseup:this._hideAuxiliay}},[t(Jm,{attrs:{data:this.elementsRect,width:this.currentPage.width,height:this.currentPage.height},directives:[{name:"show",value:this.auxiliayVisible}]}),t(Fu,{attrs:{width:this.currentPage.width,height:this.currentPage.height,elements:this.currentPage.elements},on:{elementActive:this._handleElementActive,elementDeactive:this._handleElementDeactive,elementChange:this._handleElementRectChange}}),t(tv,{attrs:{height:this.currentPage.height},on:{change:this._handlePageHeightChange}})])])]),t(ev,{on:{lineMove:this._handleAdjustLieMove}}),t(Vu,{on:{redo:this._handleRedo,undo:this._handleUndo}}),t(jm,{attrs:{width:this.rightPanelWidth,element:this.activeElement},on:{propsChange:this._handlePropsChange,animationsChange:this._handleAnimationsChange}})])},install:function(t){t.component(nv.name,nv)}};"undefined"!=typeof window&&window.Vue&&nv.install(window.Vue),nv.LbpH5Plugin=je,e.LbpH5Canvas=Fu,e.LbpWork=fu,e.default=nv,Object.defineProperty(e,"__esModule",{value:!0})}))}).call(this,n("c8ba"))},c05f:function(t,e,n){}});
//# sourceMappingURL=app.1e3aed06.js.map